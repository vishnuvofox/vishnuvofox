import{r as u,j as e,A as O,V as fe,c as pe,a as De,p as Ce,f as Q,s as K,b as ae,d as i,B as J,e as Ne,g as ke,F as ge,i as me,h as B,k as se,l as re,m as ne,n as Z,o as Se,q as Te,t as Me,u as he,v as oe,O as Ae,I as Ee,w as Fe,x as xe,T as ce,C as Pe,y as Ie,z as U,L as Ve,D as Oe,E as Re,G as $e,H as de,J as Le,M as j,K as be,N as We,S as je,P as ze,Q as le,R as ie,U as Be,W as Ge,X as we}from"./vendor-ac6fcfdf.js";const ye=u.createContext({}),ot=({children:a})=>{const t=_e();return e(ye.Provider,{value:t,children:a})},Ue=()=>u.useContext(ye),_e=()=>{const[a,t]=u.useState(!1),[s,r]=u.useState(!0),[l,p]=u.useState(sessionStorage.getItem("fullEmail")),f=async()=>{try{const m=await S();t(!!m)}catch(m){console.error("Error checking authentication:",m),t(!1)}finally{r(!1)}};u.useEffect(()=>{f().catch(m=>{console.error("Error checking authentication:",m)})});const N=async(m,x)=>{try{await O.signIn(m,x);const b=await O.currentSession();return t(!!b),b}catch(b){throw console.error("Error resending confirmation code: ",b),b}},D=async(m,x,b)=>{try{const v=await O.signUp({username:m,password:x,attributes:{email:m,given_name:b}});return console.log("Sign up success:",v),v}catch(v){throw v instanceof Error&&fe.error(`${v.message}`),v}},y=async(m,x)=>{try{return await O.confirmSignUp(m,x),console.log("Confirmation successful"),!0}catch(b){throw console.error("Error confirming sign up: ",b),b}},E=async m=>{try{await O.resendSignUp(m)}catch(x){throw console.error("Error resending confirmation code: ",x),x}},A=async()=>{try{return await O.signOut(),{success:!0,message:"LOGOUT SUCCESS"}}catch{return{success:!1,message:"LOGOUT FAIL"}}},F=async m=>{try{return await O.forgotPassword(m),console.log("Password reset initiated successfully"),{success:!0,message:"Password reset initiated successfully"}}catch(x){throw console.error("Error initiating password reset: ",x),x}},k=async(m,x,b)=>{try{return await O.forgotPasswordSubmit(m,x,b),console.log("Password reset successful"),!0}catch(v){throw console.error("Error resetting password: ",v),v}},I=async(m,x)=>{try{return await O.confirmSignUp(m,x),console.log("Code confirmed successfully"),!0}catch(b){throw console.error("Error confirming code: ",b),b}},V=async(m,x,b)=>{try{const v=await O.signIn(m,x);v.challengeName==="NEW_PASSWORD_REQUIRED"?(await O.completeNewPassword(v,b),console.log("Password changed successfully")):console.log("User is not in NEW_PASSWORD_REQUIRED state")}catch(v){console.error("Failed to change password:",v)}await O.signOut()},S=async()=>{try{return(await O.currentSession()).getIdToken().getJwtToken()}catch{return}};return{isAuthenticated:a,loading:s,setIsAuthenticated:t,signIn:N,signUp:D,signOut:A,confirmSignUp:y,forgotPassword:F,resendConfirmationCode:E,confirmForgotPassword:k,verifyConfirmationCode:I,getIdToken:S,forceChangePassword:V,fullEmail:l,setFullEmail:p}},He=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",Ze=localStorage.getItem("theme")||He,lt=pe(a=>({theme:Ze,setTheme:({theme:t})=>{const s=document.body;t==="dark"?(s.classList.add("dark"),s.classList.remove("light")):(s.classList.add("light"),s.classList.remove("dark")),localStorage.setItem("theme",t),a({theme:t})}})),Ke=()=>({toast:De});pe()(a=>({isOpen:!1,open:()=>a({isOpen:!0}),close:()=>a({isOpen:!1})}));const it=()=>e("div",{className:"my-[50px] flex h-full items-center justify-center",children:e("img",{className:"max-h-[380px] w-full object-contain",src:"/assets/imgs/something_went_wrong.gif",alt:"something_went_wrong"})}),Qe={height:"45px","& .css-nxo287-MuiInputBase-input-MuiOutlinedInput-input":{color:"rgba(0, 0, 0, 0.7)"},"& .MuiSvgIcon-root":{color:"rgba(0, 0, 0, 0.35)"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#DEE2E6"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#DEE2E6"},"& .Mui-focused .MuiOutlinedInput-notchedOutline":{border:"1px solid #DEE2E6"}},Ye={padding:"38px",mt:3,px:4,pt:1},qe={border:"none","& .left-align":{textAlign:"left !important"},"& .MuiDataGrid-cell":{border:"none",display:"flex",alignItems:"center",wordBreak:"break-word",whiteSpace:"normal"},"& .MuiDataGrid-columnHeader":{color:"#8392AB",padding:"0 25px"},"& .MuiDataGrid-withBorderColor, .MuiDataGrid-filler, .MuiDataGrid-columnHeaderRow":{backgroundColor:"#F5F6FA"},"& .MuiDataGrid-scrollbarFiller":{backgroundColor:"#F5F6FA"},"& .MuiDataGrid-topContainer::after":{backgroundColor:"#F5F6FA"},"& .MuiDataGrid-columnSeparator":{display:"none"},"& .MuiDataGrid-columnHeaderTitle":{fontWeight:"600"},"& .MuiDataGrid-row":{color:"#172B4D",padding:"0 15px",alignItems:"center",borderRadius:"7px","&:hover":{backgroundColor:"#F5F6FA"}},"& .Mui-odd-row":{backgroundColor:"#F3F3F3",border:"1px solid #F3F3F3"},"& .Mui-even-row":{backgroundColor:"#FFFFFF",border:"1px solid #E8E8E8"},"& .MuiDataGrid-virtualScrollerRenderZone":{borderRadius:"7px",overflow:"hidden"},"& .MuiDataGrid-filler":{border:"none",backgroundColor:"transparent","& .css-1jlz3st":{border:"none",backgroundColor:"transparent"}},"& .MuiDataGrid-footerContainer":{border:"none",borderRadius:"7px",overflow:"hidden"},"& .MuiDataGrid-footerContainer::before":{backgroundColor:"#F5F6FA"},"& .MuiToolbar-root":{backgroundColor:"#F5F6FA",color:"#8392AB",marginTop:"0px",paddingTop:"0px"},"& .MuiDataGrid-scrollbar--vertical":{width:"10px",zIndex:"auto"},"& .MuiDataGrid-scrollbar--horizontal":{height:"10px",zIndex:"auto"},"& .MuiDataGrid-scrollbar--horizontal::-webkit-scrollbar-thumb":{backgroundColor:"transparent"},"& .MuiDataGrid-row:last-child":{},"&.MuiDataGrid-root--densityCompact .MuiDataGrid-cell":{py:"8px"},"&.MuiDataGrid-root--densityStandard .MuiDataGrid-cell":{minHeight:"50px",py:"2px"},"&.MuiDataGrid-root--densityComfortable .MuiDataGrid-cell":{py:"22px"}};const ct=a=>a.charAt(0).toUpperCase()+a.slice(1),dt=a=>{if(a){const t=a.trim().split(" ");if(t.length===1)return t[0].charAt(0).toUpperCase();const s=t[0].charAt(0).toUpperCase(),r=t[t.length-1].charAt(0).toUpperCase();return s+r}},ut=(a,t)=>a.length>t?a.substring(0,t)+"...":a,mt=a=>{const t=`1970-01-01T${a}`,s=new Date(t),r=new Date(s.getTime()+s.getTimezoneOffset()*60*1e3);return Q(r,"HH:mm:ss")},H=a=>{const t=Intl.DateTimeFormat().resolvedOptions().timeZone,s=Intl.DateTimeFormat().resolvedOptions().locale;return new Intl.DateTimeFormat(s,{year:"numeric",month:"2-digit",day:"2-digit",timeZone:t}).format(a)},ht=a=>{const t=new Date(a),s=new Date(t.getTime()-t.getTimezoneOffset()*60*1e3),r=Intl.DateTimeFormat().resolvedOptions().timeZone,l=Intl.DateTimeFormat().resolvedOptions().locale;return new Intl.DateTimeFormat(l,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZone:r}).format(s).replace(/\//g,"-").replace(",","")},ft=a=>{const t=new Date(a),s=new Date().getTimezoneOffset(),r=new Date(t.getTime()-s*6e4),l=new Date;if(r>l||isNaN(r.getTime()))return"0h 0m";const p=l.getTime()-r.getTime(),f=Math.floor(p/6e4);return Xe(f)},pt=a=>{const t=new Date(a),s=new Date().getTimezoneOffset(),r=new Date(t.getTime()-s*6e4),l=new Date;return r>l||isNaN(r.getTime())?0:l.getTime()-r.getTime()},Xe=a=>{const t=Math.floor(a/1440),s=Math.floor(a%(60*24)/60),r=a%60,l=[];return t>0&&l.push(`${t}d`),l.push(`${s}h`),l.push(`${r}m`),l.join(" ")};function gt(a){if(!a||!a.includes("_"))return"";const[t,s]=a.split("_");if(!s||isNaN(Date.parse(s)))return"";const r=new Date(s+" UTC"),l=new Date(r),p=new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).format(l),f=new Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(l);return`${t}_${p}_${f}`}function xt(a){if(!a||!a.includes("_"))return"";const[t,s]=a.split("_");return t}function bt(a){if(!a)return"";try{const t=Ce(a),s=Intl.DateTimeFormat().resolvedOptions().timeZone,r=Intl.DateTimeFormat().resolvedOptions().locale;return new Intl.DateTimeFormat(r,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZone:s}).format(t).replace(/\//g,"-").replace(",","")}catch(t){return console.error("Error parsing date:",a,t),""}}function wt(a){if(!a)return"";try{const[t,s,r]=a.split("-"),l=new Date(Number(t),Number(s)-1,Number(r)),p=Intl.DateTimeFormat().resolvedOptions().timeZone,f=Intl.DateTimeFormat().resolvedOptions().locale;return new Intl.DateTimeFormat(f,{year:"numeric",month:"2-digit",day:"2-digit",timeZone:p}).format(l).replace(/\//g,"-").replace(",","")}catch(t){return console.error("Error formatting birth date:",a,t),""}}const yt=(a,t)=>{const s=encodeURIComponent(t),r=`data:text/csv;charset=utf-8,${encodeURIComponent(a)}`,l=document.createElement("a");l.setAttribute("href",r),l.setAttribute("download",`${s}`),document.body.appendChild(l),l.click(),document.body.removeChild(l)},Je=({onDateChange:a})=>{const[t,s]=u.useState({start:null,end:null}),[r,l]=u.useState({start:null,end:null}),[p,f]=u.useState(new Date),[N,D]=u.useState(!1),[y,E]=u.useState("custom"),A=[{label:"Today",id:"today"},{label:"Yesterday",id:"yesterday"},{label:"Last 7 days",id:"7days"},{label:"Last 30 days",id:"30days"},{label:"This Month",id:"thisMonth"},{label:"Last Month",id:"lastMonth"},{label:"Custom Range",id:"custom"}],F=o=>{let d=null,w=null;const M=B(new Date),G=se(M,1),$=re(M,1);switch(o){case"today":d=B(M),w=Z(M);break;case"yesterday":d=B($),w=Z($);break;case"7days":d=B(re(M,7)),w=Z($);break;case"30days":d=B(re(M,30)),w=Z($);break;case"thisMonth":d=K(M),w=ne(M);break;case"lastMonth":d=K(G),w=ne(G);break;case"custom":d=t.start,w=t.end;break}s({start:d,end:w}),E(o)},k=(o,d)=>{f(w=>{const M=d==="first"?o==="next"?ae(w,1):se(w,1):o==="next"?ae(w,2):se(w,2);return K(M)})},I=o=>{const d=Se(K(o)),w=Te(ne(o));return Me({start:d,end:w})},V=K(p),S=ae(V,1),m=I(V),x=I(S),b=o=>{E("custom");const d=B(o);t.start?t.end?s({start:d,end:null}):s(w=>({...w,end:d})):s({start:d,end:null})},v=()=>{D(!1),s({start:null,end:null}),l({start:null,end:null}),a({start:null,end:null}),E(null)},c=()=>{D(!1),l(t),a(t)},n=o=>{const d=new Date;d.setDate(d.getDate()-1),d.setHours(0,0,0,0);const w=new Date(o);return w.setHours(0,0,0,0),d.getTime()===w.getTime()},h=(o,d)=>{const w=new Date(o.setHours(0,0,0,0)),M=new Date(d.setHours(0,0,0,0));return w.getTime()===M.getTime()},g=o=>he(o)&&y==="today"&&!t.start?"selected-today":he(o)?"today":n(o)&&y==="yesterday"&&!t.start?"yesterday":"",L=o=>{if(t.start&&!t.end&&h(o,t.start))return"selected-start-style";if(t.start&&t.end){const d=t.start&&t.end&&oe(o,{start:t.start,end:t.end})?h(o,t.start)?"selected-start-style":h(o,t.end)?"selected-end-style":"light-bg":"",w=t.start&&t.end&&oe(o,{start:t.start,end:t.end})?h(o,t.start)?"selected-end-style":h(o,t.end)?"selected-start-style":"light-bg":"",M=t.start&&t.end&&oe(o,{start:t.start,end:t.end})?h(o,t.start)?"rounded-lg bg-[#304CB2] text-white":"light-bg":"";return t.start<t.end?d:t.start>t.end?w:M}};return i("div",{className:"relative",children:[e(ge,{sx:{m:1},variant:"outlined",children:e(J,{variant:"outlined",startIcon:e(Ne,{}),endIcon:e(ke,{}),onClick:()=>D(!N),disableRipple:!0,sx:{height:"45px",textTransform:"none",color:"rgba(0, 0, 0, 0.6)",border:"1px solid #DEE2E6","&:hover":{border:"1px solid #DEE2E6",backgroundColor:"#ffffff"}},children:r.start&&r.end&&r.start<r.end?`${H(r.start)} To ${H(r.end)}`:r.start&&r.end?`${H(r.end)} To ${H(r.start)}`:"FromDate To ToDate"})}),e("div",{className:`absolute right-0 z-10 ${N?"":"hidden"} w-max`,children:i("div",{className:"flex rounded-xl bg-white shadow-lg",children:[e("div",{className:"border-r border-gray-100 py-6",children:e("ul",{className:"flex flex-col text-xs",children:A.map(o=>e("li",{children:e("button",{className:`w-full px-6 py-1.5 text-left leading-5 hover:bg-gray-50 hover:text-blue-600 ${t.start&&o.id===y?"text-blue-600":""}`,onClick:()=>F(o.id),children:o.label})},o.id))})}),i("div",{className:"flex flex-col",children:[i("div",{className:"flex divide-x",children:[i("div",{className:"flex w-1/2 flex-col border-b border-gray-100 px-6 pb-6 pt-5",children:[i("div",{className:"flex items-center justify-between",children:[e("button",{className:"flex items-center justify-center rounded-xl p-2 hover:bg-gray-50",onClick:()=>k("prev","first"),children:e("svg",{className:"h-6 w-6 stroke-current text-gray-900",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M13.25 8.75L9.75 12l3.5 3.25",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e("div",{className:"text-sm font-semibold",children:Q(V,"MMMM yyyy")}),e("button",{className:"flex items-center justify-center rounded-xl p-2 hover:bg-gray-50",onClick:()=>k("next","first"),children:e("svg",{className:"h-6 w-6 stroke-current text-gray-900",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M10.75 8.75l3.5 3.25-3.5 3.25",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),i("div",{className:"grid grid-cols-7 text-center text-xs text-gray-900",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(o=>e("span",{className:"flex h-10 w-10 items-center justify-center rounded-lg font-semibold",children:o},o)),m.map(o=>e("span",{role:"button",tabIndex:0,className:`flex h-10 w-10 items-center justify-center ${g(o)} ${me(o,V)?"text-gray-700":"text-gray-300"} ${L(o)}`,onClick:()=>b(o),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),b(o))},children:Q(o,"d")},o.toString()))]})]}),i("div",{className:"flex w-1/2 flex-col border-b border-gray-100 px-6 pb-6 pt-5",children:[i("div",{className:"flex items-center justify-between",children:[e("button",{className:"flex items-center justify-center rounded-xl p-2 hover:bg-gray-50",onClick:()=>k("prev","second"),children:e("svg",{className:"h-6 w-6 stroke-current text-gray-900",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M13.25 8.75L9.75 12l3.5 3.25",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e("div",{className:"text-sm font-semibold",children:Q(S,"MMMM yyyy")}),e("button",{className:"flex items-center justify-center rounded-xl p-2 hover:bg-gray-50",onClick:()=>k("next","second"),children:e("svg",{className:"h-6 w-6 stroke-current text-gray-900",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M10.75 8.75l3.5 3.25-3.5 3.25",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),i("div",{className:"grid grid-cols-7 text-center text-xs text-gray-900",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(o=>e("span",{className:"flex h-10 w-10 items-center justify-center rounded-lg font-semibold",children:o},o)),x.map(o=>e("span",{role:"button",tabIndex:0,className:`flex h-10 w-10 items-center justify-center ${g(o)} ${me(o,S)?"text-gray-700":"text-gray-300"} ${L(o)}`,onClick:()=>b(o),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),b(o))},children:Q(o,"d")},o.toString()))]})]})]}),t.start&&t.end&&i("div",{className:"flex items-center justify-between px-6 py-4",children:[i("div",{className:"flex items-center",children:[e("input",{type:"text",className:"flex w-32 items-center rounded-lg bg-gray-50 px-4 py-2 text-sm text-gray-900 focus:bg-white focus:outline-none focus:ring-1 focus:ring-blue-600",placeholder:"Start Date",value:H(t.start),readOnly:!0}),e("div",{className:"p-1",children:e("svg",{className:"h-6 w-6 stroke-current text-gray-900",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M6.738 12.012h10.5m-4.476 4.25l4.5-4.25-4.5-4.25",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e("input",{type:"text",className:"ml-2 flex w-32 items-center rounded-lg bg-gray-50 px-4 py-2 text-sm text-gray-900 focus:bg-white focus:outline-none focus:ring-1 focus:ring-blue-600",placeholder:"End Date",value:H(t.end),readOnly:!0})]}),i("div",{className:"flex justify-end",children:[e(J,{variant:"outlined",onClick:v,sx:{marginRight:2},children:"Cancel"}),e(J,{variant:"contained",onClick:c,disabled:!t.start||!t.end,children:"Apply"})]})]})]})]})})]})},et=({searchQuery:a,setSearchQuery:t,onSearchClick:s})=>e(ge,{sx:{m:1},variant:"outlined",children:e(Ae,{id:"search",type:"text",placeholder:"Search here...",value:a,onChange:l=>t(l.target.value.slice(0,100)),onKeyDown:l=>{l.key==="Enter"&&s()},className:"min-w-[200px] md:w-[320px]",endAdornment:e(Ee,{position:"end",children:e(Fe,{"aria-label":"search",edge:"end",onClick:s,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&s()},disableRipple:!0,sx:{"&:hover":{backgroundColor:"#ffffff"}},children:e(xe,{})})}),sx:Qe})}),tt=({heading:a})=>e(ce,{variant:"h6",component:"h6",sx:{color:"#484950",fontWeight:600,fontSize:"20px"},children:a}),at=({handlePatientSearch:a,setPatientRows:t})=>{const[s,r]=u.useState([{id:Date.now(),selectValue:"",inputValue:"",dateValue:null}]),[l,p]=u.useState([...s]),[f,N]=u.useState(!1),[D,y]=u.useState(""),E=c=>{const n=s.filter(g=>g.id!==c).map(g=>g.selectValue).filter(g=>g);return[{value:"name",label:"Name"},{value:"gender",label:"Gender"},{value:"birthdate",label:"Birth Date"},{value:"_id",label:"ID"},{value:"identifier",label:"Medical Record Number"},{value:"address",label:"Address"},{value:"address-city",label:"City"},{value:"address-state",label:"State"},{value:"address-postalcode",label:"Zip Code"},{value:"email",label:"Email"},{value:"telecom",label:"Phone number"}].filter(g=>!n.includes(g.value))},A=c=>{const{selectValue:n,inputValue:h,dateValue:g}=c,o={name:"Name",gender:"Gender",birthdate:"Birth Date",_id:"ID",identifier:"Medical Record Number",address:"Address","address-city":"City","address-state":"State","address-postalcode":"Zip Code",email:"Email",telecom:"Phone Number"}[n]||n;if(!n)return"Select a column for search.";if(!h.trim()&&n!=="birthdate"&&n!=="gender")return`Please enter a value for ${o}.`;if(n==="email"){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h))return"Invalid Email format."}else if(n==="_id"||n==="address-postalcode"){if(h.trim().length<3)return n==="address-postalcode"?"Zip Code must have at least 3 characters.":"ID must have at least 3 characters.";if(n==="address-postalcode"&&h.length!==5)return"Please provide a valid Zip Code for search."}return n==="gender"&&!h?"Please select a gender for search.":n==="birthdate"&&!g?"Please select a date for search.":n==="address-state"&&h.trim().length<2?"State must have at least 2 characters.":(n==="name"||n==="address"||n==="address-city")&&h.trim().length<3?`${o} must have at least 3 characters.`:null},F=()=>{if(s.length>1&&s.some(h=>!h.selectValue)){y("Select all criteria for search.");return}if(s.length===1&&!s[0].selectValue){y("Select a criteria for search.");return}for(const n of s){const h=A(n);if(h){y(h);return}}const c=s.map(n=>{const h=n.inputValue.trim();if(n.selectValue==="birthdate"&&n.dateValue){const g=n.dateValue.toLocaleDateString("en-CA");return`${n.selectValue}=${g}`}return`${n.selectValue}=${encodeURIComponent(h)}`}).join("&");c&&(a(`Patient?${c}`),p(s.map(n=>({...n,inputValue:n.inputValue.trim()}))),N(!1),y(""))},k=c=>{c.stopPropagation(),N(n=>!n),f||r([...l])},I=()=>{r([...s,{id:Date.now(),selectValue:"",inputValue:"",dateValue:null}]),y("")},V=c=>{s.length!==1&&(r(s.filter(n=>n.id!==c)),y(""))},S=(c,n)=>{r(s.map(h=>h.id===c?{...h,selectValue:n,inputValue:"",dateValue:null}:h)),y("")},m=(c,n)=>{r(h=>h.map(g=>g.id===c?{...g,inputValue:g.selectValue==="_id"?n.replace(/[^0-9]/g,""):g.selectValue==="address-postalcode"?n.replace(/[^0-9]/g,"").slice(0,6):g.selectValue==="telecom"?n:g.selectValue==="email"?n.replace(/\s/g,""):n.replace(/\s+/g," ")}:g)),y("")},x=(c,n)=>{r(s.map(h=>h.id===c?{...h,dateValue:n}:h)),y("")},b=()=>{const c=[{id:Date.now(),selectValue:"",inputValue:"",dateValue:null}];r(c),p(c),t&&t([]),y("")},v=s.some(c=>c.inputValue.trim()||c.selectValue);return i("div",{className:"relative",children:[i("button",{className:"rounded-md bg-blue-800 py-2 pl-3 pr-4 text-sm text-white",onClick:k,children:[e(xe,{sx:{marginLeft:0,marginRight:"5px"}}),"Search"]}),f&&i("div",{className:"absolute right-0 z-50 mt-2 block max-w-min rounded-md border bg-white p-4 shadow-lg",children:[s.map(c=>i("div",{className:"mb-2 flex items-center space-x-3",children:[s.length>1&&e("button",{className:"px-1 text-[#6b7280]",onClick:()=>V(c.id),children:"âœ–"}),i("select",{value:c.selectValue,onChange:n=>S(c.id,n.target.value),className:"w-[200px] rounded-md border px-2 py-1",children:[e("option",{value:"",children:"Select column"}),E(c.id).map(n=>e("option",{value:n.value,children:n.label},n.value))]}),c.selectValue==="gender"?i("select",{value:c.inputValue,onChange:n=>m(c.id,n.target.value),className:"w-[300px] flex-grow rounded-md border px-2 py-1",children:[e("option",{value:"",children:"Select gender"}),e("option",{value:"male",children:"Male"}),e("option",{value:"female",children:"Female"})]}):c.selectValue==="birthdate"?e(Pe,{onChange:n=>x(c.id,n),value:c.dateValue,className:"react-calendar"}):e("input",{type:"text",value:c.inputValue,onChange:n=>m(c.id,n.target.value),maxLength:100,className:"w-[300px] flex-grow rounded-md border px-2 py-1",placeholder:"Search here",disabled:!c.selectValue})]},c.id)),e("div",{className:"flex justify-end",children:e("button",{className:"w-[512px] rounded-md border border-dashed border-[#304CB2] px-2 py-1 text-[#304CB2]",onClick:I,children:e(Ie,{})})}),D&&e("div",{className:"mt-2 text-xs text-red-500",children:D}),i("div",{className:"flex items-center justify-end gap-3",children:[e("button",{className:`mt-4 rounded-lg border px-5 py-2 text-xs font-semibold ${v?"text-white-500 border-gray-400 bg-gray-200":"border-gray-400 bg-gray-200 text-gray-500"}`,onClick:b,children:v?"Clear All":"Clear"}),e("button",{className:"mt-4 rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white",onClick:F,children:"Search"})]})]})]})},vt=({heading:a,rows:t,columns:s,totalCount:r,showSearch:l,showDatePicker:p,buttonText:f,buttonLink:N,handleButtonClick:D,buttonShow:y,setSkip:E,setPageSize:A,pageSize:F,nav:k,navReports:I,setStartDate:V,setEndDate:S,setSkipTrigger:m,hideFooter:x,isLoading:b,showPatientSearch:v,handlePatientSearch:c,setPatientRows:n,columnsToHide:h})=>{const[g,L]=u.useState(""),[o,d]=u.useState(t),[w,M]=u.useState(0),[G,$]=u.useState(r),Y=C=>C.reduce((R,z)=>(R[z]=!1,R),{}),[ee,q]=u.useState(()=>h?Y(h):{}),_={1:"Forward Successful",2:"Forward Queued",3:"Forward Failed",4:"Transformation Successful",5:"Transformation Queued",6:"Transformation Failed",7:"No Action Found"},te=()=>{const C=g.toLowerCase(),R=t.filter(z=>Object.entries(z).some(([X,W])=>typeof W=="boolean"&&X==="status"?(W?"inactive":"active")===C.trim():(typeof W=="number"||W===null)&&X==="status"?(W!==null?_[W]:"No Action Found")===C.trim():String(W).toLowerCase().includes(C.trim())));d(R),$(R==null?void 0:R.length)},P=C=>{let R=null,z=null;C.start&&C.end&&(C.start>C.end?(R=B(C.end),z=Z(C.start)):(R=B(C.start),z=Z(C.end)));const X=R?R.toLocaleDateString("en-CA"):"",W=z?z.toLocaleDateString("en-CA"):"";V(X),S(W)},T=C=>{M(C.page),A(C.pageSize),E(C.page*C.pageSize),C.page===0&&m(new Date().getTime())},ue=u.useCallback(()=>{d(t),$(r||(t==null?void 0:t.length))},[d,t,r]);return u.useEffect(()=>{g.trim()||ue()},[g,ue]),i("div",{style:{borderRadius:"7px",backgroundColor:"#ffffff",marginBottom:"70px"},className:"",children:[k,I,i(U,{sx:Ye,children:[i("div",{className:"mb-3 mt-3 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e(tt,{heading:a}),i("div",{className:"flex flex-col items-center sm:flex-row",children:[v&&e(at,{handlePatientSearch:c||(()=>{}),setPatientRows:n}),l&&e(et,{searchQuery:g,setSearchQuery:L,onSearchClick:te}),p&&e(Je,{onDateChange:P}),y&&e(Ve,{to:N,className:"block",onClick:D,children:e("button",{className:"ml-1 rounded-md bg-blue-800 px-5 py-3 text-sm text-white",children:f})})]})]}),e("div",{style:{display:"flex",flexDirection:"column"},children:e(Oe,{getRowSpacing:()=>({top:5,bottom:5}),rows:o,rowCount:G===0?0:G||r,columns:s,getRowClassName:C=>C.indexRelativeToCurrentPage%2===0?"Mui-odd-row":"Mui-even-row",pagination:!0,paginationMode:"server",paginationModel:{page:w,pageSize:F},onPaginationModelChange:T,pageSizeOptions:[5,10,20,30,50,100],localeText:{noRowsLabel:n?"Please search patient(s) using the Search button":"No data"},sx:qe,disableVirtualization:!0,hideFooter:x,loading:b,getRowHeight:()=>"auto",columnVisibilityModel:ee,onColumnVisibilityModelChange:C=>q(C)})})]})]})},Dt=({truncatedString:a,fullString:t})=>e(Re,{title:t,arrow:!0,slotProps:{tooltip:{sx:{padding:"8px",lineHeight:"1rem",maxWidth:"300px",fontFamily:'"Inter", sans-serif !important',fontWeight:"200 !important",color:"#fff !important",backgroundColor:"#1f1f1f",fontSize:"13px",borderRadius:"0px",wordWrap:"break-word",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.2)"}},arrow:{sx:{display:"none"}}},children:e("div",{style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:a})}),Ct=a=>i(U,{sx:{display:"flex",alignItems:"center",justifyItems:"center"},children:[e(U,{sx:{width:"100%",mr:1,ml:3},children:e($e,{variant:"determinate",sx:{height:10,borderRadius:8,backgroundColor:"#e0e0e7","& .css-5xe99f-MuiLinearProgress-bar1":{backgroundColor:"#3d5ac4",borderRadius:8}},...a})}),e(U,{sx:{minWidth:35},children:e(ce,{variant:"body2",color:"text.secondary",sx:{fontWeight:600},children:`${Math.round(a.value)}%`})})]}),Nt=({button:a,index:t})=>{const s=de(),r=Le(),[l,p]=u.useState(null),f=u.useRef([]),N=r.pathname.includes(a.path);return e("div",{className:"flex-grow-1 mb-[6px] flex flex-col items-start",children:i("button",{ref:D=>f.current[t]=D,onClick:a.isDisabled?void 0:()=>s(a.path),className:`${a.hidden?"hidden":"flex"} items-center mr-4 pb-4 pl-3 pr-[16px] pt-2 font-medium ${N&&!a.isDisabled?"border-b-2 border-b-[#304CB2] text-[#304CB2]":"text-[#455571]"} ${a.isDisabled?"cursor-not-allowed":""}`,onMouseEnter:a.isDisabled?void 0:()=>p(a.label),onMouseLeave:()=>p(null),children:[e("img",{src:(N||l===a.label)&&!a.isDisabled?a.imgActive:a.imgInactive,alt:a.label,className:"mr-2 h-5 w-5"}),e("span",{className:`whitespace-nowrap ${(N||l===a.label)&&!a.isDisabled?"text-[#304CB2]":"text-[#455571]"}`,children:a.label})]})},a.label)},kt=a=>{const{item:t,applyValue:s,focusElementRef:r}=a,l=p=>{s({...t,value:p.target.value})};return e(U,{sx:{display:"inline-flex",flexDirection:"row",alignItems:"center",height:48,pl:"10px","& .MuiTextField-root":{width:150}},children:i(be,{select:!0,label:"Status",value:t.value||"",onChange:l,ref:r,variant:"standard",children:[e(j,{value:"active",children:"Active"}),e(j,{value:"inactive",children:"Inactive"})]})})};We(a=>e(je,{...a}))(({theme:a})=>({width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(22px)","& .MuiSwitch-thumb:before":{backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M4.2 2.5l-.7 1.8-1.8.7 1.8.7.7 1.8.6-1.8L6.7 5l-1.9-.7-.6-1.8zm15 8.3a6.7 6.7 0 11-6.6-6.6 5.8 5.8 0 006.6 6.6z"/></svg>')`},"& + .MuiSwitch-track":{opacity:1,backgroundColor:a.palette.mode==="dark"?"#8796A5":"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:a.palette.mode==="dark"?"#003892":"#001e3c",width:32,height:32,"&:before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 20 20"><path fill="${encodeURIComponent("#fff")}" d="M9.305 1.667V3.75h1.389V1.667h-1.39zm-4.707 1.95l-.982.982L5.09 6.072l.982-.982-1.473-1.473zm10.802 0L13.927 5.09l.982.982 1.473-1.473-.982-.982zM10 5.139a4.872 4.872 0 00-4.862 4.86A4.872 4.872 0 0010 14.862 4.872 4.872 0 0014.86 10 4.872 4.872 0 0010 5.139zm0 1.389A3.462 3.462 0 0113.471 10a3.462 3.462 0 01-3.473 3.472A3.462 3.462 0 016.527 10 3.462 3.462 0 0110 6.528zM1.665 9.305v1.39h2.083v-1.39H1.666zm14.583 0v1.39h2.084v-1.39h-2.084zM5.09 13.928L3.616 15.4l.982.982 1.473-1.473-.982-.982zm9.82 0l-.982.982 1.473 1.473.982-.982-1.473-1.473zM9.305 16.25v2.083h1.389V16.25h-1.39z"/></svg>')`}},"& .MuiSwitch-track":{opacity:1,backgroundColor:a.palette.mode==="dark"?"#8796A5":"#aab4be",borderRadius:20/2}}));const St=({position:a="top-center",reverseOrder:t=!1})=>e(ze,{position:a,reverseOrder:t}),st=({inputRef:a,label:t,type:s,inputName:r,placeholder:l,autoComplete:p,errorMsg:f,inputValue:N,handleOnChange:D})=>{const[y,E]=u.useState(!1),A=()=>{E(!y)};return i("div",{className:`${s==="password"?"":"mb-5 mt-2"} `,children:[e("label",{className:"text-xs text-gray-400",children:t}),i("div",{className:"relative mt-2",children:[e("input",{ref:a,type:y&&s==="password"?"text":s,name:r,placeholder:l,value:N,maxLength:100,className:"focus:shadow-outline-blue h-11 w-full rounded-xl border border-gray-300 px-4 py-2 pr-10 text-sm focus:shadow-sm focus:outline-[2px] focus:outline-blue-300",autoComplete:p,onChange:D}),s==="password"&&e("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 transform cursor-pointer",onClick:A,onKeyDown:k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),A())},role:"button","aria-label":"Toggle password visibility",tabIndex:-1,children:y?e(le,{className:"text-[#A4A4AA] opacity-80"}):e(ie,{className:"text-[#A4A4AA] opacity-80"})})]}),f&&e("p",{className:"mt-1 text-xs text-red-500",children:f})]})},Tt=a=>{const{item:t,applyValue:s,focusElementRef:r}=a,l=p=>{s({...t,value:p.target.value})};return e(U,{sx:{display:"inline-flex",flexDirection:"row",alignItems:"center",height:48,pl:"10px","& .MuiTextField-root":{width:150}},children:i(be,{select:!0,label:"Status",value:t.value||"",onChange:l,ref:r,variant:"standard",children:[e(j,{value:1,children:"Forward Successful"}),e(j,{value:2,children:"Forward Queued"}),e(j,{value:3,children:"Forward Failed"}),e(j,{value:4,children:"Transformation Successful"}),e(j,{value:5,children:"Transformation Queued"}),e(j,{value:6,children:"Transformation Failed"}),e(j,{value:7,children:"No Action Found"})]})})},Mt=({path:a})=>{const t=de();return i("button",{className:"mt-4 flex items-center text-[#304CB2] focus:outline-[2px] focus:outline-blue-300",onClick:()=>t(a),children:[e(Be,{sx:{height:"20px"}}),e("span",{className:"ml-1 text-[14px] font-semibold",children:"Back"})]})},At=({email:a,password:t,setOpenModal:s,isLoggedIn:r})=>{const[l,p]=u.useState(!1),[f,N]=u.useState(""),[D,y]=u.useState(""),[E,A]=u.useState(""),[F,k]=u.useState(""),[I,V]=u.useState(!1),[S,m]=u.useState(!1),[x,b]=u.useState(""),[v,c]=u.useState(!1),[n,h]=u.useState(""),{toast:g}=Ke(),L=Ue(),o=de(),d=u.useRef(null),w=P=>{const T=P.target.value;/^\d*$/.test(T)&&r&&(b(T),c(T.length===6))},M=P=>/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*()\-_+={}[\]|\\:;"'<>,.?/]).{8,20}$/.test(P),G=P=>{const T=P.target.value;N(T)},$=P=>{const T=P.target.value;y(T)},Y=()=>{V(!I)},ee=()=>{m(!S)},q=P=>{(P.key==="Enter"||P.key===" ")&&(P.preventDefault(),Y())};let _=!0;const te=async P=>{if(P.preventDefault(),p(!0),A(""),k(""),h(""),r)try{if(await new Promise(T=>setTimeout(T,1e3)),!/^\d{6}$/.test(x)){h("The confirmation code must be a 6-digit number");return}if(f.length===0&&D.length===0){A("Password fields are required");return}if(!M(f)&&f!==D){A("Weak Password! Your password must be at least 8 characters long and include at least one lowercase letter, one uppercase letter, one digit, and one special character.");return}if(!M(f)){A("Weak Password! Your password must be at least 8 characters long and include at least one lowercase letter, one uppercase letter, one digit, and one special character.");return}if(f!==D){k("Passwords do not match");return}a&&await L.confirmForgotPassword(a,x,f)&&(sessionStorage.clear(),g.success("Your password has been reset successfully. You can now log in with your new password."),await L.signOut())}catch(T){console.error("Error resetting password: ",T),g.error("Verification failed")}finally{p(!1)}else try{await new Promise(T=>setTimeout(T,1e3)),f.length===0&&D.length===0?(k("Password fields are required"),_=!1):M(f)?f!==D&&(k("Passwords do not match"),_=!1):(A("Weak Password! Your password must be at least 8 characters long and include at least one lowercase letter, one uppercase letter, one digit, and one special character."),_=!1)}catch(T){console.error("Error resetting password: ",T),g.error("Verification failed")}finally{try{_&&(await L.forceChangePassword(a,t,f),g.success("Password changed successfully"),s(!1),o(0)),p(!1)}catch(T){console.log(T)}}};return u.useEffect(()=>{d.current&&d.current.focus()},[]),e("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:i("div",{className:"w-full max-w-md rounded-lg bg-white p-8 shadow-lg",children:[i("div",{className:`${r?"flex items-center justify-between":""}`,children:[e("h3",{className:"text-center text-2xl font-bold text-gray-900",children:"Change Password"}),r&&i(J,{onClick:()=>s(!1),color:"primary",className:"p-0",sx:{minWidth:"10px",color:"lightgray"},children:[e(Ge,{})," "]})]}),i("form",{onSubmit:te,children:[r&&i("div",{className:"mb-4 mt-4",children:[e("label",{htmlFor:"code",className:"mb-3 block text-xs text-[#A4A4AA]",children:"Enter Code"}),e("input",{ref:d,type:"text",name:"code",placeholder:"******",value:x,className:"focus:shadow-outline-blue h-11 w-full rounded-lg border border-gray-300 bg-white px-4 py-2 pr-10 text-sm focus:border-opacity-0 focus:shadow-sm focus:outline-[2px] focus:outline-blue-300",autoComplete:"true",maxLength:6,onChange:w}),n&&e("p",{className:"text-xs text-red-500",children:n})]}),i("div",{className:"mb-4 mt-4",children:[e("label",{htmlFor:"new-password",className:"mb-3 block text-xs text-[#A4A4AA]",children:"New Password"}),i("div",{className:"relative",children:[e("input",{ref:d,id:"new-password",type:I?"text":"password",className:"focus:shadow-outline-blue w-full rounded-lg border border-gray-300 p-2 focus:border-opacity-0 focus:shadow-sm focus:outline-[2px] focus:outline-blue-300",value:f,onChange:G}),e("span",{className:"absolute right-3 top-0 flex h-11 cursor-pointer items-center pl-2",onClick:Y,onKeyDown:q,role:"button","aria-label":"Toggle password visibility",tabIndex:-1,children:I?e(le,{className:"text-[#A4A4AA] opacity-80"}):e(ie,{className:"text-[#A4A4AA] opacity-80"})})]}),E&&e("p",{className:"text-xs text-red-500",children:E})]}),i("div",{className:"mb-4",children:[e("label",{htmlFor:"confirm-password",className:"mb-3 block text-xs text-[#A4A4AA]",children:"Confirm New Password"}),i("div",{className:"relative",children:[e("input",{id:"confirm-password",type:S?"text":"password",className:"focus:shadow-outline-blue w-full rounded-lg border border-gray-300 p-2 focus:border-opacity-0 focus:shadow-sm focus:outline-[2px] focus:outline-blue-300",value:D,onChange:$}),e("span",{className:"absolute right-3 top-0 flex h-11 cursor-pointer items-center pl-2",onClick:ee,onKeyDown:q,role:"button","aria-label":"Toggle password visibility",tabIndex:-1,children:S?e(le,{className:"text-[#A4A4AA] opacity-80"}):e(ie,{className:"text-[#A4A4AA] opacity-80"})})]}),F&&e("p",{className:"text-xs text-red-500",children:F})]}),e("div",{className:"mt-6 flex items-center justify-center",children:e("button",{type:"submit",className:`w-full rounded-full border-[2px] bg-blue-800 px-10 focus:outline-[2px] focus:outline-offset-2 focus:outline-blue-300 ${l?"py-2.5 opacity-50":"py-4"} text-xs font-semibold text-white ${r&&v||!r&&!v?"":"cursor-not-allowed opacity-50"}`,disabled:r&&!v||l,children:l?e("div",{children:e(we,{size:24,sx:{color:"white"}})}):"CHANGE PASSWORD"})})]})]})})},Et=({handleOTPVerification:a,handleResendEmail:t,setIsLoading:s,isLoading:r})=>{const[l,p]=u.useState(""),[f,N]=u.useState(!1),[D,y]=u.useState(!1),[E,A]=u.useState(""),F=u.useRef(null),k=S=>{const m=S.target.value;/^\d{0,6}$/.test(m)&&(p(m),N(m.length===6))},I=async()=>{if(y(!1),!!f){s(!0);try{await new Promise(S=>setTimeout(S,1e3)),a(l),p("")}catch(S){S instanceof Error&&A(S.message),console.log("Verification failed"),fe.error("Verification failed")}}},V=()=>{y(!0)};return u.useEffect(()=>{F.current&&F.current.focus()},[]),i("div",{children:[e("h5",{className:"text-1xl mt-6 text-center font-semibold text-gray-900",children:"A code has been mailed to you."}),e("div",{className:"mb-5 mt-8",children:e(st,{inputRef:F,type:"text",inputName:"code",placeholder:"******",label:"Enter Code",inputValue:l,handleOnChange:k,errorMsg:E})}),e("div",{className:"mt-2.5 flex items-center justify-center",children:e("button",{className:`rounded-full border-0 bg-blue-800 px-10 ${r?"py-2.5":"py-4"} text-xs font-semibold text-white ${f?"":"cursor-not-allowed opacity-50"}`,onClick:I,disabled:!f||r||l==="",children:r?e("div",{className:"px-[24.5px]",children:e(we,{size:24,sx:{color:"white"}})}):"VERIFY OTP"})}),e("div",{className:"mt-6 flex items-center justify-center",children:e("button",{className:"text-xs font-normal text-gray-400 underline",onClick:()=>{t(),V()},children:"Resend OTP?"})}),D&&i("div",{className:"mt-6",children:[e("h6",{className:"text-sm font-bold text-gray-900",children:"Troubleshooting tips:"}),i("div",{className:"mt-4 flex items-center gap-2",children:[e("div",{className:"flex h-5 w-5 items-center justify-center rounded-full border border-indigo-400 text-xs font-bold text-indigo-600",children:"1"}),e("h6",{className:"text-xs text-gray-400",children:"Confirm you entered the correct email address."})]}),i("div",{className:"mt-2.5 flex items-center gap-2",children:[e("div",{className:"flex h-5 w-5 items-center justify-center rounded-full border border-indigo-400 text-xs font-bold text-indigo-600",children:"2"}),e("h6",{className:"text-xs text-gray-400",children:"Check your spam folder."})]})]})]})},Ft=({heading:a})=>i(U,{sx:{borderBottom:"2px solid #E0E0E0",paddingBottom:"8px",marginBottom:"16px"},children:[e(ce,{variant:"h6",component:"h6",sx:{color:"#484950",fontWeight:600,fontSize:"20px"},children:a})," "]});export{kt as A,Mt as B,Dt as C,Tt as D,yt as E,st as I,Ct as L,Et as O,ot as P,it as S,vt as T,lt as a,Ue as b,Nt as c,gt as d,ht as e,mt as f,At as g,wt as h,bt as i,pt as j,ft as k,tt as l,Ft as m,ct as n,dt as o,St as p,xt as r,ut as t,Ke as u};
