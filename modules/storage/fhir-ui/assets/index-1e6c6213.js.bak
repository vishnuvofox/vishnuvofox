import{r,Y as or,Z as ir,j as e,_ as lr,d as o,$ as cr,a0 as dr,a1 as ur,a2 as Ot,A as As,a3 as ye,a4 as mr,a5 as fr,a6 as gr,a7 as pr,a8 as hr,X as Ve,F as Ps,a9 as Is,M as qe,aa as Te,a as oe,H as ht,V as ke,ab as br,ac as tt,ad as Mt,ae as Tt,af as is,ag as ls,C as cs,ah as ds,f as St,J as Pt,ai as qt,W as It,w as pt,aj as zt,ak as Wt,D as xr,al as yr,am as Ls,Q as Yt,R as Jt,an as Us,ao as es,ap as At,T as ot,aq as us,ar as vr,as as wr,at as Nr,au as Sr,av as Xt,aw as ms,z as Ze,ax as Zt,ay as Cr,az as kr,aA as Nt,aB as at,aC as Er,aD as Fr,aE as Dr,aF as Rr,aG as Tr,aH as fs,K as Ar,aI as gs,B as Pr,aJ as Ir,L as Ct,aK as Lr,aL as Ur,aM as ts,aN as Br,aO as $r,aP as Mr,aQ as Or,aR as qr,aS as zr,aT as Wr,aU as _r,aV as jr,aW as Gr,aX as Kr,aY as Hr,aZ as Qr}from"./vendor-ac6fcfdf.js";import{u as _t,a as ps,S as Ue,L as Bs,b as Ke,c as $s,A as Yr,T as Me,C as Re,d as ss,e as $e,f as Bt,E as Lt,r as Jr,D as Xr,B as Ms,O as Os,g as qs,h as Zr,i as Vr,j as hs,k as zs,l as en,I as Rt,t as tn,m as sn,n as bs,o as rn,p as nn,P as an}from"./components-fee8c5d0.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const f of a)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const f={};return a.integrity&&(f.integrity=a.integrity),a.referrerPolicy&&(f.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?f.credentials="include":a.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(a){if(a.ep)return;a.ep=!0;const f=n(a);fetch(a.href,f)}})();const on={Auth:{region:"us-east-1",userPoolId:"us-east-1_vOzWbyWR5",userPoolWebClientId:"6hmmqrrbl52bn1dc1ad1lse8d5"}},ln=({children:t})=>{const{toast:s}=_t(),[n]=r.useState(()=>new or({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}},queryCache:new ir}));return r.useEffect(()=>{const c=n.getQueryCache().subscribe(a=>{var f;if(a.type==="updated"){const m=a.query.state.error;if(m){if(((f=m.response)==null?void 0:f.status)===403)return;s.error(`Something went wrong: ${m}`)}}});return()=>c()},[n,s]),e(lr,{client:n,children:t})},Ws=r.createContext(void 0),cn=({children:t})=>{const[s,n]=r.useState(sessionStorage.getItem("tenantName")),c=()=>{n("")};return e(Ws.Provider,{value:{selectedTenantName:s,setSelectedTenantName:n,clearSelectedTenantName:c},children:t})},_s=()=>{const t=r.useContext(Ws);if(!t)throw new Error("useStorageContext must be used within an AssignmentProvider");return t},dn=({children:t})=>{const s=ps(f=>f.theme),n=ps(f=>f.setTheme),c=r.useCallback((f=!1)=>{n({theme:f?"dark":"light"})},[n]),a=r.useCallback(f=>{c(f.matches)},[c]);return r.useEffect(()=>{const f=window.document.documentElement;f.classList.remove("light","dark"),c(s==="dark"),localStorage.getItem("theme")||window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a),f.classList.add(s)},[a,c,s]),o(ur,{theme:cr(),children:[" ",e(dr,{}),t]})},un="modulepreload",mn=function(t){return"/"+t},xs={},fn=function(s,n,c){if(!n||n.length===0)return s();const a=document.getElementsByTagName("link");return Promise.all(n.map(f=>{if(f=mn(f),f in xs)return;xs[f]=!0;const h=f.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(!!c)for(let g=a.length-1;g>=0;g--){const E=a[g];if(E.href===f&&(!h||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${m}`))return;const b=document.createElement("link");if(b.rel=h?"stylesheet":un,h||(b.as="script",b.crossOrigin=""),b.href=f,document.head.appendChild(b),h)return new Promise((g,E)=>{b.addEventListener("load",g),b.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})})).then(()=>s()).catch(f=>{const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f})},rs="/login",gn="/register",pn="/subscription",js="/dashboard",hn="/resetpassword",bn="/verifyemailandresetpwd",xn="/dataupload",yn="/datatransformation",vn="/dataforwarding",wn="/datapolling",Nn="/dataconfigurations",Sn="/datareports",Cn="/uploadfile",kn="/patientdata",En="/globalblocklytemplates",Fn="/pendingdata",Dn="/usermanagement",Rn="/blocklydefinition",Tn="/configdataforwarding",An="/configdatapolling",Pn="/adduserdataforwarding",In="/getuserdatapolling",Ln="/subscriptionconfiguration",Un="/configsettings",Bn="/userlist",$n="/activitylog",Mn="/reportsdatatransformed",On="/reportsdatauploaded",qn="/reportsdataforwarded",se=Ot.create({baseURL:"https://s87naewp7e.execute-api.us-east-1.amazonaws.com/Prod/"});se.interceptors.request.use(async function(t){try{const n=(await As.currentSession()).getIdToken().getJwtToken();n&&(t.headers.Authorization="Bearer "+n,localStorage.setItem("jwtToken",n))}catch(s){console.error("Error retrieving ID token:",s)}return t},function(t){return Promise.reject(t)});se.interceptors.response.use(function(t){return t.data},function(t){var s;return((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),window.location.replace(rs)),Promise.reject(t)});const zn="api/Dashboard/GetDashboardDetails",Wn={getDetails:t=>se.get(zn,{params:{tenantName:t}})},ns=t=>ye({queryKey:["dashboardData"],queryFn:()=>Wn.getDetails(t)}),_n="/api/Admin/GetTenantNames",jn={getDetails:()=>se.get(_n)},Gn=t=>ye({queryKey:["reportExportTenantNames",t],queryFn:()=>jn.getDetails(),enabled:t===3});mr.register(fr,gr,pr);const Kn={labels:["Used","Remaining Data"],datasets:[{data:[20,5],backgroundColor:["#304CB2","#FBC07C"],borderWidth:0,rotation:150,spacing:3,borderRadius:7}]},Hn={cutout:"70%",plugins:{legend:{display:!1},tooltip:{enabled:!1}}},Qn=()=>o("div",{className:"flex flex-wrap items-center justify-around",children:[e("div",{className:"mr-4 mt-10 w-52 md:mr-6",children:e(hr,{data:Kn,options:Hn})}),o("div",{className:"mt-10 flex flex-wrap justify-start",children:[o("div",{className:"flex flex-col p-2",children:[o("div",{className:"flex flex-row",children:[e("div",{className:"mr-3 mt-1.5 h-2.5 w-2.5 rounded-full bg-[#304CB2]"}),e("span",{className:"w-max text-[#8392AB]",children:"Used"})]}),e("strong",{className:"ml-6 w-max",children:"20 GB"})]}),e("div",{className:"mx-11 hidden h-12 w-px bg-[#8392AB] sm:block lg:hidden xl:block"}),e("div",{className:"flex flex-row",children:o("div",{className:"flex flex-col p-2",children:[o("div",{className:"flex flex-row",children:[e("div",{className:"mr-3 mt-1.5 h-2.5 w-2.5 rounded-full bg-[#FBC07C]"}),e("span",{className:"w-max text-[#8392AB]",children:"Remaining Data"})]}),e("strong",{className:"ml-6 w-max",children:"5 GB"})]})})]})]}),Yn=()=>o("div",{className:"rounded-xl bg-white p-6",children:[e("h5",{className:"text-lg font-semibold text-gray-900",children:"Current Plan"}),o("div",{className:"relative mt-5 flex flex-wrap items-center justify-between rounded-lg border border-green-500 bg-green-50 p-5",children:[e("div",{className:"w-44 text-right",children:e("h5",{className:"text-xl font-semibold text-green-500",children:"$100"})}),o("div",{className:"mt-3 flex flex-wrap items-center gap-4 sm:mt-0",children:[e("p",{className:"ml-[130px] text-sm xl:ml-0",children:"Expires on 29 Jun 2024"}),e("button",{className:"ml-[130px] rounded-md bg-green-500 px-5 py-2 text-xs text-white sm:ml-0",children:"Recharge"})]}),e("div",{className:"absolute -left-2.5",children:e("img",{className:"mt-4 w-[140px]",src:"assets\\imgs\\current-plan.svg",alt:""})})]}),e(Qn,{})]}),$t=({bgColor:t,title:s,value:n,imgSrc:c,alt:a})=>o("div",{className:`${t} flex items-center justify-between rounded-lg p-6`,children:[o("div",{children:[e("p",{className:"text-sm font-medium text-[#7d8ba4]",children:s}),e("h6",{className:"text-md mt-1 font-bold text-gray-900",children:n})]}),e("img",{className:"w-10",src:c,alt:a})]}),Jn=({dashboardDetails:t})=>o("div",{className:"mt-8 grid gap-6 rounded-xl bg-white p-6 md:grid-cols-2",children:[e($t,{bgColor:"bg-blue-50",title:"Total Number of Users",value:t==null?void 0:t.numofUsers,imgSrc:"assets/imgs/dashboard-user-icon.svg",alt:"Dashboard User Icon"}),e($t,{bgColor:"bg-gray-100",title:"Files Forwarded",value:t==null?void 0:t.forwarded,imgSrc:"assets/imgs/dashboard-file-forward-icon.svg",alt:"Dashboard File Forward Icon"}),e($t,{bgColor:"bg-green-50",title:"Files Stored",value:t==null?void 0:t.uploaded,imgSrc:"assets/imgs/dashboard-upload-icon.svg",alt:"Dashboard Upload Icon"}),e($t,{bgColor:"bg-orange-50",title:"Files Transformed",value:t==null?void 0:t.transformed,imgSrc:"assets/imgs/dashboard-file-transformed-icon.svg",alt:"Dashboard File Transformed Icon"})]}),Xn=()=>{const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(""),[c,a]=r.useState(t||""),{setSelectedTenantName:f}=_s(),{data:h,isLoading:m,error:F,refetch:b}=ns(c),{data:g,isLoading:E}=Gn(h==null?void 0:h.role),v=i=>{sessionStorage.setItem("tenantName",i.target.value),a(i.target.value),f(i.target.value),sessionStorage.setItem("tenantName",i.target.value)};return r.useEffect(()=>{const i=setInterval(()=>{const k=sessionStorage.getItem("fullName");console.log("Checking if full name is found"),k&&(n(k),clearInterval(i))},200);return()=>clearInterval(i)},[]),r.useEffect(()=>{(async()=>{try{t&&!c&&a(t),await b(),typeof(h==null?void 0:h.role)=="number"&&sessionStorage.setItem("userRole",h.role.toString())}catch{return}})()},[b,c,h==null?void 0:h.role,t]),E||m?e("div",{className:"flex h-screen w-full items-center justify-center",children:e(Ve,{style:{marginTop:"-200px"}})}):F?e(Ue,{}):e("div",{className:"bg-gray-100 px-7",children:o("div",{className:"mb-8 mt-8 grid grid-cols-1 gap-8 lg:grid-cols-2",children:[o("div",{children:[e("div",{className:"flex h-36 items-center rounded-xl bg-[url('/assets/imgs/dashboard-bg.png'),linear-gradient(to_left,rgba(208,217,251,1),rgba(235,239,255,0.8))] bg-contain bg-right bg-no-repeat",children:o("div",{className:"p-6",children:[e("h6",{className:"text-md",children:"Welcome Back"}),e("h2",{className:"mt-1 text-xl font-semibold text-blue-800",children:s}),e("div",{className:"mt-3",children:(h==null?void 0:h.role)===3&&e(Ps,{className:"w-[200px] md:w-[320px]",sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#d2dbfc"},"&:hover fieldset":{borderColor:"#d2dbfc"},"&.Mui-focused fieldset":{borderColor:"#d2dbfc"}}},size:"small",children:o(Is,{labelId:"tenant-select-label",id:"tenant-select",value:c,onChange:v,label:"",MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:190},PaperProps:{style:{maxHeight:300}},MenuListProps:{sx:{maxHeight:"300px"}}},displayEmpty:!0,inputProps:{"aria-label":"Select a Tenant"},children:[e(qe,{value:"",children:"Select Organization"}),g&&(g==null?void 0:g.length)>0?g==null?void 0:g.map(i=>e(qe,{value:i,children:i},i)):e(qe,{disabled:!0,children:"No tenants available"})]})})})]})}),e(Jn,{dashboardDetails:h})]}),e(Yn,{})]})})};const Gs=({isSubmit:t,setFormData:s,emailError:n,configurationNameError:c,responseData:a,isEdit:f,isSaveCopy:h})=>{const[m,F]=r.useState(""),[b,g]=r.useState("");r.useEffect(()=>{if(t){const v={configurationName:m==null?void 0:m.trim(),email:b==null?void 0:b.trim()};E(v)}},[m,b]),r.useEffect(()=>{(()=>{a!=null&&a.configurationName&&(f||h)&&(F(a==null?void 0:a.configurationName),g(a==null?void 0:a.email))})()},[a,f,h]);const E=v=>{s(v)};return o("div",{className:"",children:[o("div",{className:"mt-2",children:[e("label",{htmlFor:"email",className:"text-md text-gray-500",children:"Email"}),e("input",{id:"email",value:b,onChange:v=>g(v.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),n&&e("p",{className:"mt-1 text-sm text-red-500",children:n})]}),o("div",{children:[e("label",{htmlFor:"configurationName",className:"text-md text-gray-500",children:"Configuration Name"}),e("input",{id:"configurationName",type:"text",value:m,onChange:v=>F(v.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),c&&e("p",{className:"mt-1 text-sm text-red-500",children:c})]})]})},jt=({isSubmit:t,setFormData:s,passwordError:n,portError:c,remoteUrlError:a,userNameError:f,configurationNameError:h,responseData:m,isEdit:F,isSaveCopy:b})=>{const[g,E]=r.useState(""),[v,i]=r.useState(""),[k,M]=r.useState(""),[U,w]=r.useState(""),[N,A]=r.useState(""),[R,W]=r.useState("");r.useEffect(()=>{(()=>{m!=null&&m.configurationName&&(F||b)&&(E(m==null?void 0:m.configurationName),i(m.remoteURL),M(m.port),w(m.forwardLocation),A(m.username),W(m.password))})()},[m,F,b]),r.useEffect(()=>{if(t){const P={configurationName:g==null?void 0:g.trim(),remoteURL:v==null?void 0:v.trim(),forwardingLocation:U==null?void 0:U.trim(),userName:N==null?void 0:N.trim(),password:R==null?void 0:R.trim(),port:k};O(P)}},[g,v,U,N,R,k]);const O=P=>{s(P)};return o("div",{className:"",children:[o("div",{children:[e("label",{htmlFor:"configurationName",className:"text-md text-gray-500",children:"Configuration Name"}),e("input",{id:"configurationName",type:"text",value:g,onChange:P=>E(P.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),h&&e("p",{className:"mt-1 text-sm text-red-500",children:h})]}),o("div",{className:"mt-2",children:[e("label",{htmlFor:"remoteURL",className:"text-md text-gray-500",children:"Remote URL"}),e("input",{id:"remoteURL",type:"text",value:v,onChange:P=>i(P.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),a&&e("p",{className:"mt-1 text-sm text-red-500",children:a})]}),o("div",{className:"mt-2",children:[e("label",{htmlFor:"port",className:"text-md text-gray-500",children:"Port"}),e("input",{id:"port",type:"text",value:k,onChange:P=>{const T=P.target.value;/^\d*$/.test(T)&&M(T)},maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),c&&e("p",{className:"mt-1 text-sm text-red-500",children:c})]}),o("div",{className:"mt-2",children:[e("label",{htmlFor:"userName",className:"text-md text-gray-500",children:"Username"}),e("input",{id:"userName",type:"text",value:N,onChange:P=>A(P.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),f&&e("p",{className:"mt-1 text-sm text-red-500",children:f})]}),o("div",{className:"mt-2",children:[e("label",{htmlFor:"password",className:"text-md text-gray-500",children:"Password"}),e("input",{id:"password",type:"password",value:R,onChange:P=>W(P.target.value),className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),n&&e("p",{className:"mt-1 text-sm text-red-500",children:n})]})]})},Gt=({isSubmit:t,setFormData:s,passwordError:n,userNameError:c,remoteUrlError:a,configurationNameError:f,responseData:h,isEdit:m,isSaveCopy:F})=>{const[b,g]=r.useState(""),[E,v]=r.useState(""),[i,k]=r.useState(""),[M,U]=r.useState(""),[w,N]=r.useState(""),A=R=>{s(R)};return r.useEffect(()=>{if(t){const R={configurationName:b==null?void 0:b.trim(),remoteURL:E==null?void 0:E.trim(),forwardingLocation:i==null?void 0:i.trim(),userName:M==null?void 0:M.trim(),password:w==null?void 0:w.trim()};A(R)}},[b,E,M,i,w]),r.useEffect(()=>{(()=>{h!=null&&h.configurationName&&(m||F)&&(g(h==null?void 0:h.configurationName),v(h.remoteURL),U(h.username),k(h.forwardLocation),N(h.password))})()},[h,m,F]),o("div",{className:"",children:[o("div",{children:[e("label",{htmlFor:"configurationName",className:"text-md text-gray-500",children:"Configuration Name"}),e("input",{id:"configurationName",type:"text",value:b,onChange:R=>g(R.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),f&&e("p",{className:"mt-1 text-sm text-red-500",children:f})]}),o("div",{className:"mt-2",children:[e("label",{htmlFor:"remoteURL",className:"text-md text-gray-500",children:"Remote URL"}),e("input",{id:"remoteURL",type:"text",value:E,onChange:R=>v(R.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),a&&e("p",{className:"mt-1 text-sm text-red-500",children:a})]}),o("div",{className:"mt-2",children:[e("label",{htmlFor:"userName",className:"text-md text-gray-500",children:"Username"}),e("input",{id:"userName",type:"text",value:M,onChange:R=>U(R.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),c&&e("p",{className:"mt-1 text-sm text-red-500",children:c})]}),o("div",{className:"mt-2",children:[e("label",{htmlFor:"password",className:"text-md text-gray-500",children:"Password"}),e("input",{id:"password",type:"password",value:w,onChange:R=>N(R.target.value),className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),n&&e("p",{className:"mt-1 text-sm text-red-500",children:n})]})]})},Kt=({isSubmit:t,setFormData:s,configurationNameError:n,bucketNameError:c,regionError:a,secretKeyError:f,accessKeyIdError:h,responseData:m,isEdit:F,isSaveCopy:b})=>{const[g,E]=r.useState(""),[v,i]=r.useState(""),[k,M]=r.useState(""),[U,w]=r.useState(""),[N,A]=r.useState(""),[R,W]=r.useState(""),O=P=>{s(P)};return r.useEffect(()=>{if(t){const P={configurationName:g==null?void 0:g.trim(),bucketName:v==null?void 0:v.trim(),region:k==null?void 0:k.trim(),accessKeyId:U==null?void 0:U.trim(),secretAccessKey:N==null?void 0:N.trim(),forwardingLocation:R==null?void 0:R.trim()};O(P)}},[g,v,k,U,N,R]),r.useEffect(()=>{(()=>{m!=null&&m.configurationName&&(F||b)&&(E(m==null?void 0:m.configurationName),i(m==null?void 0:m.bucketName),M(m==null?void 0:m.region),w(m==null?void 0:m.accessId),A(m==null?void 0:m.secretkey),W(m.forwardLocation))})()},[m,F,b]),o("div",{className:"",children:[o("div",{children:[e("label",{htmlFor:"configurationName",className:"text-md text-gray-500",children:"Configuration Name"}),e("input",{id:"configurationName",type:"text",value:g??"",onChange:P=>E(P.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-300"}),n&&e("p",{className:"mt-1 text-sm text-red-500",children:n})]}),o("div",{className:"mt-2",children:[e("label",{htmlFor:"bucketName",className:"text-md text-gray-500",children:"Bucket Name"}),e("input",{id:"bucketName",type:"text",value:v??"",onChange:P=>i(P.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-300"}),c&&e("p",{className:"mt-1 text-sm text-red-500",children:c})]}),o("div",{className:"mt-2",children:[e("label",{htmlFor:"region",className:"text-md text-gray-500",children:"Region"}),e("input",{id:"region",type:"text",value:k??"",onChange:P=>M(P.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-300"}),a&&e("p",{className:"mt-1 text-sm text-red-500",children:a})]}),o("div",{className:"mt-2 flex items-center gap-1",children:[o("div",{className:"w-full",children:[e("label",{htmlFor:"accessKeyId",className:"text-md text-gray-500",children:"Access Key ID"}),e("input",{id:"accessKeyId",type:"text",value:U??"",onChange:P=>w(P.target.value),maxLength:100,className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-300"})]}),o("div",{className:"w-full",children:[e("label",{htmlFor:"password",className:"text-md text-gray-500",children:"Secret Key"}),e("input",{id:"password",type:"password",value:N??"",onChange:P=>A(P.target.value),className:"text-md mt-1 block w-full rounded-md border border-gray-300 p-1 text-gray-900 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-300"})]})]}),o("div",{className:"mt-2 flex items-center gap-1",children:[e("div",{className:"w-full",children:h&&e("p",{className:"mt-1 text-sm text-red-500",children:h})}),e("div",{className:"w-full",children:f&&e("p",{className:"mt-1 text-sm text-red-500",children:f})})]})]})},ys="api/Configuration/AddForwardingConfig",Zn={add:(t,s)=>{const n=s?ys+`?tenantName=${s}`:ys;return se.post(n,t)}},Ks=()=>Te({mutationFn:({body:t,tenantName:s})=>Zn.add(t,s),onSuccess:()=>(oe.success("Created successfully"),!0),onError:t=>{var s;if(t.isAxiosError){if(((s=t.response)==null?void 0:s.status)===409)return;oe.error("Create failed")}else oe.error("An unknown error occurred")}}),Vn=()=>{var X;const[t,s]=r.useState("s3"),[n,c]=r.useState(new Date().getTime()),[a,f]=r.useState(),{mutate:h}=Ks(),[m,F]=r.useState(""),[b,g]=r.useState(""),[E,v]=r.useState(""),[i,k]=r.useState(""),[M,U]=r.useState(""),[w,N]=r.useState(""),[A,R]=r.useState(""),[W,O]=r.useState(""),[P,T]=r.useState(""),[C,S]=r.useState(""),[D,$]=r.useState(""),K=ht(),Z=r.useRef(null),L={s3:1,https:3,ftp:4,email:5},_=Y=>{s(Y.target.value),V()},V=()=>{F(""),k(""),v(""),g(""),N(""),R(""),S(""),O(""),k(""),U(""),T(""),$("")},j=async Y=>{var me,Ne,pe,Se,Ee,Ae,Q,ae,ve,De;Z.current&&(Z.current.disabled=!0);let G=!0;const ie=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;switch(t){case"email":(a==null?void 0:a.configurationName.trim())===""?(F("Configuration Name is required"),G=!1):F(""),(a==null?void 0:a.email.trim())===""?($("Email is required"),G=!1):ie.test(a==null?void 0:a.email)?$(""):($("Please enter a valid email address"),G=!1);break;case"s3":(a==null?void 0:a.configurationName.trim())===""?(F("Configuration Name is required"),G=!1):F(""),(a==null?void 0:a.bucketName.trim())===""?(g("Bucket Name is required"),G=!1):g(""),(a==null?void 0:a.region.trim())===""?(v("Region is required"),G=!1):v(""),(a==null?void 0:a.accessKeyId.trim())===""?(k("Access Key Id required"),G=!1):k(""),(a==null?void 0:a.secretAccessKey.trim())===""?(U("Secret Key Id required"),G=!1):U("");break;case"https":(a==null?void 0:a.password.trim())===""?(R("Password is required"),G=!1):R(""),!a||a.remoteURL.trim()===""?(T("Remote URL is required"),G=!1):a.remoteURL.length>2040?(T("Remote URL cannot exceed 2040 characters"),G=!1):T(""),(a==null?void 0:a.userName.trim())===""?(S("Username is required"),G=!1):S(""),(a==null?void 0:a.configurationName.trim())===""?(F("Configuration Name is required"),G=!1):F("");break;case"ftp":(a==null?void 0:a.configurationName.trim())===""?(F("Configuration Name is required"),G=!1):F(""),(a==null?void 0:a.password.trim())===""?(R("Password is required"),G=!1):R(""),(a==null?void 0:a.userName.trim())===""?(S("Username is required"),G=!1):S(""),a!=null&&a.port?O(""):(O("Port is required"),G=!1),(a==null?void 0:a.remoteURL.trim())===""?(T("Remote url is required"),G=!1):T("");break}if(Y.preventDefault(),G){c(new Date().getTime());const Ie={methodId:L[t],configurationName:(me=a==null?void 0:a.configurationName)==null?void 0:me.trim(),bucketName:(Ne=a==null?void 0:a.bucketName)==null?void 0:Ne.trim(),region:(pe=a==null?void 0:a.region)==null?void 0:pe.trim(),accessId:(Se=a==null?void 0:a.accessKeyId)==null?void 0:Se.trim(),secretkey:(Ee=a==null?void 0:a.secretAccessKey)==null?void 0:Ee.trim(),forwardLocation:(Ae=a==null?void 0:a.forwardingLocation)==null?void 0:Ae.trim(),remoteURL:(Q=a==null?void 0:a.remoteURL)==null?void 0:Q.trim(),userName:(ae=a==null?void 0:a.userName)==null?void 0:ae.trim(),password:(ve=a==null?void 0:a.password)==null?void 0:ve.trim(),port:a==null?void 0:a.port,email:(De=a==null?void 0:a.email)==null?void 0:De.trim()};try{await ne(Ie)&&K("/dataconfigurations/configdataforwarding")}catch(xe){console.error("Error adding config forward:",xe)}finally{Z.current&&(Z.current.disabled=!1)}}Z.current&&(Z.current.disabled=!1)},I=sessionStorage.getItem("tenantName"),ne=async Y=>new Promise(G=>{h({body:Y,tenantName:I},{onSuccess:()=>{G(!0)},onError:ie=>{var me;ie.isAxiosError?((me=ie.response)==null?void 0:me.status)===409?ke.error("Configuration name already exists"):ke.error("Create failed"):ke.error("An unknown error occurred")}})});return e("div",{className:"flex items-center justify-center bg-gray-100 px-4 py-16 md:px-7",children:o("div",{className:"relative w-full rounded-lg bg-white pb-5 shadow-md",children:[o("h3",{className:"pb-4 pt-4 text-center text-xl font-semibold text-gray-900",children:[e("img",{src:"/assets/imgs/get-data.svg",alt:"Info",className:"mr-2 inline-block h-5 w-5"}),"Forward Data configuration"]}),e("div",{className:"absolute left-0 right-0 h-0.5 bg-gray-300",style:{top:"50px",marginLeft:55,marginRight:55}}),e("div",{className:"absolute",style:{top:"50px",left:"50%",transform:"translateX(-50%)",width:"calc(100% - 100px)",maxWidth:"320px"},children:e("div",{className:"h-0.5 bg-[#304CB2]",style:{width:"100%",padding:"0 10px"}})}),o("form",{onSubmit:j,className:"mx-auto px-4 md:max-w-lg md:px-8 md:pt-3",children:[e("p",{className:"text-xs",children:"Method"}),o("div",{className:"mt- flex flex-col md:flex-row md:items-center",children:[o("div",{className:"mb-2 flex items-center md:mb-0",children:[e("input",{checked:t==="s3",id:"default-radio-1",type:"radio",value:"s3",name:"default-radio",className:"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:_}),e("label",{htmlFor:"default-radio-1",className:"ml-2 text-sm font-medium text-gray-900",children:"S3"})]}),o("div",{className:"mb-2 flex items-center md:mb-0 md:ml-4",children:[e("input",{checked:t==="https",id:"default-radio-2",type:"radio",value:"https",name:"default-radio",className:"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:_}),e("label",{htmlFor:"default-radio-2",className:"ml-2 text-sm font-medium text-gray-900",children:"HTTPS"})]}),o("div",{className:"flex items-center md:ml-4",children:[e("input",{checked:t==="ftp",id:"default-radio-3",type:"radio",value:"ftp",name:"default-radio-3",className:"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:_}),e("label",{htmlFor:"default-radio-3",className:"ml-2 text-sm font-medium text-gray-900",children:"FTP"})]}),o("div",{className:"flex items-center md:ml-4",children:[e("input",{checked:t==="email",id:"default-radio-4",type:"radio",value:"email",name:"default-radio",className:"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:_}),e("label",{htmlFor:"default-radio-4",className:"ml-2 text-sm font-medium text-gray-900",children:"EMAIL"})]})]}),e("div",{className:" ",children:(()=>{switch(t){case"s3":return e(Kt,{location:"Forwarding Location",isSubmit:n,setFormData:f,configurationNameError:m,bucketNameError:b,regionError:E,forwardLocationError:w,secretKeyError:M,accessKeyIdError:i,isEdit:!1});case"https":return e(Gt,{location:"Forwarding Location",isSubmit:n,setFormData:f,passwordError:A,remoteUrlError:P,userNameError:C,configurationNameError:m,forwardLocationError:w,isEdit:!1});case"ftp":return e(jt,{location:"Forwarding Location",isSubmit:n,setFormData:f,passwordError:A,portError:W,remoteUrlError:P,forwardLocationError:w,userNameError:C,configurationNameError:m,isEdit:!1});case"email":return e(Gs,{isSubmit:n,setFormData:f,emailError:D,configurationNameError:m,isEdit:!1});default:return null}})()}),o("div",{className:"flex flex-col-reverse items-center justify-end gap-4 py-4 md:flex-row",children:[e("button",{type:"button",className:"rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onClick:()=>K(-1),children:"Cancel"}),e("button",{ref:Z,type:"submit",className:`${(X=Z.current)!=null&&X.disabled?"cursor-not-allowed bg-blue-700 opacity-50":""} rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400`,children:"Save"})]})]})]})})},vs="api/Configuration/AddNewPollingConfig",ea={add:(t,s)=>{const n=s?vs+`?tenantName=${s}`:vs;return se.post(n,t)}},Hs=()=>Te({mutationFn:async({body:t,tenantName:s})=>ea.add(t,s).then(()=>!0),onSuccess:()=>{oe.success("Created successfully")},onError:t=>{var s;((s=t.response)==null?void 0:s.status)!==409&&oe.error("Create failed")}}),ta=()=>{var ne;const[t,s]=r.useState("s3"),[n,c]=r.useState(new Date().getTime()),[a,f]=r.useState(),h=sessionStorage.getItem("tenantName"),{mutate:m}=Hs(),[F,b]=r.useState(""),[g,E]=r.useState(""),[v,i]=r.useState(""),[k,M]=r.useState(""),[U,w]=r.useState(""),[N,A]=r.useState(""),[R,W]=r.useState(""),[O,P]=r.useState(""),[T,C]=r.useState(""),[S,D]=r.useState(""),$=r.useRef(null),K=ht(),Z={s3:1,https:3,ftp:4,email:5},L=d=>{s(d.target.value),j()},_=async d=>{var Y,G,ie,me,Ne,pe,Se,Ee,Ae;$.current&&($.current.disabled=!0);let X=!0;switch(t){case"s3":(a==null?void 0:a.configurationName.trim())===""?(b("Configuration Name is required"),X=!1):b(""),(a==null?void 0:a.bucketName.trim())===""?(E("Bucket Name is required"),X=!1):E(""),(a==null?void 0:a.region.trim())===""?(i("Region is required"),X=!1):i(""),(a==null?void 0:a.accessKeyId.trim())===""?(M("Access Key Id required"),X=!1):M(""),(a==null?void 0:a.secretAccessKey.trim())===""?(w("Secret Key Id required"),X=!1):w("");break;case"https":(a==null?void 0:a.password.trim())===""?(D("Password is required"),X=!1):D(""),!a||a.remoteURL.trim()===""?(P("Remote URL is required"),X=!1):a.remoteURL.length>2040?(P("Remote URL cannot exceed 2040 characters"),X=!1):P(""),(a==null?void 0:a.userName.trim())===""?(W("Username is required"),X=!1):W(""),(a==null?void 0:a.configurationName.trim())===""?(b("Configuration Name is required"),X=!1):b("");break;case"ftp":(a==null?void 0:a.password.trim())===""?(D("Password is required"),X=!1):D(""),(a==null?void 0:a.configurationName.trim())===""?(b("Configuration Name is required"),X=!1):b(""),(a==null?void 0:a.userName.trim())===""?(W("Username is required"),X=!1):W(""),a!=null&&a.port?C(""):(C("Port is required"),X=!1),(a==null?void 0:a.remoteURL.trim())===""?(P("Remote url is required"),X=!1):P("");break}if(X){c(new Date().getTime());const Q={methodId:Z[t],configurationName:(Y=a==null?void 0:a.configurationName)==null?void 0:Y.trim(),bucketName:(G=a==null?void 0:a.bucketName)==null?void 0:G.trim(),region:(ie=a==null?void 0:a.region)==null?void 0:ie.trim(),accessId:(me=a==null?void 0:a.accessKeyId)==null?void 0:me.trim(),secretkey:(Ne=a==null?void 0:a.secretAccessKey)==null?void 0:Ne.trim(),pollingLocation:(pe=a==null?void 0:a.forwardingLocation)==null?void 0:pe.trim(),remoteURL:(Se=a==null?void 0:a.remoteURL)==null?void 0:Se.trim(),username:(Ee=a==null?void 0:a.userName)==null?void 0:Ee.trim(),password:(Ae=a==null?void 0:a.password)==null?void 0:Ae.trim(),port:a==null?void 0:a.port};d.preventDefault();try{await V(Q,h)&&K("/dataconfigurations/configdatapolling")}catch(ae){console.error("Error adding config forward:",ae)}finally{$.current&&($.current.disabled=!1)}}else d.preventDefault();$.current&&($.current.disabled=!1)},V=async(d,X)=>new Promise(Y=>{m({body:d,tenantName:X},{onSuccess:()=>{Y(!0)},onError:G=>{var ie;G.isAxiosError?((ie=G.response)==null?void 0:ie.status)===409?ke.error("Configuration name already exists"):ke.error("Create failed"):ke.error("An unknown error occurred")}})}),j=()=>{b(""),M(""),i(""),E(""),A(""),D(""),W(""),C(""),M(""),w(""),P("")};return e("div",{className:"flex items-center justify-center bg-gray-100 px-4 py-16 md:px-7",children:o("div",{className:"relative w-full rounded-lg bg-white shadow-md",children:[o("h3",{className:"pb-4 pt-4 text-center text-xl font-semibold text-gray-900",children:[e("img",{src:"/assets/imgs/get-data.svg",alt:"Info",className:"mr-2 inline-block h-5 w-5"}),"Get Data"]}),e("div",{className:"absolute left-0 right-0 h-0.5 bg-gray-300",style:{top:"50px",marginLeft:55,marginRight:55}}),e("div",{className:"absolute",style:{top:"50px",left:"50%",transform:"translateX(-50%)",width:"calc(100% - 100px)",maxWidth:"320px"},children:e("div",{className:"h-0.5 bg-[#304CB2]",style:{width:"100%",padding:"0 10px"}})}),o("form",{className:"mx-auto px-4 md:max-w-lg md:px-8 md:pt-3",children:[e("p",{className:"text-xs",children:"Method"}),o("div",{className:"mt- flex flex-col md:flex-row md:items-center",children:[o("div",{className:"mb-2 flex items-center md:mb-0",children:[e("input",{checked:t==="s3",id:"default-radio-1",type:"radio",value:"s3",name:"default-radio",className:"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:L}),e("label",{htmlFor:"default-radio-1",className:"ml-2 text-sm font-medium text-gray-900",children:"S3"})]}),o("div",{className:"mb-2 flex items-center md:mb-0 md:ml-4",children:[e("input",{checked:t==="https",id:"default-radio-2",type:"radio",value:"https",name:"default-radio",className:"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:L}),e("label",{htmlFor:"default-radio-2",className:"ml-2 text-sm font-medium text-gray-900",children:"HTTPS"})]}),o("div",{className:"flex items-center md:ml-4",children:[e("input",{checked:t==="ftp",id:"default-radio-3",type:"radio",value:"ftp",name:"default-radio-3",className:"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:L}),e("label",{htmlFor:"default-radio-3",className:"ml-2 text-sm font-medium text-gray-900",children:"FTP"})]})]}),e("div",{className:"",children:(()=>{switch(t){case"s3":return e(Kt,{location:"Polling Location",isSubmit:n,setFormData:f,configurationNameError:F,bucketNameError:g,regionError:v,forwardLocationError:N,secretKeyError:U,accessKeyIdError:k,isEdit:!1});case"https":return e(Gt,{location:"Polling Location",isSubmit:n,setFormData:f,passwordError:S,remoteUrlError:O,userNameError:R,configurationNameError:F,forwardLocationError:N,isEdit:!1});case"ftp":return e(jt,{location:"Polling Location",isSubmit:n,setFormData:f,passwordError:S,portError:T,remoteUrlError:O,forwardLocationError:N,userNameError:R,configurationNameError:F,isEdit:!1});default:return null}})()}),o("div",{className:"flex flex-col-reverse items-center justify-end gap-4 py-2 md:flex-row",children:[e("button",{type:"button",className:"rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onClick:()=>K(-1),children:"Cancel"}),e("button",{ref:$,onClick:_,className:`${(ne=$.current)!=null&&ne.disabled?"cursor-not-allowed bg-blue-700 opacity-50":""} rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400`,children:"Save"})]})]})]})})},sa="api/Configuration/AddBlocklyConfig",ra={addBlocklyName:(t,s)=>{const n=sa+`?configName=${t}&TotalPart=${s}`;return se.post(n)}},na=()=>Te({mutationFn:async({configName:t,totalParts:s})=>ra.addBlocklyName(t,s),onSuccess:t=>!0,onError:t=>{var s;((s=t.response)==null?void 0:s.status)!==409&&oe.error("Create failed")}}),aa="api/Configuration/GetBlockyInfo",oa={getDetails:(t,s,n)=>se.get(aa,{params:{skip:t,take:s,tenantName:n}})},ia=(t,s,n)=>ye({queryKey:["getblocklylistdata",t,s,n],queryFn:()=>oa.getDetails(t,s,n)}),la="api/UploadData/CompleteMultipartUploadBlockly",ca={completeMultipartBlockly:t=>se.post(la,t)},da=()=>Te({mutationFn:t=>ca.completeMultipartBlockly(t),onSuccess:t=>(console.log("result: ",t),t)}),ua="api/Configuration/RemoveBlocklyInfo",ma={deleteBlockly:(t,s)=>se.delete(ua,{params:{blocklyid:t,tenantName:s}})},fa=()=>Te({mutationFn:({blocklyid:t,tenantName:s})=>ma.deleteBlockly(t,s),onSuccess:()=>{oe.success("Deleted successfully")},onError:t=>{var s;t.isAxiosError?((s=t.response)==null?void 0:s.status)===406?oe.error("Service is already subscribed"):oe.error("Delete failed"):oe.error("An unknown error occurred")}}),ga="api/Configuration/MakeBlocklyCopy",pa={saveBlockly:(t,s,n)=>se.post(ga,null,{params:{configId:t,configName:s,tenantName:n}})},ha=()=>Te({mutationFn:({configId:t,configName:s,tenantName:n})=>pa.saveBlockly(t,s,n),onSuccess:()=>(ke.success("Created blockly copy successfully"),!0),onError:t=>{var s;if(t instanceof br){if(((s=t.response)==null?void 0:s.status)===409)return;ke.error("Error creating blockly copy")}else ke.error("An unknown error occurred")}}),ba=({isOpen:t,onClose:s,onSubmit:n,uploadProgress:c,configNameError:a,setConfigNameError:f,isUploading:h,setIsUploading:m})=>{const F=r.useRef(null),[b,g]=r.useState(null),[E,v]=r.useState(""),[i,k]=r.useState(!0),[M,U]=r.useState("No file chosen"),[w,N]=r.useState(!1),A=r.useRef(null),R=async()=>{A.current&&(A.current.disabled=!0);let D=!0;E.trim()===""?(f("Configuration name is required."),D=!1):(v(E.trim()),f("")),(!i||b===null)&&(k(!1),D=!1),D&&(m(!0),N(!0),await n(encodeURIComponent(E.trim()),b),m(!1),N(!1),t||(v(""),f(""),g(null),U("No file chosen"))),A.current&&(A.current.disabled=!1)},W=D=>{try{const Z=new DOMParser().parseFromString(D,"application/xml").documentElement;return Z&&Z.nodeName==="ClinicalDocument"}catch($){return console.error("Error parsing XML:",$),!1}},O=D=>{const $=new FileReader;$.onload=K=>{var _;const Z=(_=K.target)==null?void 0:_.result;if(W(Z)){const V=new Blob([D],{type:"text/xml"}),j=new File([V],`${D.name.split(".")[0]}.xml`,{type:"text/xml"});g(j),k(!0)}else k(!1)},$.readAsText(D)},P=D=>{if(D.target.files&&D.target.files.length>0){const $=D.target.files[0];O($),U($.name)}},T=()=>{var D;(D=F.current)==null||D.click()},C=(D,$=15,K=10)=>{const Z=D.lastIndexOf("."),L=Z!==-1?D.slice(Z):"",_=Z!==-1?D.slice(0,Z):D;if(_.length>$+K+3){const V=_.slice(0,$),j=_.slice(-K);return`${V}...${j}${L}`}return D},S=()=>{s(),v(""),f(""),g(null),U("No file chosen"),N(!1),m(!1)};return t?e("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-400 bg-opacity-50",children:o("div",{className:"relative w-full max-w-lg rounded-lg bg-white p-4 shadow-lg",children:[o("div",{className:"mx-5 flex items-center justify-between py-5",children:[e("h3",{className:"text-xl font-semibold text-gray-900",children:"Add Blockly"}),o("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-300",onClick:S,children:[e("svg",{className:"h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e("span",{className:"sr-only",children:"Close modal"})]})]}),o("div",{className:"p-5",children:[e("p",{className:"text-sm leading-relaxed text-gray-800",children:"Configuration Name"}),e("input",{type:"text",value:E,onChange:D=>v(D.target.value),maxLength:100,className:"mt-2 w-full rounded-md border border-gray-300 p-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-300"}),a&&e("p",{className:"mt-1 text-sm text-red-500",children:a})]}),o("div",{className:"p-5",children:[e("label",{className:"text-sm leading-relaxed text-gray-800",htmlFor:"file_input",children:"Upload file"}),o("div",{className:"mt-2",children:[e("input",{ref:F,className:"hidden","aria-describedby":"file_input_help",id:"file_input",type:"file",onChange:P}),o("label",{htmlFor:"file_input",className:`flex cursor-pointer items-center justify-between rounded-md border border-gray-300 p-2 text-center ${i?"bg-white":"border-red-500 bg-red-100"}`,children:[e("button",{type:"button",onClick:T,className:"mr-1 rounded-[2px] border border-gray-500 bg-[#efefef] px-2 py-[2px] text-base hover:border-black hover:bg-gray-200 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-300 whitespace-nowrap",children:"Choose file"}),e("span",{className:"flex-1 text-left",children:C(M)})]})]}),!i&&e("p",{className:"mt-1 text-sm text-red-500",children:"Please upload a valid CCDA Document."}),e("div",{className:"my-4 pt-2",children:h&&e(Bs,{value:c})})]}),o("div",{className:"mt-4 flex items-center justify-end gap-4 px-5 pb-5",children:[e("button",{className:"rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-300",onClick:s,children:"Cancel"}),e("button",{ref:A,className:"rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-300",onClick:R,disabled:w,children:"Save"})]})]})}):null},xa="api/Configuration/GetUserList",ya={getDetails:t=>se.get(xa,{params:{tenantName:t}})},Ht=t=>ye({queryKey:["getuserlistdata"],queryFn:()=>ya.getDetails(t)});function bt(){var g,E;const t=sessionStorage.getItem("tenantName"),s=sessionStorage.getItem("userRole"),{data:n}=ns(""),c=Ke(),{data:a}=Ht(t),f=c.fullEmail,h=((g=a==null?void 0:a.find(v=>v.email===f))==null?void 0:g.services)||[],m=(E=a==null?void 0:a.find(v=>v.email===f))==null?void 0:E.role,b=[{label:"User Management",path:"/dataconfigurations/usermanagement",imgActive:"/assets/imgs/user-management.svg",imgInactive:"/assets/imgs/inactive-user-management.svg",isDisabled:(n==null?void 0:n.role)===3?!t:m===2&&(n==null?void 0:n.role)!==3,hidden:s==="2"},{label:"Blockly Definition Files",path:"/dataconfigurations/blocklydefinition",imgActive:"/assets/imgs/definition-file.svg",imgInactive:"/assets/imgs/inactive-definition-file.svg",isDisabled:(n==null?void 0:n.role)===3?!t:!h.includes("Data Transformation")&&(n==null?void 0:n.role)!==3},{label:"Global Blockly Templates",path:"/dataconfigurations/globalblocklytemplates",imgActive:"/assets/imgs/definition-file.svg",imgInactive:"/assets/imgs/inactive-definition-file.svg",isDisabled:!!t||(n==null?void 0:n.role)!==3},{label:"Data Forwarding",path:"/dataconfigurations/configdataforwarding",imgActive:"/assets/imgs/data-forwarding.svg",imgInactive:"/assets/imgs/inactive-data-forwarding.svg",isDisabled:(n==null?void 0:n.role)===3?!t:!h.includes("Data Forwarding")&&(n==null?void 0:n.role)!==3},{label:"Data Polling",path:"/dataconfigurations/configdatapolling",imgActive:"/assets/imgs/data-polling.svg",imgInactive:"/assets/imgs/inactive-data-polling.svg",isDisabled:(n==null?void 0:n.role)===3?!t:!h.includes("Data Polling")&&(n==null?void 0:n.role)!==3},{label:"Subscription Configuration",path:"/dataconfigurations/subscriptionconfiguration",imgActive:"/assets/imgs/spanner-vector-active.svg",imgInactive:"/assets/imgs/spanner-vector-inactive.svg",isDisabled:(n==null?void 0:n.role)===3?!t:!h.includes("Data Polling")&&(n==null?void 0:n.role)!==3},{label:"Settings",path:"/dataconfigurations/configsettings",imgActive:"/assets/imgs/configuration.svg",imgInactive:"/assets/imgs/inactive-configuration.svg",isDisabled:(n==null?void 0:n.role)===3&&!t}].filter((v,i)=>!(v.label==="Global Blockly Templates"&&(t||(n==null?void 0:n.role)!==3)));return e("div",{className:"relative",children:e("div",{className:"flex flex-wrap gap-y-2 bg-transparent px-4 pt-8 md:px-8 lg:px-14",children:b.map((v,i)=>e("div",{children:e($s,{button:v,index:i})},i))})})}const xt=({isOpen:t,onClose:s,onConfirm:n})=>{const[c,a]=r.useState(!1);return t?e("div",{id:"remove-modal",tabIndex:-1,"aria-hidden":"true",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e("div",{className:"relative w-full max-w-xl p-4",children:o("div",{className:"relative rounded-lg bg-white shadow",children:[e("div",{className:"mx-5 flex items-center justify-end pt-5",children:o("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400",onClick:s,children:[e("svg",{className:"h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e("span",{className:"sr-only",children:"Close modal"})]})}),e("div",{className:"p-5",children:e("h3",{className:"text-center text-xl font-semibold text-gray-900",children:"Are you sure you want to remove this item?"})}),o("div",{className:"flex items-center justify-center gap-4 px-5 pb-5",children:[e("button",{className:"rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500",onClick:s,children:"No"}),e("button",{className:"rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white",disabled:c,onClick:async()=>{a(!0);try{await Promise.resolve(n())}finally{a(!1)}},children:"Yes"})]})]})})}):null},va=({isOpen:t,onClose:s,onSubmit:n,configNameForCopy:c,setConfigNameForCopy:a})=>{var E;const[f,h]=r.useState(c),[m,F]=r.useState(""),b=r.useRef(null),g=()=>{b.current&&(b.current.disabled=!0);let v=!0;f.trim()===""?(F("Configuration name is required."),v=!1):F(""),v&&(n(),h(""),s()),b.current&&(b.current.disabled=!1)};return t?e("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-400 bg-opacity-50",children:o("div",{className:"relative w-full max-w-lg rounded-lg bg-white p-4 shadow-lg",children:[o("div",{className:"mx-5 flex items-center justify-between py-5",children:[e("h3",{className:"text-xl font-semibold text-gray-900",children:"Save Copy As"}),o("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400",onClick:s,children:[e("svg",{className:"h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e("span",{className:"sr-only",children:"Close modal"})]})]}),o("div",{className:"p-5",children:[e("p",{className:"text-sm leading-relaxed text-gray-800",children:"Configuration Name"}),e("input",{type:"text",value:f,onChange:v=>{h(v.target.value),a(v.target.value)},maxLength:100,className:"mt-2 w-full rounded-md border border-gray-300 p-2"}),m&&e("p",{className:"mt-1 text-sm text-red-500",children:m})]}),o("div",{className:"mt-4 flex items-center justify-end gap-4 px-5 pb-5",children:[e("button",{className:"rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500",onClick:s,children:"Cancel"}),e("button",{ref:b,className:`${(E=b.current)!=null&&E.disabled?"cursor-not-allowed opacity-50":"cursor-pointer"} rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white`,onClick:g,children:"Save Copy"})]})]})}):null},as=[{label:"Is",value:"is",getApplyFilterFn:t=>{if(!t.value)return null;const s=String(t.value).toLowerCase();return n=>(n?"inactive":"active")===s},InputComponent:Yr}],wa=()=>{var ue;const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(0),[c,a]=r.useState(100),[f,h]=r.useState(new Date().getTime()),[m,F]=r.useState(0),{data:b,isFetching:g,error:E,refetch:v}=ia(s,c,t),[i,k]=r.useState(!1),[M,U]=r.useState(null),[w,N]=r.useState(!1),[A,R]=r.useState(!1),[W,O]=r.useState(!1),[P,T]=r.useState(!1),[C,S]=r.useState(!1),[D,$]=r.useState(null),[K,Z]=r.useState(""),[L,_]=r.useState(""),[V,j]=r.useState(0),[I,ne]=r.useState(!1),{mutate:d}=fa(),{mutate:X}=ha(),{mutateAsync:Y}=na(),{mutateAsync:G}=da();r.useEffect(()=>{(b==null?void 0:b.totalRecords)!==void 0&&F(b.totalRecords)},[b]),r.useEffect(()=>{(A||C)&&((b==null?void 0:b.totalRecords)!==void 0&&F(b.totalRecords),R(!1),S(!1))},[A,C]);const ie=((ue=b==null?void 0:b.blockyDefinitions)==null?void 0:ue.map((p,x)=>({id:s+x+1,blocklyid:p.id,username:p.username,identiferCode:p.identiferCode,description:p.description,filename:p.filename,status:p.status,conversion:p.conversion,currentVersion:p.currentVersion,templateId:p.templateId})))||[],me=[{field:"id",headerName:"Sl No.",flex:1,minWidth:100},{field:"username",headerName:"User Name",flex:1,minWidth:150},{field:"identiferCode",headerName:"Identifier Code",flex:1,minWidth:150,hideable:!0},{field:"conversion",headerName:"Conversion Type",flex:1,minWidth:200},{field:"description",headerName:"Description",flex:1,minWidth:300,renderCell:p=>{const x=p.value,l=(x==null?void 0:x.length)>75?`${x.substring(0,75)}...`:x;return e(Re,{truncatedString:l,fullString:x})}},{field:"filename",headerName:"Configuration Name",flex:1,minWidth:300,renderCell:p=>{const x=p.value,l=p.row.currentVersion,ee=l==="Default_template"?"Default_template":l?ss(l):"Draft",u=ee?x+" ("+ee+")":x,fe=(u==null?void 0:u.length)>75?`${u.substring(0,75)}...`:u;return e(Re,{truncatedString:fe,fullString:u})}},{field:"status",headerName:"Status",flex:1,minWidth:130,renderCell:p=>{const x=p.value;return o("div",{className:`flex items-center ${x?"text-[#E61D1D]":"text-[#36C5B4]"}`,children:[e("div",{className:`mr-2 h-1.5 w-1.5 rounded-full ${x?"bg-[#E61D1D]":"bg-[#36C5B4]"}`}),x?"Inactive":"Active"]})},filterOperators:as},{field:"action",headerName:"Actions",flex:1,minWidth:400,renderCell:p=>{const x=p.row,ee=x.status,u=(he,de,ge)=>{ee||Ee(he,de,ge)},fe=he=>{ee||pe(he)};return o("div",{className:"my-1 flex items-center gap-4",children:[o("div",{className:`inline-flex h-9 items-center gap-2 rounded-md bg-indigo-100 px-3 text-gray-700 ${ee?"cursor-not-allowed opacity-50":"cursor-pointer"}`,onClick:()=>{u(x.blocklyid,x.templateId,x.currentVersion)},role:"button",tabIndex:ee?-1:0,onKeyDown:he=>{!ee&&(he.key==="Enter"||he.key===" ")&&u(x.blocklyid,x.templateId,x.currentVersion)},children:[e("i",{className:"fa-solid fa-pen text-blue-800"})," Edit"]}),o("div",{className:`inline-flex h-9 items-center gap-2 rounded-md border border-red-100 bg-red-100 px-3 text-gray-700 ${ee?"cursor-not-allowed opacity-50":"cursor-pointer"}`,onClick:()=>fe(x.id),role:"button",tabIndex:ee?-1:0,onKeyDown:he=>{!ee&&(he.key==="Enter"||he.key===" ")&&(he.preventDefault(),fe(x.id))},children:[e("i",{className:"fa-solid fa-ban text-red-600"})," Remove"]}),o("div",{className:`inline-flex h-9 items-center gap-3 rounded-md bg-indigo-100 px-3 text-blue-800 ${ee?"cursor-not-allowed opacity-50":"cursor-pointer"}`,onClick:()=>{ee||Ne(p.id)},role:"button","data-tooltip-id":"create-copy-tooltip","data-tooltip-content":"Create a copy",tabIndex:0,onKeyDown:he=>{!ee&&(he.key==="Enter"||he.key===" ")&&Ne(p.id)},children:[e("img",{src:"/assets/imgs/floppy-disk-svgrepo-com.svg",alt:"",className:"h-4 w-4"})," ","Save as Copy"]}),e(tt,{id:"create-copy-tooltip",className:"custom-tooltip",style:{maxWidth:"200px",height:"auto",borderRadius:"8px",backgroundColor:"#4f4f4f",color:"#fff",fontSize:"12px"}})]})}}],Ne=p=>{const x=ie[p-1].blocklyid,l=ie[p-1].filename;$(x),Z(l),T(!0)},pe=p=>{const x=ie[p-1].blocklyid;U(x),k(!0)},Se=()=>{M!==null&&(d({blocklyid:M,tenantName:t}),k(!1),setTimeout(()=>{v().catch(p=>{console.error("Failed to remove data:",p)})},1500))},Ee=(p,x,l)=>{const ee=p,u=localStorage.getItem("jwtToken"),fe=sessionStorage.getItem("tenantName"),he=`https://d134xln0rcdwz6.cloudfront.net/?blocklyId=${ee}&templateId=${x}&currentVersion=${l}&tenantName=${fe}&token=${u}`;u&&window.open(he,"_blank")};function Ae(p){const x=new Error(p);throw x.name="ResponseKeyMismatchError",x}const Q=async(p,x)=>{var l,ee;try{const u=x.size>524288e3?52428800:10485760,fe=Math.ceil(x.size/u),he=await Y({configName:p,totalParts:fe}),de=[];for(let be=0;be<fe;be++){const _e=be*u,it=Math.min(_e+u,x.size),lt=x.slice(_e,it,x.type),je=Math.ceil((be+1)/fe*100);j(je);const Ye=await ae(he.presignedUrls[be],lt);Ye&&de.push({eTag:Ye.replace("/",""),partNumber:be+1})}const ge=he.key,Le=he.uploadId;await ve({key:ge,uploadId:Le,parts:de})===ge?(ke.success("Created successfully"),Ee(he.blocklyid,65,"Default_template")):Ae("Something went wrong!"),R(!0),v(),O(!1)}catch(u){ne(!1);const fe=u;((l=fe.response)==null?void 0:l.status)===409?_("Configuration name already exists"):u instanceof Error&&u.name==="ResponseKeyMismatchError"?ke.error(`${u.message}`):ke.error("File upload failed"),((ee=fe.response)==null?void 0:ee.status)!==409&&O(!1)}j(0)},ae=async(p,x)=>{try{return(await Ot.put(p,x,{headers:{"Content-Type":x.type||"application/octet-stream"}})).headers.etag??null}catch(l){return console.error("Error uploading part:",l),null}},ve=async p=>{try{if(!p){console.error("No valid file found");return}console.log("Sending request with body:",p);const x=await G(p);return console.log("Received response:",x),x}catch(x){console.error("Error:",x)}},De=async()=>{var p;try{await Ie(D,K.trim(),t)&&(S(!0),v(),T(!1))}catch(x){if(((p=x.response)==null?void 0:p.status)===409){const ee=xe(K.trim());try{await Ie(D,ee,t)&&(S(!0),v(),T(!1))}catch(u){throw console.error("Error saving configuration after modifying name: ",u),u}}else throw console.error("Error saving configuration: ",x),x}},Ie=async(p,x,l)=>new Promise((ee,u)=>{X({configId:p,configName:x,tenantName:l},{onSuccess:()=>{ee(!0)},onError:fe=>u(fe)})}),xe=p=>{const x=p.replace(/ - copy(?: \((\d+)\))?$/,"");let l=1;for(;Pe(`${x} - copy (${l})`);)l++;return`${x} - copy (${l})`},Pe=p=>ie.some(x=>x.filename===p),we=()=>{O(!0)},B=()=>{O(!1)};return r.useEffect(()=>{N(!!g)},[g]),E?e(Ue,{}):o("div",{className:"px-7 pt-4",children:[e(Me,{heading:"",rows:ie,columns:me,buttonText:"Add New",buttonLink:"#",buttonShow:!0,setSkip:n,totalCount:m,setSkipTrigger:h,pageSize:c,nav:e(bt,{}),setPageSize:a,showSearch:!0,showDatePicker:!1,isButtonDisabled:!1,handleButtonClick:we,navReports:void 0,setStartDate:function(){throw new Error("Function not implemented.")},setEndDate:function(){throw new Error("Function not implemented.")},hideFooter:!1,isLoading:w,columnsToHide:["identiferCode"]}),W&&e(ba,{isOpen:W,onClose:B,onSubmit:Q,uploadProgress:V,configNameError:L,setConfigNameError:_,isUploading:I,setIsUploading:ne}),P&&e(va,{isOpen:P,onClose:()=>{T(!1)},configNameForCopy:K,setConfigNameForCopy:Z,onSubmit:De}),e(xt,{isOpen:i,onClose:()=>k(!1),onConfirm:Se})]})},ws="api/Configuration/EditForwardingConfig",Na={updateForwardData:(t,s,n)=>{const c=n?ws+`?configid=${t}&tenantName=${n}`:ws+`?configid=${t}`;return se.put(c,s)}},Sa=()=>Te({mutationFn:({configid:t,body:s,tenantName:n})=>Na.updateForwardData(t,s,n),onSuccess:()=>{oe.success("Updated successfully")},onError:t=>{var s;t.isAxiosError?((s=t.response)==null?void 0:s.status)===409?oe.error("Configuration name already exists"):oe.error("Update failed"):oe.error("An unknown error occurred")}}),Ca="api/Configuration/GetFWDEditData",ka={getEditForwardDetails:t=>se.get(Ca,{params:{configid:t}})},Ea=t=>ye({queryKey:["getconfigforwardeditdata",t],queryFn:()=>ka.getEditForwardDetails(t),enabled:!!t}),Fa="api/Configuration/GetForwardConfig",Da={getDetails:(t,s,n)=>se.get(Fa,{params:{skip:t,take:s,tenantName:n}})},Ra=(t,s,n)=>ye({queryKey:["getconfigforwarddata",t,s,n],queryFn:()=>Da.getDetails(t,s,n)}),Ta="api/configuration/RemoveForwardConfig",Aa={deleteConfigForward:(t,s)=>se.delete(Ta,{params:{configid:t,tenantName:s}})},Pa=()=>Te({mutationFn:({configid:t,tenantName:s})=>Aa.deleteConfigForward(t,s),onSuccess:()=>{oe.success("Deleted successfully")},onError:t=>{var s;t.isAxiosError?((s=t.response)==null?void 0:s.status)===406?oe.error("Service is already subscribed"):oe.error("Delete failed"):oe.error("An unknown error occurred")}}),Qs=({isOpen:t,onClose:s,children:n})=>t?e("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:o("div",{className:"relative max-h-[80vh] overflow-auto rounded-lg bg-white px-5 pb-4 shadow-lg md:w-[40%]",children:[e("button",{onClick:s,className:"absolute right-4 top-2 text-gray-600 hover:text-gray-800",children:"x"}),n]})}):null;const Ia=()=>{var H,le;const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(0),[c,a]=r.useState(100),[f,h]=r.useState(new Date().getTime()),[m,F]=r.useState(0),[b,g]=r.useState(!1),[E,v]=r.useState(!1),[i,k]=r.useState("s3"),[M,U]=r.useState(null),[w,N]=r.useState(null),{mutate:A}=Ks(),{mutate:R}=Pa(),{mutate:W}=Sa(),{data:O,isFetching:P,isLoading:T,error:C,refetch:S}=Ra(s,c,t),{data:D,refetch:$,isFetching:K,isLoading:Z}=Ea(M),[L,_]=r.useState(),[V,j]=r.useState("s3"),[I,ne]=r.useState(new Date().getTime()),[d,X]=r.useState(),[Y,G]=r.useState(""),[ie,me]=r.useState(""),[Ne,pe]=r.useState(""),[Se,Ee]=r.useState(""),[Ae,Q]=r.useState(""),[ae,ve]=r.useState(""),[De,Ie]=r.useState(""),[xe,Pe]=r.useState(""),[we,B]=r.useState(""),[ue,p]=r.useState(""),[x,l]=r.useState(""),[ee,u]=r.useState(!1),[fe,he]=r.useState(!1),de=r.useRef(null);if(r.useEffect(()=>{(O==null?void 0:O.totalRecord)!==void 0&&F(O.totalRecord)},[O]),r.useEffect(()=>{D&&_(D)},[D]),C)return e(Ue,{});const ge=((H=O==null?void 0:O.dataForwards)==null?void 0:H.map((q,re)=>({id:re+1,configid:q.configid,configurationName:q.configurationName,createdOn:q.createdOn===null?"":$e(q.createdOn),createdBy:q.createdBy,protocol:q.protocol,server:q.server,fileTransfered:q.fileTransfered,lastRun:q.lastRun===null?"":$e(q.lastRun),status:q.status})))||[],Le={s3:1,https:3,ftp:4,email:5},He=async q=>{const re=ge[q-1].configid;U(re),re===M&&await $(),k(ge[q-1].protocol.toLowerCase()),j(ge[q-1].protocol.toLowerCase()),Ye(),u(!0),he(!1),g(!0)},Qe=async q=>{const re=ge[q-1].configid;U(re),re===M&&await $(),Ye(),k(ge[q-1].protocol.toLowerCase()),j(ge[q-1].protocol.toLowerCase()),u(!1),he(!0),g(!0)},be=q=>{const re=ge[q-1].configid;N(re),v(!0)},_e=async()=>{if(w!==null)try{const q=await it(w);S(),q&&F(re=>re-1)}catch{return}finally{v(!1)}},it=async q=>new Promise((re,Fe)=>{R({configid:q,tenantName:t},{onSuccess:()=>{re(!0)},onError:Oe=>Fe(Oe)})}),lt=[{field:"configurationName",headerName:"Configuration Name",flex:1,minWidth:200,renderCell:q=>{const re=q.value,Fe=(re==null?void 0:re.length)>75?`${re.substring(0,75)}...`:re;return e(Re,{truncatedString:Fe,fullString:re})}},{field:"createdBy",headerName:"Updated By",flex:1,minWidth:200},{field:"createdOn",headerName:"Updated On",flex:1,minWidth:200},{field:"protocol",headerName:"Protocol",flex:1,minWidth:200},{field:"server",headerName:"Server",flex:1,minWidth:200,renderCell:q=>{const re=q.value,Fe=(re==null?void 0:re.length)>75?`${re.substring(0,75)}...`:re;return e(Re,{truncatedString:Fe,fullString:re})}},{field:"fileTransfered",headerName:"Files Transferred",flex:1,minWidth:200},{field:"lastRun",headerName:"Last Run",flex:1,minWidth:200,renderCell:q=>{const Fe=q.row.status===!0?"text-[#36C5B4]":"text-[#E61D1D]";return e("div",{className:`flex items-center ${Fe}`,children:q.value})}},{field:"actions",headerName:"Actions",flex:1,minWidth:400,headerAlign:"center",align:"center",renderCell:q=>o("div",{className:"my-1 flex items-center gap-4",children:[o("div",{className:"inline-flex h-9 items-center gap-3 rounded-md bg-indigo-100 px-3 text-blue-800",onClick:()=>{He(q.row.id)},role:"button",tabIndex:0,onKeyDown:re=>{(re.key==="Enter"||re.key===" ")&&He(q.row.id)},children:[e("i",{className:"fa-solid fa-pen"})," Edit"]}),o("div",{className:"inline-flex h-9 items-center gap-3 rounded-md bg-indigo-100 px-3 text-blue-800",onClick:()=>{be(q.row.id)},role:"button",tabIndex:0,onKeyDown:re=>{(re.key==="Enter"||re.key===" ")&&be(q.row.id)},children:[e("i",{className:"fa-solid fa-ban text-red-600"})," Remove"]}),o("div",{className:"inline-flex h-9 items-center gap-3 rounded-md bg-indigo-100 px-3 text-blue-800",onClick:()=>{Qe(q.id)},role:"button","data-tooltip-id":"create-copy-tooltip","data-tooltip-content":"Create a copy",tabIndex:0,onKeyDown:re=>{(re.key==="Enter"||re.key===" ")&&Qe(q.id)},children:[e("img",{src:"/assets/imgs/floppy-disk-svgrepo-com.svg",alt:"",className:"h-4 w-4"})," ","Save as Copy"]}),e(tt,{id:"create-copy-tooltip",className:"custom-tooltip"})]})}],je=q=>{Ye(),k(q.target.value),j(q.target.value)},Ye=()=>{G(""),Ee(""),pe(""),me(""),Ie(""),ve(""),l(""),Pe(""),p(""),Ee(""),Q(""),B("")},kt=()=>{switch(i){case"s3":return e(Kt,{location:"Forwarding Location",isSubmit:I,setFormData:X,configurationNameError:Y,bucketNameError:ie,regionError:Ne,forwardLocationError:ae,secretKeyError:Ae,accessKeyIdError:Se,responseData:L,isEdit:ee,isSaveCopy:fe});case"https":return e(Gt,{location:"Forwarding Location",isSubmit:I,setFormData:X,passwordError:x,remoteUrlError:we,userNameError:xe,configurationNameError:Y,responseData:L,forwardLocationError:ae,isEdit:ee,isSaveCopy:fe});case"ftp":return e(jt,{location:"Forwarding Location",isSubmit:I,setFormData:X,passwordError:x,portError:ue,remoteUrlError:we,forwardLocationError:ae,responseData:L,userNameError:xe,configurationNameError:Y,isEdit:ee,isSaveCopy:fe});case"email":return e(Gs,{isSubmit:I,setFormData:X,emailError:De,responseData:L,configurationNameError:Y,isEdit:ee,isSaveCopy:fe});default:return null}},yt=()=>{switch(i){case"email":return!((d==null?void 0:d.configurationName)===(L==null?void 0:L.configurationName)&&(d==null?void 0:d.email)===(L==null?void 0:L.email));case"s3":return!((d==null?void 0:d.configurationName)===(L==null?void 0:L.configurationName)&&(d==null?void 0:d.bucketName)===(L==null?void 0:L.bucketName)&&(d==null?void 0:d.region)===(L==null?void 0:L.region)&&(d==null?void 0:d.accessKeyId)===(L==null?void 0:L.accessId)&&(d==null?void 0:d.secretAccessKey)===(L==null?void 0:L.secretkey)&&(d==null?void 0:d.forwardingLocation)===(L==null?void 0:L.forwardLocation));case"https":return!((d==null?void 0:d.configurationName)===(L==null?void 0:L.configurationName)&&(d==null?void 0:d.password)===(L==null?void 0:L.password)&&(d==null?void 0:d.remoteURL)===(L==null?void 0:L.remoteURL)&&(d==null?void 0:d.forwardingLocation)===(L==null?void 0:L.forwardLocation)&&(d==null?void 0:d.userName)===(L==null?void 0:L.username));case"ftp":return!((d==null?void 0:d.password)===(L==null?void 0:L.password)&&(d==null?void 0:d.configurationName)===(L==null?void 0:L.configurationName)&&(d==null?void 0:d.userName)===(L==null?void 0:L.username)&&(d==null?void 0:d.port)===(L==null?void 0:L.port)&&(d==null?void 0:d.remoteURL)===(L==null?void 0:L.remoteURL)&&(d==null?void 0:d.forwardingLocation)===(L==null?void 0:L.forwardLocation))}},vt=async()=>{var Fe,Oe,Je,Xe,ze,rt,ut,nt,mt,ft,wt,We,gt,Ft,y;de.current&&(de.current.disabled=!0);let q=!0;const re=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;switch(i){case"email":!(d!=null&&d.configurationName)||(d==null?void 0:d.configurationName.trim())===""?(G("Configuration Name is required"),q=!1):G(""),!(d!=null&&d.email)||(d==null?void 0:d.email.trim())===""?(Ie("Email is required"),q=!1):re.test(d==null?void 0:d.email)?Ie(""):(Ie("Please enter a valid email address"),q=!1);break;case"s3":((Fe=d==null?void 0:d.configurationName)==null?void 0:Fe.trim())===""||!(d!=null&&d.configurationName)?(G("Configuration Name is required"),q=!1):G(""),((Oe=d==null?void 0:d.bucketName)==null?void 0:Oe.trim())===""||!(d!=null&&d.bucketName)?(me("Bucket Name is required"),q=!1):me(""),((Je=d==null?void 0:d.region)==null?void 0:Je.trim())===""||!(d!=null&&d.region)?(pe("Region is required"),q=!1):pe(""),((Xe=d==null?void 0:d.accessKeyId)==null?void 0:Xe.trim())===""||!(d!=null&&d.accessKeyId)?(Ee("Access Key Id required"),q=!1):Ee(""),((ze=d==null?void 0:d.secretAccessKey)==null?void 0:ze.trim())===""||!(d!=null&&d.secretAccessKey)?(Q("Secret Key Id required"),q=!1):Q("");break;case"https":((rt=d==null?void 0:d.password)==null?void 0:rt.trim())===""||!(d!=null&&d.password)?(l("Password is required"),q=!1):l(""),!(d!=null&&d.remoteURL)||((ut=d==null?void 0:d.remoteURL)==null?void 0:ut.trim())===""?(B("Remote URL is required"),q=!1):((nt=d==null?void 0:d.remoteURL)==null?void 0:nt.length)>2040?(B("Remote URL cannot exceed 2040 characters"),q=!1):B(""),((mt=d==null?void 0:d.userName)==null?void 0:mt.trim())===""||!(d!=null&&d.userName)?(Pe("Username is required"),q=!1):Pe(""),((ft=d==null?void 0:d.configurationName)==null?void 0:ft.trim())===""||!(d!=null&&d.configurationName)?(G("Configuration Name is required"),q=!1):G("");break;case"ftp":((wt=d==null?void 0:d.password)==null?void 0:wt.trim())===""||!(d!=null&&d.password)?(l("Password is required"),q=!1):l(""),((We=d==null?void 0:d.configurationName)==null?void 0:We.trim())===""||!(d!=null&&d.configurationName)?(G("Configuration Name is required"),q=!1):G(""),((gt=d==null?void 0:d.userName)==null?void 0:gt.trim())===""||!(d!=null&&d.userName)?(Pe("Username is required"),q=!1):Pe(""),d!=null&&d.port?p(""):(p("Port is required"),q=!1),((Ft=d==null?void 0:d.remoteURL)==null?void 0:Ft.trim())===""||!(d!=null&&d.remoteURL)?(B("Remote url is required"),q=!1):B("");break}if(q&&(yt()||(L==null?void 0:L.methodId)===Le[V])){ne(new Date().getTime());const J={methodId:Le[V],configurationName:d==null?void 0:d.configurationName,bucketName:d==null?void 0:d.bucketName,region:d==null?void 0:d.region,accessId:d==null?void 0:d.accessKeyId,secretkey:d==null?void 0:d.secretAccessKey,forwardLocation:d==null?void 0:d.forwardingLocation,remoteURL:d==null?void 0:d.remoteURL,username:d==null?void 0:d.userName,password:d==null?void 0:d.password,port:d==null?void 0:d.port,email:d==null?void 0:d.email};try{fe?(J.configurationName=(y=J==null?void 0:J.configurationName)==null?void 0:y.trim(),Et(J==null?void 0:J.configurationName)?await dt(J):await st(J)):await dt(J),setTimeout(()=>{S(),U(null),g(!1),he(!1)},1500)}catch(ce){console.error("Error saving configuration:",ce),ke.error("Configuration name already exists")}finally{de.current&&(de.current.disabled=!1)}}de.current&&(de.current.disabled=!1)},ct=q=>{const re=q.replace(/ - copy(?: \((\d+)\))?$/,"");let Fe=1;for(;Et(`${re} - copy (${Fe})`);)Fe++;return`${re} - copy (${Fe})`},Et=q=>ge.some(re=>re.configurationName===q),dt=async q=>{var re;try{fe?await st(q):W({body:q,configid:M,tenantName:t})}catch(Fe){if(((re=Fe.response)==null?void 0:re.status)===409){q.configurationName=ct(q.configurationName);try{await st(q)}catch(Je){throw console.error("Error saving configuration after modifying name: ",Je),Je}}else throw console.error("Error saving configuration: ",Fe),Fe}},st=async q=>new Promise((re,Fe)=>{A({body:q,tenantName:t},{onSuccess:()=>re(!0),onError:Oe=>Fe(Oe)})});return o("div",{className:"px-7 pt-4",children:[e("div",{style:{overflowX:"auto",whiteSpace:"nowrap"},children:e(Me,{heading:"",rows:ge,columns:lt,setSkip:n,totalCount:m,setSkipTrigger:h,buttonLink:"adduserdataforwarding",buttonText:"Add New",buttonShow:!0,pageSize:c,setPageSize:a,nav:e(bt,{}),isButtonDisabled:!0,onButtonClick:()=>{},showSearch:!0,showDatePicker:!1,handleButtonClick:function(){throw new Error("Function not implemented.")},navReports:void 0,setStartDate:function(){throw new Error("Function not implemented.")},setEndDate:function(){throw new Error("Function not implemented.")},hideFooter:!1,isLoading:T||P})}),e(Qs,{isOpen:b,onClose:()=>{g(!1),he(!1)},children:o("div",{children:[e("h2",{className:"mb-4 mt-2 text-lg font-semibold",children:fe?"Save Copy As":ee?"Edit Data":"Get Data"})," ",o("div",{className:"mb-4",children:[o("label",{children:[e("input",{type:"radio",value:"s3",checked:i==="s3",className:"focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:je}),"S3"]}),o("label",{className:"ml-4",children:[e("input",{type:"radio",value:"https",checked:i==="https",className:"focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:je}),"HTTPS"]}),o("label",{className:"ml-4",children:[e("input",{type:"radio",value:"ftp",checked:i==="ftp",className:"focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:je}),"FTP"]}),o("label",{className:"ml-4",children:[e("input",{type:"radio",value:"email",checked:i==="email",className:"focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:je}),"Email"]})]}),K||Z?e("div",{className:"flex items-center justify-center py-10",children:e(Ve,{})}):kt(),o("div",{className:"mt-4 flex justify-end space-x-2",children:[e("button",{className:"rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onClick:()=>{g(!1),he(!1)},children:"Cancel"}),e("button",{ref:de,className:`${(le=de.current)!=null&&le.disabled?"cursor-not-allowed opacity-50":"cursor-pointer"} rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400`,onClick:vt,children:fe?"Save as copy":"Save"})]})]})}),e(xt,{isOpen:E,onClose:()=>v(!1),onConfirm:_e})]})},Ns="api/Configuration/EditPollingConfig",La={updatePollingData:(t,s,n)=>{const c=n?Ns+`?configid=${t}&tenantName=${n}`:Ns+`?configid=${t}`;return se.put(c,s)}},Ua=()=>Te({mutationFn:({configid:t,body:s,tenantName:n})=>La.updatePollingData(t,s,n),onSuccess:()=>{oe.success("Updated successfully")},onError:t=>{var s;t.isAxiosError?((s=t.response)==null?void 0:s.status)===409?oe.error("Configuration name already exists"):oe.error("Update failed"):oe.error("An unknown error occurred")}}),Ba="api/Configuration/GetPOLLEditData",$a={getEditForwardDetails:t=>se.get(Ba,{params:{configid:t}})},Ma=t=>ye({queryKey:["getconfigpollingdata",t],queryFn:()=>$a.getEditForwardDetails(t),enabled:!!t}),Oa="api/Configuration/GetDataPollingConfig",qa={getDetails:(t,s,n)=>se.get(Oa,{params:{skip:t,take:s,tenantName:n}})},za=(t,s,n)=>ye({queryKey:["getconfigpolldata",t,s,n],queryFn:()=>qa.getDetails(t,s,n)}),Wa="api/configuration/RemovePollingConfig",_a={deleteConfigPolling:(t,s)=>se.delete(Wa,{params:{configid:t,tenantName:s}})},ja=()=>Te({mutationFn:({configid:t,tenantName:s})=>_a.deleteConfigPolling(t,s),onSuccess:()=>{oe.success("Deleted successfully")},onError:t=>{var s;t.isAxiosError?((s=t.response)==null?void 0:s.status)===406?oe.error("Service is already subscribed"):oe.error("Delete failed"):oe.error("An unknown error occurred")}}),Ga=()=>{var dt,st;const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(0),[c,a]=r.useState(100),[f,h]=r.useState(new Date().getTime()),[m,F]=r.useState(0),[b,g]=r.useState(!1),[E,v]=r.useState(!1),[i,k]=r.useState("s3"),[M,U]=r.useState(null),[w,N]=r.useState(null),[A,R]=r.useState("s3"),[W,O]=r.useState(""),[P,T]=r.useState(""),[C,S]=r.useState(""),[D,$]=r.useState(""),[K,Z]=r.useState(""),[L,_]=r.useState(""),[V,j]=r.useState(""),[I,ne]=r.useState(""),[d,X]=r.useState(""),[Y,G]=r.useState(""),{mutate:ie}=Hs(),{mutate:me}=Ua(),{mutate:Ne}=ja(),{data:pe,isFetching:Se,isLoading:Ee,error:Ae,refetch:Q}=za(s,c,t),[ae,ve]=r.useState(new Date().getTime()),[De,Ie]=r.useState(!1),[xe,Pe]=r.useState(!1),we=r.useRef(null),{data:B,refetch:ue,isFetching:p,isLoading:x}=Ma(M),[l,ee]=r.useState(),[u,fe]=r.useState(),he={s3:1,https:3,ftp:4,email:5};if(r.useEffect(()=>{(pe==null?void 0:pe.totalRecord)!==void 0&&F(pe.totalRecord)},[pe]),r.useEffect(()=>{B&&ee({methodId:B==null?void 0:B.methodId,configurationName:B==null?void 0:B.configurationName,bucketName:B==null?void 0:B.bucketName,region:B==null?void 0:B.region,accessId:B==null?void 0:B.accessId,secretkey:B==null?void 0:B.secretkey,remoteURL:B==null?void 0:B.remoteURL,username:B==null?void 0:B.username,password:B==null?void 0:B.password,port:B==null?void 0:B.port,forwardLocation:B==null?void 0:B.pollingLocation,email:""})},[B]),Ae)return e(Ue,{});const de=((dt=pe==null?void 0:pe.dataPollings)==null?void 0:dt.map((H,le)=>({id:le+1,configid:H.configId,configurationName:H.configurationName,createdBy:H.createdBy,protocol:H.protocol,server:H.server,fileTransfered:H.fileTransfered,schedule:H.schedule,lastRun:H.lastRun===null?"":$e(H.lastRun),status:H.status})))||[],ge=async H=>{const le=de[H-1].configid;U(le),le===M&&await ue(),be(),k(de[H-1].protocol.toLowerCase()),R(de[H-1].protocol.toLowerCase()),Ie(!0),Pe(!1),g(!0)},Le=async H=>{const le=de[H-1].configid;U(le),le===M&&await ue(),be(),k(de[H-1].protocol.toLowerCase()),R(de[H-1].protocol.toLowerCase()),Ie(!1),Pe(!0),g(!0)},He=H=>{const le=de[H-1].configid;N(le),v(!0)},Qe=H=>{k(H.target.value),R(H.target.value),be()},be=()=>{O(""),$(""),S(""),T(""),_(""),G(""),j(""),X(""),$(""),Z(""),ne("")},_e=async()=>{if(w!==null)try{const H=await it(w);N(null),Q(),H&&F(le=>le-1)}catch{return}finally{v(!1)}},it=async H=>new Promise((le,q)=>{Ne({configid:H,tenantName:t},{onSuccess:()=>{le(!0)},onError:re=>q(re)})}),lt=()=>{switch(i){case"s3":return e(Kt,{location:"Polling Location",isSubmit:ae,setFormData:fe,configurationNameError:W,bucketNameError:P,regionError:C,forwardLocationError:L,secretKeyError:K,accessKeyIdError:D,responseData:l,isEdit:De,isSaveCopy:xe});case"https":return e(Gt,{location:"Polling Location",isSubmit:ae,setFormData:fe,passwordError:Y,remoteUrlError:I,userNameError:V,configurationNameError:W,forwardLocationError:L,responseData:l,isEdit:De,isSaveCopy:xe});case"ftp":return e(jt,{location:"Polling Location",isSubmit:ae,setFormData:fe,passwordError:Y,portError:d,remoteUrlError:I,forwardLocationError:L,userNameError:V,configurationNameError:W,responseData:l,isEdit:De,isSaveCopy:xe});default:return null}},je=()=>{switch(i){case"email":return!((u==null?void 0:u.configurationName)===(l==null?void 0:l.configurationName)&&(u==null?void 0:u.email)===(l==null?void 0:l.email));case"s3":return!((u==null?void 0:u.configurationName)===(l==null?void 0:l.configurationName)&&(u==null?void 0:u.bucketName)===(l==null?void 0:l.bucketName)&&(u==null?void 0:u.region)===(l==null?void 0:l.region)&&(u==null?void 0:u.accessKeyId)===(l==null?void 0:l.accessId)&&(u==null?void 0:u.secretAccessKey)===(l==null?void 0:l.secretkey)&&(u==null?void 0:u.forwardingLocation)===(l==null?void 0:l.forwardLocation));case"https":return!((u==null?void 0:u.configurationName)===(l==null?void 0:l.configurationName)&&(u==null?void 0:u.password)===(l==null?void 0:l.password)&&(u==null?void 0:u.remoteURL)===(l==null?void 0:l.remoteURL)&&(u==null?void 0:u.forwardingLocation)===(l==null?void 0:l.forwardLocation)&&(u==null?void 0:u.userName)===(l==null?void 0:l.username));case"ftp":return!((u==null?void 0:u.password)===(l==null?void 0:l.password)&&(u==null?void 0:u.configurationName)===(l==null?void 0:l.configurationName)&&(u==null?void 0:u.userName)===(l==null?void 0:l.username)&&(u==null?void 0:u.port)===(l==null?void 0:l.port)&&(u==null?void 0:u.remoteURL)===(l==null?void 0:l.remoteURL)&&(u==null?void 0:u.forwardingLocation)===(l==null?void 0:l.forwardLocation))}},Ye=async()=>{var le,q,re,Fe,Oe,Je,Xe,ze,rt,ut,nt,mt,ft;we.current&&(we.current.disabled=!0);let H=!0;switch(A){case"s3":!(u!=null&&u.configurationName)||(u==null?void 0:u.configurationName.trim())===""?(O("Configuration Name is required"),H=!1):O(""),((le=u==null?void 0:u.bucketName)==null?void 0:le.trim())===""||!(u!=null&&u.bucketName)?(T("Bucket Name is required"),H=!1):T(""),((q=u==null?void 0:u.region)==null?void 0:q.trim())===""||!(u!=null&&u.region)?(S("Region is required"),H=!1):S(""),((re=u==null?void 0:u.accessKeyId)==null?void 0:re.trim())===""||!(u!=null&&u.accessKeyId)?($("Access Key Id required"),H=!1):$(""),((Fe=u==null?void 0:u.secretAccessKey)==null?void 0:Fe.trim())===""||!(u!=null&&u.secretAccessKey)?(Z("Secret Key Id required"),H=!1):Z("");break;case"https":((Oe=u==null?void 0:u.password)==null?void 0:Oe.trim())===""||!(u!=null&&u.password)?(G("Password is required"),H=!1):G(""),!(u!=null&&u.remoteURL)||((Je=u==null?void 0:u.remoteURL)==null?void 0:Je.trim())===""?(ne("Remote URL is required"),H=!1):((Xe=u==null?void 0:u.remoteURL)==null?void 0:Xe.length)>2040?(ne("Remote URL cannot exceed 2040 characters"),H=!1):ne(""),((ze=u==null?void 0:u.userName)==null?void 0:ze.trim())===""||!(u!=null&&u.userName)?(j("Username is required"),H=!1):j(""),((rt=u==null?void 0:u.configurationName)==null?void 0:rt.trim())===""||!(u!=null&&u.configurationName)?(O("Configuration Name is required"),H=!1):O("");break;case"ftp":((ut=u==null?void 0:u.password)==null?void 0:ut.trim())===""||!(u!=null&&u.password)?(G("Password is required"),H=!1):G(""),((nt=u==null?void 0:u.configurationName)==null?void 0:nt.trim())===""||!(u!=null&&u.configurationName)?(O("Configuration Name is required"),H=!1):O(""),((mt=u==null?void 0:u.userName)==null?void 0:mt.trim())===""||!(u!=null&&u.userName)?(j("Username is required"),H=!1):j(""),u!=null&&u.port?X(""):(X("Port is required"),H=!1),((ft=u==null?void 0:u.remoteURL)==null?void 0:ft.trim())===""||!(u!=null&&u.remoteURL)?(ne("Remote url is required"),H=!1):ne("");break}if(H&&(je()||(l==null?void 0:l.methodId)===he[A])){ve(new Date().getDate());const We={methodId:he[A],configurationName:u==null?void 0:u.configurationName,bucketName:u==null?void 0:u.bucketName,region:u==null?void 0:u.region,accessId:u==null?void 0:u.accessKeyId,secretkey:u==null?void 0:u.secretAccessKey,pollingLocation:u==null?void 0:u.forwardingLocation,remoteURL:u==null?void 0:u.remoteURL,username:u==null?void 0:u.userName,password:u==null?void 0:u.password,port:u==null?void 0:u.port};try{xe?yt(We==null?void 0:We.configurationName)?await vt(We,t):await ct(We,t):await vt(We,t),setTimeout(()=>{Q(),U(null),g(!1),Pe(!1)},1500)}catch(gt){console.error("Error saving configuration:",gt),ke.error("Configuration name already exists")}finally{we.current&&(we.current.disabled=!1)}}we.current&&(we.current.disabled=!1)},kt=H=>{const le=H.replace(/ - copy(?: \((\d+)\))?$/,"");let q=1;for(;yt(`${le} - copy (${q})`);)q++;return`${le} - copy (${q})`},yt=H=>de.some(le=>le.configurationName===H),vt=async(H,le)=>{var q;try{xe?await ct(H,le):me({body:H,configid:M,tenantName:le})}catch(re){if(((q=re.response)==null?void 0:q.status)===409){H.configurationName=kt(H.configurationName);try{await ct(H,le)}catch(Oe){throw console.error("Error saving configuration after modifying name: ",Oe),Oe}}else throw console.error("Error saving configuration: ",re),re}},ct=async(H,le)=>new Promise((q,re)=>{ie({body:H,tenantName:le},{onSuccess:()=>q(!0),onError:Fe=>re(Fe)})});return o("div",{className:"px-7 pt-4",children:[e(Me,{heading:"",rows:de,columns:[{field:"configurationName",headerName:"Configuration Name",flex:1,minWidth:260,renderCell:H=>{const le=H.value,q=(le==null?void 0:le.length)>75?`${le.substring(0,75)}...`:le;return e(Re,{truncatedString:q,fullString:le})}},{field:"createdBy",headerName:"Updated By",flex:1,minWidth:200},{field:"protocol",headerName:"Protocol",flex:1,minWidth:200},{field:"server",headerName:"Server",flex:1,minWidth:200,renderCell:H=>{const le=H.value,q=(le==null?void 0:le.length)>75?`${le.substring(0,75)}...`:le;return e(Re,{truncatedString:q,fullString:le})}},{field:"fileTransfered",headerName:"Files Transferred",flex:1,minWidth:200},{field:"lastRun",headerName:"Last Run",flex:1,minWidth:200,renderCell:H=>{const q=H.row.status===!0?"text-[#36C5B4]":"text-[#E61D1D]";return e("div",{className:`flex items-center ${q}`,children:H.value})}},{field:"action",headerName:"Actions",flex:1,minWidth:400,headerAlign:"center",align:"center",renderCell:H=>o("div",{className:"my-1 flex items-center gap-4",children:[o("div",{className:"inline-flex h-9 items-center gap-3 rounded-md bg-indigo-100 px-3 text-blue-800",onClick:()=>{ge(H.id)},role:"button",tabIndex:0,onKeyDown:le=>{(le.key==="Enter"||le.key===" ")&&ge(H.id)},children:[e("i",{className:"fa-solid fa-pen"})," Edit"]}),o("div",{className:"inline-flex h-9 items-center gap-3 rounded-md bg-indigo-100 px-3 text-blue-800",onClick:()=>{He(H.id)},role:"button",tabIndex:0,onKeyDown:le=>{(le.key==="Enter"||le.key===" ")&&He(H.id)},children:[e("i",{className:"fa-solid fa-ban text-red-600"})," Remove"]}),o("div",{className:"inline-flex h-9 items-center gap-3 rounded-md bg-indigo-100 px-3 text-blue-800",onClick:()=>{Le(H.id)},role:"button","data-tooltip-id":"create-copy-tooltip","data-tooltip-content":"Create a copy",tabIndex:0,onKeyDown:le=>{(le.key==="Enter"||le.key===" ")&&Le(H.id)},children:[e("img",{src:"/assets/imgs/floppy-disk-svgrepo-com.svg",alt:"",className:"h-4 w-4"})," ","Save as Copy"]}),e(tt,{id:"create-copy-tooltip",className:"custom-tooltip"})]})}],buttonText:"Add New",buttonLink:"getuserdatapolling",setSkip:n,totalCount:m,setSkipTrigger:h,buttonShow:!0,pageSize:c,setPageSize:a,isButtonDisabled:!0,nav:e(bt,{}),showSearch:!0,showDatePicker:!1,handleButtonClick:function(){throw new Error("Function not implemented.")},navReports:void 0,setStartDate:function(){throw new Error("Function not implemented.")},setEndDate:function(){throw new Error("Function not implemented.")},hideFooter:!1,isLoading:Se||Ee}),e(Qs,{isOpen:b,onClose:()=>{g(!1),Pe(!1)},children:o("div",{children:[e("h2",{className:"mb-4 mt-2 text-lg font-semibold",children:xe?"Save Copy As":De?"Edit Data":"Get Data"}),o("div",{className:"mb-4",children:[o("label",{children:[e("input",{type:"radio",value:"s3",checked:i==="s3",className:"focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:Qe}),"S3"]}),o("label",{className:"ml-4",children:[e("input",{type:"radio",value:"https",checked:i==="https",className:"focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:Qe}),"HTTPS"]}),o("label",{className:"ml-4",children:[e("input",{type:"radio",value:"ftp",checked:i==="ftp",className:"focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onChange:Qe}),"FTP"]})]}),p||x?e("div",{className:"flex items-center justify-center py-10",children:e(Ve,{})}):lt(),o("div",{className:"mt-4 flex justify-end space-x-2",children:[e("button",{className:"rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onClick:()=>{g(!1),Pe(!1)},children:"Cancel"}),e("button",{ref:we,className:`${(st=we.current)!=null&&st.disabled?"cursor-not-allowed opacity-50":"cursor-pointer"} rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400`,onClick:Ye,children:xe?"Save as copy":"Save"})]})]})}),e(xt,{isOpen:E,onClose:()=>v(!1),onConfirm:_e})]})},Ka=({isOpen:t,onClose:s,onSubmit:n})=>{const c=r.useRef(null),[a,f]=r.useState(null),[h,m]=r.useState(""),[F,b]=r.useState(""),[g,E]=r.useState(!0),[v,i]=r.useState("No file chosen"),k=r.useRef(null),M=()=>{k.current&&(k.current.disabled=!0);let W=!0;h.trim()===""?(b("Configuration name is required."),W=!1):(m(h.trim()),b("")),(!g||a===null)&&(E(!1),W=!1),W&&(n(encodeURIComponent(h.trim()),a),m(""),f(null),i("No file chosen"),s()),k.current&&(k.current.disabled=!1)},U=W=>{try{const T=new DOMParser().parseFromString(W,"application/xml").documentElement;return T&&T.nodeName==="ClinicalDocument"}catch(O){return console.error("Error parsing XML:",O),!1}},w=W=>{const O=new FileReader;O.onload=P=>{var S;const T=(S=P.target)==null?void 0:S.result;if(U(T)){const D=new Blob([W],{type:"text/xml"}),$=new File([D],`${W.name.split(".")[0]}.xml`,{type:"text/xml"});f($),E(!0)}else E(!1)},O.readAsText(W)},N=W=>{if(W.target.files&&W.target.files.length>0){const O=W.target.files[0];w(O),i(O.name)}},A=()=>{var W;(W=c.current)==null||W.click()},R=(W,O=20,P=10)=>{const T=W.lastIndexOf("."),C=T!==-1?W.slice(T):"",S=T!==-1?W.slice(0,T):W;if(S.length>O+P+3){const D=S.slice(0,O),$=S.slice(-P);return`${D}...${$}${C}`}return W};return t?e("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-400 bg-opacity-50",children:o("div",{className:"relative w-full max-w-lg rounded-lg bg-white p-4 shadow-lg",children:[o("div",{className:"mx-5 flex items-center justify-between py-5",children:[e("h3",{className:"text-xl font-semibold text-gray-900",children:"Add New Source File"}),o("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400",onClick:s,children:[e("svg",{className:"h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e("span",{className:"sr-only",children:"Close modal"})]})]}),o("div",{className:"p-5",children:[e("p",{className:"text-sm leading-relaxed text-gray-800",children:"Template name"}),e("input",{type:"text",value:h,onChange:W=>m(W.target.value),maxLength:100,className:"mt-2 w-full rounded-md border border-gray-300 p-2"}),F&&e("p",{className:"mt-1 text-sm text-red-500",children:F})]}),o("div",{className:"p-5",children:[e("label",{className:"text-sm leading-relaxed text-gray-800",htmlFor:"file_input",children:"Upload source file"}),o("div",{className:"mt-2",children:[e("input",{ref:c,className:"hidden","aria-describedby":"file_input_help",id:"file_input",type:"file",onChange:N}),o("label",{htmlFor:"file_input",className:`flex cursor-pointer items-center justify-between rounded-md border border-gray-300 p-2 text-center ${g?"bg-white":"border-red-500 bg-red-100"}`,children:[e("button",{type:"button",onClick:A,className:"mr-1 rounded-[2px] border border-gray-500 bg-[#efefef] px-2 py-[2px] text-base hover:border-black hover:bg-gray-200",children:"Choose file"}),e("span",{className:"flex-1 text-left",children:R(v)})]})]}),!g&&e("p",{className:"mt-1 text-sm text-red-500",children:"Please upload a valid CCDA Document."})]}),o("div",{className:"mt-4 flex items-center justify-end gap-4 px-5 pb-5",children:[e("button",{className:"rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500",onClick:s,children:"Cancel"}),e("button",{ref:k,className:"rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white",onClick:M,children:"Save"})]})]})}):null},Ha="api/Admin/AddGlobalSourceFile",Qa={addBlockly:(t,s)=>{const n=Ha+`?templateName=${t}&desc=Description`,c=new FormData;return c.append("file",s),se.post(n,c,{headers:{"Content-Type":"multipart/form-data"}})}},Ya=()=>Te({mutationFn:({templateName:t,body:s})=>Qa.addBlockly(t,s),onSuccess:t=>(oe.success("Added successfully"),t),onError:t=>{var s;t.isAxiosError?((s=t.response)==null?void 0:s.status)===409?oe.error("Template name already exists"):oe.error("Add failed"):oe.error("An unknown error occurred")}}),Ja="api/Admin/GetGlobalTemplateFileList",Xa={getDetails:()=>se.get(Ja,{params:{}})},Za=()=>ye({queryKey:["getglobalblocklylistdata"],queryFn:()=>Xa.getDetails()}),Va="api/Admin/DeleteGlobalSourceFile",eo={deleteBlockly:t=>se.delete(Va,{params:{templateid:t}})},to=()=>Te({mutationFn:eo.deleteBlockly,onSuccess:()=>{oe.success("Deleted successfully")},onError:t=>{var s;t.isAxiosError?((s=t.response)==null?void 0:s.status)===406?oe.error("Service is already subscribed"):oe.error("Delete failed"):oe.error("An unknown error occurred")}}),so=()=>{const[t,s]=r.useState(0),[n,c]=r.useState(100),[a,f]=r.useState(new Date().getTime()),[h,m]=r.useState(0),{data:F,isFetching:b,error:g,refetch:E}=Za();console.log("Global Blockly data: ",F);const[v,i]=r.useState(!1),[k,M]=r.useState(null),[U,w]=r.useState(!1),[N,A]=r.useState(!1),[R,W]=r.useState(!1),{mutate:O}=Ya(),{mutate:P}=to();r.useEffect(()=>{(F==null?void 0:F.length)!==void 0&&m(F.length)},[F]),r.useEffect(()=>{R&&W(!1)},[R]);const T=(F==null?void 0:F.map((L,_)=>{const V=L.createdDate?$e(L.createdDate):"",[j,I]=V.split(" ");return{id:t+_+1,templateId:L.templateId,date:j||"",time:I||"",fileName:L.fileName}}))||[],C=[{field:"id",headerName:"Sl No.",flex:1,minWidth:200},{field:"date",headerName:"Date",flex:1,minWidth:200},{field:"time",headerName:"Time",flex:1,minWidth:200},{field:"fileName",headerName:"Template Name",flex:1,minWidth:200,renderCell:L=>{const _=L.value,V=(_==null?void 0:_.length)>75?`${_.substring(0,75)}...`:_;return e(Re,{truncatedString:V,fullString:_})}},{field:"action",headerName:"Actions",flex:1,minWidth:200,renderCell:L=>{const _=L.row,V=I=>{$(I)},j=I=>{S(I)};return o("div",{className:"my-1 flex items-center gap-4",children:[o("div",{className:"inline-flex h-9 w-max items-center gap-2 rounded-md bg-indigo-100 px-3 text-gray-700",onClick:()=>{V(_.templateId)},role:"button",tabIndex:0,onKeyDown:I=>{(I.key==="Enter"||I.key===" ")&&V(_.templateId)},children:[e("i",{className:"fa-solid fa-pen text-blue-800"})," Edit"]}),o("div",{className:"inline-flex h-9 w-max items-center gap-2 rounded-md border border-red-100 bg-red-100 px-3 text-gray-700",onClick:()=>j(_.id),role:"button",tabIndex:0,onKeyDown:I=>{(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),j(_.id))},children:[e("i",{className:"fa-solid fa-ban text-red-600"})," Remove"]})]})}}],S=L=>{const _=T[L-1].templateId;M(_),i(!0)},D=()=>{k!==null&&(P(k),i(!1),setTimeout(()=>{E().catch(L=>{console.error("Failed to remove data:",L)})},1500))},$=L=>{const _=L,V="https://d2appgyue9obtb.cloudfront.net",j=localStorage.getItem("jwtToken");j&&window.open(`${V}?templateId=${_}&token=${j}, "_blank"`)},K=async(L,_)=>{try{if(!_){console.error("No valid file found");return}const V=await Z(L,_);V?(W(!0),A(!1),$(V)):console.log("Failed: Returned false or some other value")}catch(V){console.error("Error:",V)}},Z=async(L,_)=>new Promise((V,j)=>{O({templateName:L,body:_},{onSuccess:I=>{V(I)},onError:I=>j(I)})});return r.useEffect(()=>{w(!!b)},[b]),g?e(Ue,{}):o("div",{className:"px-7 pt-4",children:[e(Me,{heading:"",rows:T,columns:C,buttonText:"Add New Template",buttonLink:"#",buttonShow:!0,setSkip:s,totalCount:h,setSkipTrigger:f,pageSize:n,nav:e(bt,{}),setPageSize:c,showSearch:!0,showDatePicker:!1,isButtonDisabled:!1,handleButtonClick:()=>A(!0),navReports:void 0,setStartDate:function(){throw new Error("Function not implemented.")},setEndDate:function(){throw new Error("Function not implemented.")},hideFooter:!1,isLoading:U}),N&&e(Ka,{isOpen:N,onClose:()=>A(!1),onSubmit:K}),e(xt,{isOpen:v,onClose:()=>i(!1),onConfirm:D})]})},ro="/api/SubscriptionAction/DisableSubscription",no={disableSubscription:t=>se.put(ro+`?subscriptionId=${t}`)},ao=()=>Te({mutationFn:no.disableSubscription,onSuccess:()=>{oe.success("Disabled successfully")},onError:()=>{oe.error("Disable failed")}}),oo="/api/SubscriptionAction/EnableSubscription",io={enableSubscription:t=>{const s=oo+`?subscriptionId=${t}`;return se.put(s)}},lo=()=>Te({mutationFn:io.enableSubscription,onSuccess:()=>{oe.success("Enabled successfully")},onError:()=>{oe.error("Enable failed")}}),co="api/SubscriptionAction/GetSubscriptionList",uo={getDetails:(t,s,n)=>se.get(co,{params:{skip:t,take:s,tenantName:n}})},mo=(t,s,n)=>ye({queryKey:["getsubscriptionlist",t,s,n],queryFn:()=>uo.getDetails(t,s,n)}),fo="/api/SubscriptionAction/RemoveSubscription",go={deleteUpload:(t,s)=>se.delete(fo,{params:{subscriptionId:t,tenantName:s}})},po=()=>Te({mutationFn:({subscriptionId:t,tenantName:s})=>go.deleteUpload(t,s),onSuccess:()=>{oe.success("Deleted successfully")},onError:()=>{oe.error("Delete failed")}}),ho=({isOpen:t,onClose:s,onConfirm:n})=>{const[c,a]=r.useState(!1);return t?e("div",{id:"disable-modal",tabIndex:-1,"aria-hidden":"true",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e("div",{className:"relative w-full max-w-xl p-4",children:o("div",{className:"relative rounded-lg bg-white shadow",children:[e("div",{className:"mx-5 flex items-center justify-end pt-5",children:o("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400",onClick:s,children:[e("svg",{className:"h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e("span",{className:"sr-only",children:"Close modal"})]})}),e("div",{className:"p-5",children:e("h3",{className:"text-center text-xl font-semibold text-gray-900",children:"Are you sure you want to disable this item?"})}),o("div",{className:"flex items-center justify-center gap-4 px-5 pb-5",children:[e("button",{className:"rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500",onClick:s,children:"No"}),e("button",{className:"rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white",disabled:c,onClick:async()=>{a(!0);try{await n()}finally{a(!1)}},children:"Yes"})]})]})})}):null};const Ss="/api/SubscriptionAction/CreateSubcriptionAction",bo={add:(t,s)=>{const n=s?Ss+`?tenantName=${s}`:Ss;return se.post(n,t)}},xo=()=>Te({mutationFn:async({body:t,tenantName:s})=>bo.add(t,s),onSuccess:()=>{oe.success("Created successfully")},onError:t=>{var s;((s=t.response)==null?void 0:s.status)===409?oe.error("Configuration name already exists"):oe.error("Create failed")}}),yo="/api/SubscriptionAction/GetForwardingConfigNames",vo={getDetails:t=>se.get(yo,{params:{tenantName:t}})},wo=t=>ye({queryKey:["getconfigforwardnamesdata"],queryFn:()=>vo.getDetails(t)}),No="/api/SubscriptionAction/GetPollingConfigNames",So={getDetails:t=>se.get(No,{params:{tenantName:t}})},Co=t=>ye({queryKey:["getconfigpollingnamesdata"],queryFn:()=>So.getDetails(t)}),ko="/api/SubscriptionAction/SubscriptionIdentiferCode",Eo={getDetails:()=>se.get(ko)},Fo=()=>ye({queryKey:["getsubscriptionidentifercode"],queryFn:()=>Eo.getDetails()}),Do="/api/SubscriptionAction/GetTransformConfigNames",Ro={getDetails:t=>se.get(Do,{params:{tenantName:t}})},To=t=>ye({queryKey:["getconfigtransformnamesdata"],queryFn:()=>Ro.getDetails(t)}),Ys=({onClose:t,isEdit:s,data:n,setEditOpen:c,setOptions:a,setIsEditSubmitted:f,setIsAddSubmitted:h,refetch:m,isLoading:F})=>{var wt,We,gt,Ft;const[b,g]=r.useState([]),[E,v]=r.useState(""),[i,k]=r.useState(),[M,U]=r.useState(""),w=r.useRef(null),{mutate:N}=xo(),A=async(y,z)=>new Promise(J=>{N({body:y,tenantName:z},{onSuccess:()=>{J(!0)},onError:ce=>{var Ce;if(((Ce=ce==null?void 0:ce.response)==null?void 0:Ce.status)===409){w.current&&(w.current.disabled=!1);return}}})}),[R,W]=r.useState({configurationName:"",batchSize:"",description:"",services:{},schedule:"",weeklyDay:"",monthlyDate:"",expiryDate:"",expiryTime:"",code:"",wildFilter:"",filterOptions:""}),O=sessionStorage.getItem("tenantName"),[P,T]=r.useState(null),[C,S]=r.useState(null),[D,$]=r.useState(null),K=Mt.useRef(null),Z=Mt.useRef(null),[L,_]=r.useState("00:00:00 AM"),[V,j]=r.useState(),[I,ne]=r.useState(!1),[d,X]=r.useState(!1),[Y,G]=r.useState(),[ie,me]=r.useState(),[Ne,pe]=r.useState(null),[Se,Ee]=r.useState(),[Ae,Q]=r.useState(),[ae,ve]=r.useState("00:00:00 AM"),[De,Ie]=r.useState(),[xe,Pe]=r.useState(!0),[we,B]=r.useState([]),ue=y=>{B(z=>z.includes(y)?(y==="Generate Code"?G(""):y==="Filter"&&me(""),z.filter(J=>J!==y)):[...z,y])},[p,x]=r.useState(),[l,ee]=r.useState(),[u,fe]=r.useState(),{data:he}=wo(O),{data:de}=Co(O),{data:ge,refetch:Le}=To(O),{data:He}=Fo(),Qe=()=>{G(He)},[be,_e]=r.useState({});r.useEffect(()=>{Le()},[Le]),r.useEffect(()=>{he&&x(he==null?void 0:he.map(y=>({configId:y.configId,configurationName:y.configurationName,subscribed:y.subscribed}))),de&&ee(de==null?void 0:de.map(y=>({configId:y.configId,configurationName:y.configurationName,subscribed:y.subscribed}))),ge&&fe(ge==null?void 0:ge.map(y=>({configId:y.configId,configurationName:y.configurationName,subscribed:y.subscribed,versionName:y.versionName})))},[he,de,ge,Le]);const it=y=>{_(y||"00:00:00")},lt=y=>{ve(y||"00:00:00")},je=y=>{const z=`1970-01-01T${y}`,J=$e(z);return St(J,"HH:mm:ss a")},Ye=(y,z)=>{const J=b.map(ce=>ce.id===y?{...ce,serviceType:z,configuration:0}:ce);g(J),y===1&&j(0)},kt=y=>{j(Number(y.target.value))},yt=y=>{const z=y.target.value?Number(y.target.value):null;pe(z)},vt=y=>{if(Array.isArray(y)){const[z]=y;Ee(z)}else y instanceof Date?Ee(y):Ee(void 0);ne(!1)},ct=y=>{if(Array.isArray(y)){const[z]=y;Q(z)}else y instanceof Date?Q(y):Q(void 0);X(!1)},Et=()=>{ne(y=>!y)},dt=()=>{X(y=>!y)},st=(y,z)=>{g(J=>{const ce=[...J];return ce[y].serviceName=z,ce})},H=()=>{g(y=>{const z={id:y.length+1,serviceName:"",serviceType:0,configuration:0,minimized:!1,isActive:!0};return[...y,z]}),setTimeout(()=>{Z.current&&Z.current.scrollIntoView({behavior:"smooth",block:"start"})},0)},le=y=>{s&&(x(ze(p)),ee(ze(l)),fe(ze(u))),b.length<=2?ke.error("Delete failed, at least 2 services should be present"):(g(z=>z.filter(ce=>ce.id!==y).map((ce,Ce)=>({...ce,id:Ce+1,serviceName:ce.serviceName||`Service ${Ce+1}`}))),_e(z=>{const J={};return Object.entries(z).forEach(([ce,Ce])=>{const Be=parseInt(ce,10);Be<y?J[Be]=Ce:Be>y&&(J[Be-1]=Ce)}),J}),j(0),pe(null),Ee(void 0),Q(void 0),_("00:00:00"),ve("00:00:00"))},q=(y,z)=>{T(z),$(z),y.dataTransfer.effectAllowed="move"},re=(y,z)=>{y.preventDefault(),P!==null&&P!==z?g(J=>{const ce=[...J],[Ce]=ce.splice(P,1);ce.splice(z,0,Ce);const Be={};return ce.forEach((te,Ge)=>{const Dt=te.id;be[Dt]&&(Be[Ge+1]=be[Dt])}),_e(Be),ce.map((te,Ge)=>({...te,id:Ge+1}))}):P!==null&&P===z&&g(J=>{const ce=[...J],[Ce]=ce.splice(P,1);return ce.splice(D,0,Ce),ce.map((Be,te)=>({...Be,id:te+1}))}),T(null),S(null),$(null),j(0),pe(null),Ee(void 0),Q(void 0),_("00:00:00"),ve("00:00:00")},Fe=(y,z)=>{y.preventDefault(),S(z)},Oe=()=>{S(null)},Je=()=>{T(null),S(null),$(null),j(0)},Xe=y=>{if(!y)return"00:00:00";const[z,J]=y.split(" "),[ce,Ce,Be]=z.split(":").map(Number);let te=ce;return J==="PM"&&te<12&&(te+=12),J==="AM"&&te===12&&(te=0),`${te.toString().padStart(2,"0")}:${Ce.toString().padStart(2,"0")}:${Be.toString().padStart(2,"0")}`},ze=y=>y==null?void 0:y.map(z=>b.some(ce=>ce.configuration===z.configId)?{...z,subscribed:!1}:z),rt=(y,z,J)=>{z===0&&(J=0),x(ze(p)),ee(ze(l)),fe(ze(u)),_e(ce=>({...ce,[y]:J})),g(ce=>ce.map(Ce=>Ce.id===y?{...Ce,serviceType:z,configuration:J}:Ce))},ut=y=>{g(z=>z.map(J=>J.id===y?{...J,minimized:!J.minimized}:J))},nt=()=>{const y={configurationName:"",batchSize:"",description:"",services:{},schedule:"",weeklyDay:"",monthlyDate:"",expiryDate:"",expiryTime:"",code:"",wildFilter:"",filterOptions:""};return E||(y.configurationName="Configuration Name is required."),M||(y.description="Description is required."),i||(y.batchSize="Batch Size is required"),b.forEach(z=>{const J={serviceType:"",configuration:""};z.serviceType||(J.serviceType="Service Type is required."),z.configuration||(J.configuration="Configuration is required."),(J.serviceType||J.configuration)&&(y.services[z.id]=J)}),V||(y.schedule="Schedule selection is required."),!we.includes("Generate Code")&&!we.includes("Filter")?y.filterOptions="Please select any of the options.":(we.includes("Generate Code")&&!Y&&(y.code="Identifier Code is required."),we.includes("Filter")&&!ie&&(y.wildFilter="Wild Card is required.")),V===2&&Ne===null&&(y.weeklyDay="Please select a day of the week."),V===4&&!Se&&(y.monthlyDate="Please select a date."),Ae||(y.expiryDate="Please select an Expiry date."),i||(y.batchSize="Batch size is required"),W(y),!Object.values(y).some(z=>typeof z=="string"&&z||typeof z=="object"&&Object.values(z).some(J=>J))},mt=y=>{g(z=>z.map(J=>J.id===y?{...J,isActive:!J.isActive}:J))},ft=async()=>{if(w.current&&(w.current.disabled=!0),s){if(nt()){const y={subscriptionName:E.trim(),identiferCode:Y!=null&&Y.trim()?Y:null,wildFilter:ie!=null&&ie.trim()?ie:null,scheduleType:V,invokeTime:[6,7,8,9].includes(V)?null:Bt(Xe(L)),batchSize:i,description:M.trim(),expiryDate:St(Ae,"yyyy-MM-dd"),expiryTime:Bt(Xe(ae)),isActive:De,services:b.map(z=>({serviceName:z.serviceName?z.serviceName.trim():`Service ${z.id}`,orderValue:z.id,serviceTypeId:z.serviceType,configId:z.configuration,isActive:z.isActive}))};V===2&&(y.weeklyDay=Ne),V===4&&(y.monthlyDate=St(Se,"yyyy-MM-dd")),a(y),f==null||f(!0),t(),x([]),ee([]),fe([])}w.current&&(w.current.disabled=!1)}else{if(nt()){const y={subscriptionName:E.trim(),identiferCode:Y!=null&&Y.trim()?Y:null,wildFilter:ie!=null&&ie.trim()?ie:null,scheduleType:V,invokeTime:[6,7,8,9].includes(V)?null:Bt(Xe(L)),expiryDate:St(Ae,"yyyy-MM-dd"),expiryTime:Bt(Xe(ae)),batchSize:i,description:M.trim(),services:b.map(J=>({serviceName:J.serviceName,orderValue:J.id,serviceTypeId:J.serviceType,configId:J.configuration,isActive:!0}))};V===2&&(y.weeklyDay=Ne),V===4&&(y.monthlyDate=St(Se,"yyyy-MM-dd"));const z=await A(y,O);try{if(z)h==null||h(!0),m&&m();else{w.current&&(w.current.disabled=!1);return}}catch{w.current&&(w.current.disabled=!1);return}t()}w.current&&(w.current.disabled=!1)}};return r.useEffect(()=>{s||g([{id:1,serviceType:0,configuration:0,minimized:!1,isActive:!0},{id:2,serviceType:0,configuration:0,minimized:!1,isActive:!0}])},[s]),r.useEffect(()=>{s&&(()=>{if(n&&s){g([]),v(n.subscriptionName),U(n.description),j(n.scheduleType),_(n.invokeTime?je(n.invokeTime):"00:00:00"),G(n.identiferCode),me(n.wildFilter),Ee(n.monthlyDate===null?void 0:new Date(n.monthlyDate)),Q(n.expiryDate===null?void 0:new Date(n.expiryDate)),ve(n.expiryTime===null?"00:00:00":je(n.expiryTime)),pe(n.weeklyDay),Ie(n.isActive),k(n.batchSize);const z=[];n.identiferCode&&z.push("Generate Code"),n.wildFilter&&z.push("Filter"),B(z);let J=[];n.services.forEach((ce,Ce)=>{Ce<n.services.length?(J[Ce]={id:Ce+1,serviceName:ce.serviceName,serviceType:ce.serviceTypeId,configuration:ce.configId,minimized:!1,isActive:ce.isActive},_e(Be=>({...Be,[Ce+1]:ce.configId}))):J.push({id:Ce+1,serviceType:ce.serviceTypeId,configuration:ce.configId,minimized:!1,isActive:ce.isActive})}),g(J),J=[]}})()},[n,s]),r.useEffect(()=>{const y=z=>{if(P!==null&&K.current){const{clientY:J}=z,{top:ce,bottom:Ce}=K.current.getBoundingClientRect(),Be=50;J<ce+Be?K.current.scrollBy(0,-10):J>Ce-Be&&K.current.scrollBy(0,10)}};return P!==null&&document.addEventListener("mousemove",y),()=>{document.removeEventListener("mousemove",y)}},[P]),r.useEffect(()=>{let y=0;b.map(z=>{z.serviceType!==0&&(y+=1)}),y>=2?Pe(!1):Pe(!0)},[b]),e("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:o("div",{className:"w-full max-w-4xl rounded-lg bg-white shadow-lg",children:[o("div",{className:"mx-4 flex items-center justify-between border-b border-[#e5e7eb] p-4",children:[e("h5",{className:"-mx-4 text-lg font-semibold",children:s?"Edit Subscription Action":"Add Subscription Action"}),e("button",{className:"-mx-4 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onClick:()=>{t(),s&&c(!1)},children:e("img",{src:"/assets/imgs/close-svgrepo-com.svg",className:"h-5 w-5",alt:"close"})})]}),F?e("div",{className:"flex h-[650px] w-full items-center justify-center",children:e(Ve,{style:{marginTop:"-70px",marginRight:"50px"}})}):o("div",{className:"max-h-[90vh] overflow-y-auto px-7 pt-4 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-100 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-transparent dark:[&::-webkit-scrollbar-track]:bg-transparent [&::-webkit-scrollbar]:w-2",children:[o("form",{children:[o("div",{className:"mb-1 flex items-center gap-3",children:[e("label",{htmlFor:"configurationName",className:"col-form-label",children:"Configuration Name"}),e("input",{type:"text",className:"form-input flex-grow rounded-lg border border-[#e5e7eb] px-4 py-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",id:"configurationName",placeholder:"Configuration name",value:E,maxLength:100,onChange:y=>{const z=y.target.value;z.trim()===""&&z!==""||v(z)}})]}),R.configurationName&&e("span",{className:"mb-7 ml-[166px] text-sm text-red-500",children:R.configurationName}),o("div",{className:"mb-1 flex items-center gap-3",children:[e("label",{htmlFor:"description",className:"col-form-label",children:"Description"}),e("input",{type:"text",className:"form-input ml-[66px] mt-2 flex-grow rounded-lg border border-[#e5e7eb] px-4 py-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",id:"description",placeholder:"Description",value:M,maxLength:500,onChange:y=>{const z=y.target.value;z.trim()===""&&z!==""||U(z)}})]}),R.description&&e("span",{className:"mb-7 ml-[166px] text-sm text-red-500",children:R.description})]}),e("div",{className:"mb-2 mt-5 flex max-h-[90vh] flex-col gap-4 overflow-y-auto rounded-lg bg-blue-50 p-3 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-100 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-transparent dark:[&::-webkit-scrollbar-track]:bg-transparent [&::-webkit-scrollbar]:w-2",children:b.map((y,z)=>{var J,ce,Ce,Be;return o("div",{ref:z===b.length-1?Z:null,className:"relative rounded-lg bg-white p-3",style:{opacity:P===z?.5:1,border:C===z?"2px dashed #007bff":""},onDragEnd:Je,onDragOver:te=>Fe(te,z),onDragLeave:Oe,onDrop:te=>re(te,z),children:[o("div",{className:"flex items-center justify-between pb-3",children:[o("div",{className:"flex items-center",children:[o("div",{className:"mr-3 cursor-pointer rounded-md bg-gray-100",children:[e("button",{className:"mx-2 my-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400","data-tooltip-id":"drag-tooltip","data-tooltip-content":"Hold to Drag",children:e("img",{src:"/assets/imgs/drag-svgrepo-com.svg",alt:"Drag",className:"h-4 w-4",draggable:!0,onDragStart:te=>q(te,z)})}),e(tt,{id:"drag-tooltip",style:{maxWidth:"200px",height:"auto",borderRadius:"8px",backgroundColor:"#4f4f4f",color:"#fff",fontSize:"12px"}})]}),e("input",{type:"text",value:y.serviceName||"",placeholder:`Service ${z+1}`,onChange:te=>st(z,te.target.value),maxLength:100,className:"border-b border-gray-300 text-lg font-bold focus:border-blue-500 focus:outline-none"})]}),o("div",{className:"mt-1 flex items-center gap-3",children:[o("button",{type:"button",className:"flex items-center rounded-md border border-[#e5e7eb] bg-[#feecec] px-3 py-1 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onClick:()=>le(y.id),children:[e("img",{src:"/assets/imgs/delete_trash_icon.svg",className:"mb-[2px] mr-1 w-5",alt:"trash"}),e("span",{children:"Delete"})]}),s&&e("div",{className:"flex justify-end gap-3",children:o("button",{type:"button",className:"flex items-center rounded-md border-[#e5e7eb] bg-[#f0f4fa] px-3 py-1 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onClick:()=>mt(y.id),children:[e("img",{src:y.isActive?"/assets/imgs/deny-svgrepo-com.svg":"/assets/imgs/accept-check-good-mark-ok-tick-svgrepo-com.svg",alt:y.isActive?"Disable":"Enable",className:"mr-1 h-4 w-4"}),e("span",{children:y.isActive?"Disable":"Enable"})]})}),e("button",{type:"button",onClick:()=>ut(y.id),className:"rounded-md bg-gray-100 p-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400","data-tooltip-id":"resize-tooltip","data-tooltip-content":y.minimized?"Maximize":"Minimize","data-tooltip-place":"right",children:e("img",{draggable:"false",src:y.minimized?"/assets/imgs/resize-svgrepo-com.svg":"/assets/imgs/resize1-svgrepo-com.svg",alt:y.minimized?"Expand":"Minimize",className:"h-4 w-4"})}),e(tt,{id:"resize-tooltip",style:{maxWidth:"200px",height:"auto",borderRadius:"8px",backgroundColor:"#4f4f4f",color:"#fff",fontSize:"12px"}})]})]}),!y.minimized&&e("div",{className:"border-t border-gray-300 pt-3",children:o("div",{className:"mb-1 grid grid-cols-12 gap-3",children:[o("div",{className:"col-span-12 sm:col-span-6",children:[e("label",{htmlFor:`serviceType${y.id}`,className:"col-form-label mb-2 block w-full text-gray-600",children:"Service Type"}),o("select",{className:"form-select w-full flex-grow rounded-lg border border-[#e5e7eb] px-4 py-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",id:`serviceType${y.id}`,value:y.serviceType,onChange:te=>{const Ge=Number(te.target.value);rt(y.id,Ge,y.configuration),Ye(y.id,Ge)},disabled:!y.isActive,children:[e("option",{value:0,children:"Select Type"}),e("option",{value:1,children:"Polling"}),z!==0&&e("option",{value:2,children:"Transformation"}),z!==0&&e("option",{value:3,children:"Forwarding"})]}),((ce=(J=R.services)==null?void 0:J[y.id])==null?void 0:ce.serviceType)&&e("span",{className:"text-sm text-red-500",children:R.services[y.id].serviceType})]}),o("div",{className:"col-span-12 sm:col-span-6",children:[e("label",{htmlFor:`configuration${y.id}`,className:"col-form-label mb-2 block w-full text-gray-600",children:"Configuration"}),o("select",{className:"form-select w-full flex-grow rounded-lg border border-[#e5e7eb] px-4 py-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",id:`configuration${y.id}`,value:y.configuration,onChange:te=>rt(y.id,y.serviceType,Number(te.target.value)),disabled:!y.isActive||!y.serviceType||y.serviceType===0,children:[e("option",{value:"",children:"Select Configuration"}),y.serviceType===3&&(p==null?void 0:p.filter(te=>!Object.values(be).includes(te.configId)||Object.values(be).includes(te.configId)||be[y.id]===te.configId).map(te=>e("option",{value:te.configId,disabled:be[y.id]!==te.configId&&(te.subscribed===!0||Object.values(be).includes(te.configId)),children:`${te.configurationName} ${(te.subscribed===!0||Object.values(be).includes(te.configId))&&be[y.id]!==te.configId?" (In use)":""}
                                    `},te.configId))),y.serviceType===1&&(l==null?void 0:l.filter(te=>!Object.values(be).includes(te.configId)||Object.values(be).includes(te.configId)||be[y.id]===te.configId).map(te=>e("option",{value:te.configId,disabled:be[y.id]!==te.configId&&(te.subscribed===!0||Object.values(be).includes(te.configId)),children:`${te.configurationName} ${(te.subscribed===!0||Object.values(be).includes(te.configId))&&be[y.id]!==te.configId?" (In use)":""}
                                    `},te.configId))),y.serviceType===2&&(u==null?void 0:u.filter(te=>!Object.values(be).includes(te.configId)||Object.values(be).includes(te.configId)||be[y.id]===te.configId).map(te=>{const Ge=te.versionName,Dt=Ge==="Default_template"?"Default_template":Ge!==null||Ge!==""?ss(Ge):"",ar=Dt?"("+Dt+")":"";return e("option",{value:te.configId,disabled:be[y.id]!==te.configId&&(te.subscribed===!0||Object.values(be).includes(te.configId)),children:`${te.configurationName} ${ar} ${(te.subscribed===!0||Object.values(be).includes(te.configId))&&be[y.id]!==te.configId?" (In use)":""}
                                    `},te.configId)}))]}),((Be=(Ce=R.services)==null?void 0:Ce[y.id])==null?void 0:Be.configuration)&&e("span",{className:"text-sm text-red-500",children:R.services[y.id].configuration})]})]})})]},y.id)})}),e("button",{onClick:H,className:"focus:border-dashedtransformation w-full rounded-md border border-dashed border-[#304CB2] px-4 py-2 text-[#304CB2] focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",children:"Add Service"}),o("div",{className:"mt-4 grid grid-cols-10 gap-4",children:[e("div",{className:"col-span-12 sm:col-span-7",children:e("form",{children:o("div",{className:"schedule mb-1 flex flex-col",children:[e("label",{htmlFor:"schedule",className:"col-form-label mb-2 block w-full text-gray-600",children:"Schedule"}),o("div",{className:"flex gap-3",children:[o("select",{className:"form-select mr-2 flex-grow rounded-lg border border-[#e5e7eb] px-4 py-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",id:"schedule",value:V,onChange:kt,disabled:xe,children:[e("option",{value:0,children:"Select schedule"}),((wt=b[0])==null?void 0:wt.serviceType)===1?o(Tt,{children:[e("option",{value:6,children:"One Minute"}),e("option",{value:7,children:"Five Minutes"}),e("option",{value:8,children:"Thirty Minutes"}),e("option",{value:9,children:"One Hour"}),e("option",{value:1,children:"Every Day"}),e("option",{value:2,children:"Every Week"}),e("option",{value:4,children:"Every Month"})]}):((We=b[0])==null?void 0:We.serviceType)===2||((gt=b[0])==null?void 0:gt.serviceType)===3?o(Tt,{children:[e("option",{value:1,children:"Every Day"}),e("option",{value:2,children:"Every Week"}),e("option",{value:4,children:"Every Month"})]}):null]}),![5,6,7,8,9].includes(V)&&e(is,{id:"time",onChange:it,value:L,format:"h:m:s a",maxDetail:"second",disableClock:!0,clearIcon:null,clockIcon:null,className:"custom-time-picker",disabled:xe})]}),R.schedule&&e("span",{className:"text-sm text-red-500",children:R.schedule}),V===2&&o("div",{className:"mt-2",children:[e("label",{htmlFor:"select day",className:"text-md",children:"Select Day of the Week"}),o("select",{value:Ne??"",onChange:yt,className:"text-md mt-1 block w-full rounded-md border border-[#e5e7eb] p-1 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",disabled:xe,children:[e("option",{value:"",children:"--Select a day--"}),e("option",{value:0,children:"Sunday"}),e("option",{value:1,children:"Monday"}),e("option",{value:2,children:"Tuesday"}),e("option",{value:3,children:"Wednesday"}),e("option",{value:4,children:"Thursday"}),e("option",{value:5,children:"Friday"}),e("option",{value:6,children:"Saturday"})]}),R.weeklyDay&&e("span",{className:"text-sm text-red-500",children:R.weeklyDay})]}),V===4&&o("div",{className:"mt-2 items-center gap-2",children:[e("button",{type:"button",onClick:Et,className:"mt-5 pb-3 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",disabled:xe,children:o("label",{htmlFor:"monthlyDate",className:"text-md rounded-lg border border-[#e5e7eb] px-4 py-2",children:[Se&&Se instanceof Date?Se.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}).replace(/\//g,"-"):"Select Date"," ",e(ls,{fontSize:"small",className:"ml-2"})]})}),I&&e("div",{className:"calendar-popup",children:e(cs,{onChange:vt,value:Se,className:"react-calendar",minDate:ds()})})]}),R.monthlyDate&&e("span",{className:"text-sm text-red-500",children:R.monthlyDate})]})})}),o("div",{className:"col-span-12 mt-4 sm:col-span-6",children:[o("div",{className:"flex flex-row",children:[e("h3",{className:"border-b-2 border-gray-200 text-gray-600",children:"Filter Options"}),R.filterOptions&&e("span",{className:"ml-12 mt-1 text-sm text-red-500",children:R.filterOptions})]}),e("form",{className:"mt-7",children:o("div",{children:[o("div",{className:"mb-4 flex items-center",children:[o("label",{className:`flex w-1/2 items-center ${xe?"cursor-not-allowed text-gray-500":"text-gray-700"}`,children:[e("input",{type:"checkbox",checked:we.includes("Generate Code"),disabled:xe,onChange:y=>{ue("Generate Code"),y.target.checked&&Qe()},className:"mr-2"}),"Identifier Code"]}),we.includes("Generate Code")&&e("input",{type:"text",readOnly:!0,placeholder:"Identifier Code",value:Y||"",onChange:Qe,maxLength:100,className:"form-input w-3/4 flex-grow rounded-lg border border-[#e5e7eb] px-4 py-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",id:"identifierCode",disabled:xe})]}),we.includes("Generate Code")&&R.code&&e("span",{className:"ml-1 text-sm text-red-500",children:R.code}),o("div",{className:"mb-4 flex items-center",children:[o("label",{className:`flex w-1/2 items-center ${xe?"cursor-not-allowed text-gray-500":"text-gray-700"}`,children:[e("input",{type:"checkbox",checked:we.includes("Filter"),onChange:()=>ue("Filter"),className:"mr-2",disabled:xe}),"Wild Card"]}),we.includes("Filter")&&o("div",{className:"relative w-3/4",children:[e("input",{type:"text",placeholder:"Wild Card",value:ie||"",onChange:y=>me(y.target.value),maxLength:50,disabled:xe,className:"form-input w-full flex-grow rounded-lg border border-[#e5e7eb] px-4 py-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400","data-tooltip-id":"wildcard-tooltip","data-tooltip-content":"Wildcard filtering will support two filter characters '*' and '?'. Asterisk '*' will match with zero or more characters, including periods. Question mark '?' will match one character exactly, whether it is an alpha, numeric, or special character (underscores, periods, and so on)."}),e(tt,{id:"wildcard-tooltip",style:{maxWidth:"534px",height:"auto",borderRadius:"8px",backgroundColor:"#4f4f4f",color:"#fff",fontSize:"12px"}}),R.wildFilter&&e("span",{className:"ml-1 text-sm text-red-500",children:R.wildFilter})]})]})]})})]})]}),e("div",{className:"expirytime relative",children:o("div",{className:"mt-5 flex flex-wrap items-start gap-x-6",children:[o("div",{className:"flex w-full flex-col sm:w-[200px]",children:[e("label",{htmlFor:"expiryDate",className:"mb-1 text-gray-600",children:"Expiry Date"}),e("button",{type:"button",onClick:dt,className:"pb-3 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400 disabled:text-[#636363]",disabled:xe,children:o("div",{className:"flex h-[40px] w-full items-center rounded-lg border border-[#e5e7eb] px-4 py-2",children:[Ae&&Ae instanceof Date?Ae.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}).replace(/\//g,"-"):"Select Expiry Date",e(ls,{fontSize:"small",className:"ml-auto"})]})}),d&&e("div",{className:"absolute z-10 mt-[70px] rounded-lg border border-[#e5e7eb] bg-white shadow-lg",children:e(cs,{onChange:ct,value:Ae,className:"react-calendar custom-calendar",minDate:ds()})}),R.expiryDate&&e("span",{className:"mt-1 text-sm text-red-500",children:R.expiryDate})]}),o("div",{className:"flex w-full flex-col sm:w-[200px]",children:[e("label",{htmlFor:"batchSize",className:"mb-1 text-gray-600",children:"Batch Size"}),e("input",{onChange:y=>{const z=y.target.value;/^\d*$/.test(z)&&k(z!==""?parseInt(z,10):void 0)},type:"text",id:"batchSize",value:i??"",maxLength:100,placeholder:"Enter Batch Size",className:"h-[40px] w-full rounded-lg border border-[#e5e7eb] px-4 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",disabled:xe}),R.batchSize&&e("span",{className:"mt-4 text-sm text-red-500",children:R.batchSize})]}),o("div",{className:"flex w-full flex-col sm:w-[200px]",children:[e("label",{htmlFor:"expirytime",className:"mb-1 text-gray-600",children:"Expiry"}),e(is,{id:"expirytime",onChange:lt,value:ae,format:"h:m:s a",maxDetail:"second",disableClock:!0,clearIcon:null,clockIcon:null,className:"custom-time-picker",disabled:xe}),R.expiryTime&&e("span",{className:"mt-1 text-sm text-red-500",children:R.expiryTime})]})]})}),e("div",{className:"my-4 flex w-full justify-end gap-4",children:e("button",{ref:w,onClick:ft,type:"button",className:`${(Ft=w.current)!=null&&Ft.disabled?"cursor-not-allowed opacity-50":"cursor-pointer"} rounded-md bg-[#304CB2] px-3 py-2 text-white focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400`,children:"Save Configuration"})})]})]})})},Cs="/api/SubscriptionAction/EditSubscription",Ao={updateSubsciptionData:(t,s,n)=>{const c=n?Cs+`?subscriptionId=${t}&tenantName=${n}`:Cs+`?subscriptionId=${t}`;return se.put(c,s)}},Po=()=>Te({mutationFn:({subscriptionId:t,body:s,tenantName:n})=>Ao.updateSubsciptionData(t,s,n),onSuccess:()=>(oe.success("Updated successfully"),!0),onError:t=>{var s;if(t.isAxiosError){const n=t;if(((s=n.response)==null?void 0:s.status)===409)return n;oe.error("Edit failed")}else oe.error("An unknown error occurred")}}),Io="/api/SubscriptionAction/GetEditData",Lo={getEditSubscriptionDetails:t=>se.get(Io,{params:{subscriptionId:t}})},Uo=(t,s)=>ye({queryKey:["geteditsubscriptiondata"],queryFn:()=>Lo.getEditSubscriptionDetails(t),enabled:!s}),Bo=({subscriptionId:t,editopen:s,setEditOpen:n,setSubscriptionIdToEdit:c,isEditSubmitted:a,setIsEditSubmitted:f,refetchSubscriptionList:h})=>{const m=sessionStorage.getItem("tenantName"),[F,b]=r.useState(s),[g,E]=r.useState(),{data:v,refetch:i,isLoading:k,isFetching:M}=Uo(t,t===null),[U,w]=r.useState(),{mutate:N}=Po();r.useEffect(()=>{t!==null&&(async()=>{try{await i(),w(v)}catch{}})()},[t,v,i]);const A=r.useCallback(async(W,O,P)=>new Promise((T,C)=>{N({body:W,subscriptionId:O,tenantName:P},{onSuccess:()=>{T(!0)},onError:S=>C(S)})}),[N]),R=r.useCallback(async()=>{var W;try{await A(g,t,m),c(null),f(!0),n(!1),h()}catch(O){((W=O==null?void 0:O.response)==null?void 0:W.status)===409&&ke.error("Configuration name already exists")}},[g,t,m,A,n,c,f,h]);return r.useEffect(()=>{a&&R()},[a,R]),e("div",{children:F&&e(Ys,{setIsEditSubmitted:f,setOptions:E,onClose:()=>b(!1),data:U,isEdit:!0,setEditOpen:n,isLoading:M||k})})},$o=({isOpen:t,onClose:s,onConfirm:n})=>{const[c,a]=r.useState(!1);return t?e("div",{id:"disable-modal",tabIndex:-1,"aria-hidden":"true",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e("div",{className:"relative w-full max-w-xl p-4",children:o("div",{className:"relative rounded-lg bg-white shadow",children:[e("div",{className:"mx-5 flex items-center justify-end pt-5",children:o("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400",onClick:s,children:[e("svg",{className:"h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e("span",{className:"sr-only",children:"Close modal"})]})}),e("div",{className:"p-5",children:e("h3",{className:"text-center text-xl font-semibold text-gray-900",children:"Are you sure you want to enable this item?"})}),o("div",{className:"flex items-center justify-center gap-4 px-5 pb-5",children:[e("button",{className:"rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500",onClick:s,children:"No"}),e("button",{className:"rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white",disabled:c,onClick:async()=>{a(!0);try{await n()}finally{a(!1)}},children:"Yes"})]})]})})}):null},Mo=()=>{const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(0),[c,a]=r.useState(100),[f,h]=r.useState(new Date().getTime()),[m,F]=r.useState(0),{data:b,isLoading:g,isFetching:E,error:v,refetch:i}=mo(s,c,t),[k,M]=r.useState(!1),[U,w]=r.useState(!1),[N,A]=r.useState(!1),[R,W]=r.useState(!1),[O,P]=r.useState(null),[T,C]=r.useState(null),[S,D]=r.useState(null),[$,K]=r.useState(null),[Z,L]=r.useState(!1),[_,V]=r.useState(!1),[j,I]=r.useState(!1),{mutate:ne}=po(),{mutate:d}=ao(),{mutate:X}=lo(),[Y,G]=r.useState(!1),[ie,me]=r.useState(!1),[Ne,pe]=r.useState(!1);if(r.useEffect(()=>{b!=null&&b.totalrecords&&F(b.totalrecords)},[b]),r.useEffect(()=>{(N||R)&&(W(!1),A(!1))},[N,R]),v)return e(Ue,{});const Se=p=>{const x=B[p-1].subscriptionId;K(x),w(!0)},Ee=p=>{P(p),L(!0),G(!1)},Ae=async()=>{if(O!==null)try{const p=await Q(O,t);P(null),i(),p&&F(x=>x-1)}catch{return}finally{L(!1)}},Q=async(p,x)=>new Promise((l,ee)=>{ne({subscriptionId:p,tenantName:x},{onSuccess:()=>{l(!0)},onError:u=>ee(u)})}),ae=p=>{const x=B[p-1].subscriptionId;C(x),V(!0),me(!1)},ve=async()=>{if(T!==null)try{await De(T),C(null),i()}catch{return}finally{V(!1)}},De=async p=>new Promise((x,l)=>{d(p,{onSuccess:()=>{x(!0)},onError:ee=>l(ee)})}),Ie=p=>{const x=B[p-1].subscriptionId;D(x),I(!0),pe(!1)},xe=p=>{const x=`1970-01-01T${p}`,l=$e(x);return St(l,"HH:mm:ss ")},Pe=async()=>{if(S!==null)try{await we(S),D(null),i()}catch{return}finally{I(!1)}},we=async p=>new Promise((x,l)=>{X(p,{onSuccess:()=>{x(!0)},onError:ee=>l(ee)})}),B=(b==null?void 0:b.subscriptions.map((p,x)=>({id:x+1,subscriptionId:p.subscriptionId,configurationName:p.configurationName,createdBy:p.createdBy,identifierCode:p.identifierCode,schedule:p.schedule,status:p.status,lastRun:p.lastRun===null?void 0:$e(p.lastRun),expiryDate:p.expiryDate?`${p.expiryDate.split("-")[1]}-${p.expiryDate.split("-")[2]}-${p.expiryDate.split("-")[0]}	${p.expiryTime?xe(p.expiryTime):""}`:void 0,batchSize:p.batchSize,isActive:p.isActive})))||[];return o("div",{className:"mt-4 px-7",children:[e(Me,{heading:"Subscription Configuration",rows:B,columns:[{field:"configurationName",headerName:"Configuration Name",flex:1,minWidth:320,renderCell:p=>{const x=p.value,l=(x==null?void 0:x.length)>75?`${x.substring(0,75)}...`:x;return e(Re,{truncatedString:l,fullString:x})}},{field:"createdBy",headerName:"Updated By",flex:1,minWidth:200},{field:"identifierCode",headerName:"File Identifier",flex:1,minWidth:200},{field:"schedule",headerName:"Schedule",flex:1,minWidth:200},{field:"status",headerName:"Status",flex:1,minWidth:200,renderCell:p=>{const x=p.row.status;let l="#4b5566";return x==="Completed"||x==="Forward Successful"||x==="Transformation Successful"||x==="Polling Successful"||x==="Renewal"?l="#36C5B4":x==="Forward Failed"||x==="Transformation Failed"||x==="Polling Failed"?l="#E61D1D":(x==="Forward Queued"||x==="Transformation Queued"||x==="Polling Queued")&&(l="#FC791A"),e("span",{style:{color:l},children:p.value})}},{field:"lastRun",headerName:"Last Run",flex:1,minWidth:200,renderCell:p=>{const x=p.row.status;let l="#4b5566";return x==="Completed"||x==="Forward Successful"||x==="Transformation Successful"||x==="Polling Successful"||x==="Renewal"?l="#36C5B4":x==="Forward Failed"||x==="Transformation Failed"||x==="Polling Failed"?l="#E61D1D":(x==="Forward Queued"||x==="Transformation Queued"||x==="Polling Queued")&&(l="#FC791A"),e("span",{style:{color:l},children:p.value})}},{field:"expiryDate",headerName:"Expiry",flex:1,minWidth:200},{field:"batchSize",headerName:"Batch Size",flex:1,minWidth:200},{field:"actions",headerName:"Actions",flex:1,minWidth:350,headerAlign:"center",align:"center",renderCell:p=>{const x=p.row.isActive,l=p.row.status;return o("div",{className:"my-1 flex items-center gap-4",children:[o("div",{"data-tooltip-id":"edit-tooltip","data-tooltip-content":x&&(l===null||l==="Renewal"||l==="Completed"||l==="Polling Successful"||l==="Forward Successful"||l==="Transformation Successful"||l==="Polling Failed"||l==="Forward Failed"||l==="Transformation Failed"||l==="Expired"||l==="Failed Expired")?"":"Enable to Edit",className:`inline-flex h-9 items-center gap-[7px] rounded-md bg-indigo-100 px-3 text-[#172B4D] ${x&&(l===null||l==="Renewal"||l==="Completed"||l==="Polling Successful"||l==="Forward Successful"||l==="Transformation Successful"||l==="Polling Failed"||l==="Forward Failed"||l==="Transformation Failed"||l==="Expired"||l==="Failed Expired")?"cursor-pointer":"cursor-not-allowed opacity-50"}`,onClick:()=>{x&&(l===null||l==="Renewal"||l==="Completed"||l==="Polling Successful"||l==="Forward Successful"||l==="Transformation Successful"||l==="Polling Failed"||l==="Forward Failed"||l==="Transformation Failed"||l==="Expired"||l==="Failed Expired")&&Se(p.row.id)},role:"button",tabIndex:0,onKeyDown:ee=>{(ee.key==="Enter"||ee.key===" ")&&x&&(l===null||l==="Renewal"||l==="Completed"||l==="Polling Successful"||l==="Forward Successful"||l==="Transformation Successful"||l==="Polling Failed"||l==="Forward Failed"||l==="Transformation Failed"||l==="Expired"||l==="Failed Expired")&&Se(p.row.id)},children:[e(tt,{id:"edit-tooltip",style:{maxWidth:"200px",height:"auto",borderRadius:"8px",backgroundColor:"#4f4f4f",color:"#fff",fontSize:"12px"}}),e("i",{className:"fa-solid fa-pen"})," ",e("div",{className:"opacity-80",children:"Edit"})]}),o("div",{"data-tooltip-id":"edit-tooltip","data-tooltip-content":x&&(l===null||l==="Renewal"||l==="Completed"||l==="Polling Successful"||l==="Forward Successful"||l==="Transformation Successful"||l==="Polling Failed"||l==="Forward Failed"||l==="Transformation Failed"||l==="Expired"||l==="Failed Expired")?"":"Enable to Delete",className:`inline-flex h-9 items-center gap-[7px] rounded-md bg-indigo-100 px-3 text-[#172B4D] ${x&&(l===null||l==="Renewal"||l==="Completed"||l==="Polling Successful"||l==="Forward Successful"||l==="Transformation Successful"||l==="Polling Failed"||l==="Forward Failed"||l==="Transformation Failed"||l==="Expired"||l==="Failed Expired")?"cursor-pointer":"cursor-not-allowed opacity-50"}`,onClick:()=>{x&&(l===null||l==="Renewal"||l==="Completed"||l==="Polling Successful"||l==="Forward Successful"||l==="Transformation Successful"||l==="Polling Failed"||l==="Forward Failed"||l==="Transformation Failed"||l==="Expired"||l==="Failed Expired")&&!Y&&(G(!0),Ee(p.row.subscriptionId))},role:"button",tabIndex:0,onKeyDown:ee=>{(ee.key==="Enter"||ee.key===" ")&&x&&(l===null||l==="Renewal"||l==="Completed"||l==="Expired"||l==="Failed Expired")&&!Y&&(G(!0),Ee(p.row.subscriptionId))},children:[e("img",{className:"h-[23px] w-[23px]",src:"/assets/imgs/delete_trash_icon.svg",alt:"trash-icon"}),e("div",{className:"opacity-80",children:"Delete"})]}),x?o("div",{className:`inline-flex h-9 items-center gap-[7px] rounded-md bg-indigo-100 px-3 text-[#172B4D] ${x&&(l===null||l==="Renewal"||l==="Completed"||l==="Polling Successful"||l==="Forward Successful"||l==="Transformation Successful"||l==="Polling Failed"||l==="Forward Failed"||l==="Transformation Failed")?"cursor-pointer":"cursor-not-allowed opacity-50"}`,onClick:()=>{x&&(l===null||l==="Renewal"||l==="Completed"||l==="Polling Successful"||l==="Forward Successful"||l==="Transformation Successful"||l==="Polling Failed"||l==="Forward Failed"||l==="Transformation Failed")&&!ie&&(me(!0),ae(p.row.id))},role:"button",tabIndex:0,onKeyDown:ee=>{(ee.key==="Enter"||ee.key===" ")&&x&&(l===null||l==="Renewal"||l==="Completed"||l==="Polling Successful"||l==="Forward Successful"||l==="Transformation Successful"||l==="Polling Failed"||l==="Forward Failed"||l==="Transformation Failed")&&!ie&&(me(!0),ae(p.row.id))},children:[e("i",{className:"fa-solid fa-ban text-red-600"})," ",e("div",{className:"opacity-80",children:"Disable"})]}):o("div",{className:`mt-2 inline-flex h-9 items-center gap-[7px] rounded-md bg-indigo-100 px-3 text-[#172B4D] ${x?"cursor-not-allowed opacity-50":"cursor-pointer"}`,onClick:()=>{Ne||(pe(!0),Ie(p.row.id))},role:"button",tabIndex:0,onKeyDown:ee=>{(ee.key==="Enter"||ee.key===" ")&&!Ne&&(pe(!0),Ie(p.row.id))},children:[e("img",{src:"/assets/imgs/accept-check-good-mark-ok-tick-svgrepo-com.svg",className:"h-4 w-4",alt:"Enable"}),e("div",{className:"opacity-80",children:"Enable"})]}),e(tt,{id:"delete-tooltip",style:{maxWidth:"200px",height:"auto",borderRadius:"8px",backgroundColor:"#4f4f4f",color:"#fff",fontSize:"12px"}})]})}}],buttonText:"Add New",buttonLink:"#",buttonShow:!0,pageSize:c,setSkip:n,totalCount:m,setSkipTrigger:h,setPageSize:a,nav:e(bt,{}),isButtonDisabled:!1,showSearch:!0,showDatePicker:!1,handleButtonClick:()=>M(!0),navReports:void 0,setStartDate:()=>{},setEndDate:()=>{},hideFooter:!1,isLoading:g||E}),k&&e(Ys,{onClose:()=>M(!1),data:void 0,isEdit:!1,setEditOpen:function(){throw new Error("Function not implemented.")},setOptions:function(){throw new Error("Function not implemented.")},setIsAddSubmitted:W,refetch:i}),U&&e(Bo,{subscriptionId:$,setSubscriptionIdToEdit:K,editopen:U,setEditOpen:w,options:{subscriptionName:"",identiferCode:"",scheduleType:0,description:"",invokeTime:"",monthlyDate:"",expiryDate:"",batchSize:0,weeklyDay:0,services:[]},isEditSubmitted:N,setIsEditSubmitted:A,refetchSubscriptionList:i}),e(xt,{isOpen:Z,onClose:()=>L(!1),onConfirm:Ae}),e(ho,{isOpen:_,onClose:()=>V(!1),onConfirm:ve}),e($o,{isOpen:j,onClose:()=>I(!1),onConfirm:Pe})]})},ks="api/Configuration/AddUser",Oo={addConfigUser:(t,s)=>{const n=s?ks+`?tenantName=${s}`:ks;return se.post(n,t)}},qo=()=>Te({mutationFn:({body:t,tenantName:s})=>Oo.addConfigUser(t,s),onSuccess:()=>{oe.success("Created successfully")},onError:()=>{oe.error("Create failed")}}),Es="api/Configuration/EditUserService",zo={updateCognitoUser:(t,s)=>{const n=s?Es+`?tenantName=${s}`:Es;return se.put(n,t)}},Wo=()=>Te({mutationFn:({body:t,tenantName:s})=>zo.updateCognitoUser(t,s),onSuccess:()=>{oe.success("Updated successfully")},onError:t=>{oe.error("Update failed")}}),_o="api/Configuration/RemoveUser",jo={deleteUser:(t,s)=>se.delete(_o,{params:{userid:t,tenantName:s}})},Go=()=>Te({mutationFn:({userid:t,tenantName:s})=>jo.deleteUser(t,s),onSuccess:()=>{oe.success("Deleted successfully")},onError:()=>{oe.error("Delete failed")}}),Ko=({isOpen:t,onClose:s,onSubmit:n,serviceOptions:c})=>{const[a,f]=r.useState(""),[h,m]=r.useState(""),[F,b]=r.useState([]),[g,E]=r.useState(""),[v,i]=r.useState(""),[k,M]=r.useState(""),U=N=>{b(A=>A.includes(N)?A.filter(R=>R!==N):[...A,N])},w=()=>{let N=!0;if(a.trim()===""?(E("Username is required"),N=!1):E(""),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)?i(""):(i("Please enter a valid email address"),N=!1),F.length===0?(M("You must select atleast one service"),N=!1):M(""),N){const R=O=>{switch(O){case"Data Transformation":return 1;case"Data Forwarding":return 2;case"Data Polling":return 3;default:return}},W=F.map(O=>R(O)).filter(O=>O!==void 0);if(W.length===0){console.error("No valid service IDs found.");return}n(a,h,W),f(""),m(""),b([]),s()}else console.error("Please fill in all fields and select at least one service.")};return t?e("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-400 bg-opacity-50",children:o("div",{className:"relative w-full max-w-lg rounded-lg bg-white p-4 shadow-lg",children:[o("div",{className:"mx-5 flex items-center justify-between py-5",children:[e("h3",{className:"text-xl font-semibold text-gray-900",children:"Add User"}),o("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onClick:s,children:[e("svg",{className:"h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e("span",{className:"sr-only",children:"Close modal"})]})]}),o("div",{className:"p-5",children:[e("p",{className:"text-sm leading-relaxed text-gray-800",children:"User Name"}),e("input",{type:"text",value:a,onChange:N=>f(N.target.value),placeholder:"",maxLength:100,className:"mt-2 w-full rounded-md border border-gray-300 p-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),g&&e("p",{className:"mt-1 text-sm text-red-500",children:g}),e("p",{className:"mt-4 text-sm leading-relaxed text-gray-800",children:"Email ID"}),e("input",{type:"email",value:h,onChange:N=>m(N.target.value),placeholder:"",maxLength:100,className:"mt-2 w-full rounded-md border border-gray-300 p-2 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400"}),v&&e("p",{className:"mt-1 text-sm text-red-500",children:v}),e("p",{className:"mt-4 text-sm leading-relaxed text-gray-800",children:"Services"}),e("div",{className:"mt-4 flex flex-row gap-5",children:c.map(N=>o("div",{className:"flex items-center",children:[e("input",{id:N.id,type:"checkbox",className:"focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",checked:F.includes(N.id),onChange:()=>U(N.id)}),e("label",{htmlFor:N.id,className:"flex cursor-pointer items-center",children:e("span",{className:"text-md px-1 font-medium text-gray-900",children:N.label})})]},N.id))}),k&&e("p",{className:"mt-1 text-sm text-red-500",children:k})]}),o("div",{className:"mt-4 flex items-center justify-end gap-4 px-5 pb-5",children:[e("button",{className:"rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500 focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onClick:s,children:"Cancel"}),e("button",{className:"rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",onClick:w,children:"Send Invitation"})]})]})}):null},Fs=[{id:"Data Transformation",label:"Data Transform"},{id:"Data Forwarding",label:"Data Forwarding"},{id:"Data Polling",label:"Data Polling"}],Ho=({isOpen:t,onClose:s,onSave:n,title:c,clientAdminServices:a,initialServices:f,userRole:h})=>{var M;console.log("initialServices:",f),console.log("services:",a);const[m,F]=r.useState(f),[b,g]=r.useState(""),E=r.useRef(null),v=h===3?Fs:Fs.filter(U=>a.some(w=>w.id===U.id));if(r.useEffect(()=>{F(f)},[t,f]),!t)return null;const i=U=>{F(w=>w.includes(U)?w.filter(N=>N!==U):[...w,U])},k=()=>{E.current&&(E.current.disabled=!0),m.length>=1?n(m):g("You must select atleast one service"),E.current&&(E.current.disabled=!1)};return e("div",{id:"edit-modal",className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e("div",{className:"relative w-full max-w-xl p-4",children:o("div",{className:"relative rounded-lg bg-white shadow",children:[o("div",{className:"mx-5 flex items-center justify-between py-5",children:[e("h3",{className:"text-xl font-semibold text-gray-900",children:c}),o("button",{type:"button",className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400",onClick:s,children:[e("svg",{className:"h-3 w-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e("span",{className:"sr-only",children:"Close modal"})]})]}),o("div",{className:"p-5",children:[e("p",{className:"text-sm leading-relaxed text-gray-800",children:"Services"}),e("div",{className:"mt-4 flex flex-row gap-3",children:v.map(U=>o("div",{className:"flex items-center",children:[e("input",{checked:m.includes(U.id),id:U.id,type:"checkbox",value:U.id,name:"service-checkbox",onChange:()=>i(U.id),className:"h-4 w-4 border-gray-300 bg-gray-100 text-blue-600"}),e("label",{htmlFor:U.id,className:"ms-2 text-sm font-medium text-gray-900",children:U.label})]},U.id))}),b&&e("p",{className:"mt-3 text-xs text-red-500",children:b})]}),o("div",{className:"flex items-center justify-end gap-4 px-5 pb-5",children:[e("button",{className:"mt-4 rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500",onClick:s,children:"Cancel"}),e("button",{ref:E,className:`${(M=E.current)!=null&&M.disabled?"cursor-not-allowed opacity-50":"cursor-pointer"} mt-4 rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white`,onClick:k,children:"Save"})]})]})})})},Ds=()=>{var j;const t=sessionStorage.getItem("tenantName"),s=Ke(),{data:n,isLoading:c,isFetching:a,error:f,refetch:h}=Ht(t),[m,F]=r.useState([]),[b,g]=r.useState([]),[E,v]=r.useState(!1),[i,k]=r.useState(!1),[M,U]=r.useState(!1),[w,N]=r.useState(null),[A,R]=r.useState(),{mutate:W}=qo(),{mutate:O}=Wo(),{mutate:P}=Go(),T=sessionStorage.getItem("userRole");if(r.useEffect(()=>{if(n&&Array.isArray(n)){const I=n.map((d,X)=>({id:X+1,userid:d.userid,role:d==null?void 0:d.role,username:d.username,email:d.email,services:d.services.map(Y=>Y.toString()),status:d.status}));F(I),C(I);const ne=I.filter(d=>(d==null?void 0:d.role)===1).flatMap(d=>d.services).map(d=>({id:d,label:S(d)}));g(ne)}else n&&console.error("Expected data to be an array but got:",n)},[n]),f)return e(Ue,{});const C=I=>{var X;const ne=s.fullEmail,d=(X=I==null?void 0:I.find(Y=>Y.email===ne))==null?void 0:X.role;R(d)},S=I=>{switch(I){case"Data Transformation":return"Data Transform";case"Data Forwarding":return"Data Forward";case"Data Polling":return"Data Polling";default:return I}},D=I=>{const ne=m[I-1].userid;N(ne),v(!0)},$=I=>{const ne=m[I-1].userid;N(ne),U(!0)},K=()=>{if(w!==null)try{P({userid:w,tenantName:t}),N(null)}catch(I){console.error("Failed to remove user:",I)}U(!1),setTimeout(()=>{h().catch(I=>{console.error("Failed to remove data:",I)})},2500)},Z=I=>{if(w===null)return;const ne=Y=>Y==="Data Transformation"?1:Y==="Data Forwarding"?2:Y==="Data Polling"?3:void 0,X=I.map(Y=>ne(Y)).filter(Y=>Y!==void 0);try{O({body:{userid:w,services:X},tenantName:t}),F(G=>G.map(ie=>ie.id===w?{...ie,services:I}:ie)),setTimeout(()=>{h().catch(G=>{console.error("Failed to edit data:",G)})},1e3),N(null)}catch(Y){console.error("Failed to update user services:",Y)}finally{v(!1)}},L=async(I,ne,d)=>{const X={name:I,email:ne,services:d};try{const Y=await _(X,t);console.log("Response:",Y),Y?(k(!1),h().catch(G=>{console.error("Failed to remove data:",G)})):console.log("Failed: Returned false or some other value")}catch(Y){console.error("Error:",Y)}},_=async(I,ne)=>new Promise((d,X)=>{W({body:I,tenantName:ne},{onSuccess:()=>{d(!0)},onError:Y=>X(Y)})}),V=[{field:"id",headerName:"Sl No.",flex:1,minWidth:200},{field:"name",headerName:"User Name",flex:1,minWidth:200},{field:"email",headerName:"Email ID",flex:1,minWidth:250},{field:"services",headerName:"Services",flex:1,minWidth:430,renderCell:I=>e("div",{className:"overflow-x mb-4 flex items-center gap-2",children:Array.isArray(I.value)&&I.value.map(ne=>e("div",{className:"mt-2 inline-flex h-9 items-center rounded-md border px-3 text-center",children:ne},ne))})},{field:"status",headerName:"Status",flex:1,minWidth:200,renderCell:I=>{const ne=I.value;return o("div",{className:`flex items-center ${ne?"text-[#E61D1D]":"text-[#36C5B4]"}`,children:[e("div",{className:`mr-2 h-1.5 w-1.5 rounded-full ${ne?"bg-[#E61D1D]":"bg-[#36C5B4]"}`}),ne?"Inactive":"Active"]})},filterOperators:as},{field:"actions",headerName:"Actions",flex:1,minWidth:260,renderCell:I=>{var Y,G,ie;const X=I.row.status;return o("div",{className:"my-1 flex items-center gap-4",children:[o("div",{className:`inline-flex h-9 items-center gap-3 rounded-md bg-indigo-100 px-3 text-blue-800 ${X||((Y=m[I.id-1])==null?void 0:Y.role)===1&&T!=="3"?"cursor-not-allowed opacity-50":"cursor-pointer"}`,onClick:()=>{var me;(!X&&((me=m[I.id-1])==null?void 0:me.role)!==1||!X&&t)&&D(I.id)},role:"button",tabIndex:0,onKeyDown:me=>{!X&&(me.key==="Enter"||me.key===" ")&&D(I.id)},children:[e("i",{className:"fa-solid fa-pen"})," Edit"]}),o("div",{className:`inline-flex h-9 items-center gap-3 rounded-md border border-red-100 bg-red-100 px-3 text-gray-700 ${X||((G=m[I.id-1])==null?void 0:G.role)===1&&T==="1"||((ie=m[I.id-1])==null?void 0:ie.role)===1&&T!=="3"?"cursor-not-allowed opacity-50":"cursor-pointer"}`,onClick:()=>{(!X&&m[I.id-1].role!==1||!X&&t||!X&&m[I.id-1].role===2)&&$(I.id)},role:"button",tabIndex:0,onKeyDown:me=>{!X&&(me.key==="Enter"||me.key===" ")&&$(I.id)},children:[e("i",{className:"fa-solid fa-trash text-red-600"})," Remove"]})]})}}];return console.log("users:",m),o("div",{className:"px-7 pt-4",children:[e(Me,{heading:"",rows:m.map(I=>({id:I.id,name:I.username,email:I.email,services:I.services,status:I.status}))||[],columns:V,buttonText:"Add New",buttonLink:"#",buttonShow:A===1||T==="3",setPageSize:I=>console.log("Page size set to:",I),pageSize:100,nav:e(bt,{}),isButtonDisabled:!0,handleButtonClick:()=>k(!0),showSearch:!0,showDatePicker:!1,navReports:void 0,setStartDate:function(){throw new Error("Function not implemented.")},setEndDate:function(){throw new Error("Function not implemented.")},totalCount:0,setSkip:function(){throw new Error("Function not implemented.")},setSkipTrigger:function(){throw new Error("Function not implemented.")},hideFooter:!0,isLoading:c||a}),E&&w!==null&&e(Ho,{isOpen:E,onClose:()=>v(!1),onSave:Z,title:"Edit Services",clientAdminServices:b,initialServices:((j=m.find(I=>m[I.id-1].userid===w))==null?void 0:j.services)||[],userRole:parseInt(T)}),i&&e(Ko,{isOpen:i,onClose:()=>k(!1),onSubmit:L,serviceOptions:b}),e(xt,{isOpen:M,onClose:()=>U(!1),onConfirm:K})]})},Qo="api/GetMethodForServices/GetDataForwarding",Yo={getDetails:(t,s,n)=>se.get(Qo,{params:{skip:t,take:s,tenantName:n}})},Jo=(t,s,n)=>ye({queryKey:["forwardingData"],queryFn:()=>Yo.getDetails(t,s,n)}),Xo=()=>{const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(0),[c,a]=r.useState(100),[f,h]=r.useState(new Date().getTime()),[m,F]=r.useState(0),[b,g]=r.useState(!1),{data:E,isFetching:v,error:i,refetch:k}=Jo(s,c,t);if(r.useEffect(()=>{(async()=>{var N;try{const A=await k(),R=(N=A==null?void 0:A.data)==null?void 0:N.totalRecord;F(R)}catch(A){console.error("Error re-fetching data:",A)}})()},[s,f,k]),r.useEffect(()=>{g(!!v)},[v]),i)return e(Ue,{});const M=E==null?void 0:E.dataForwarding.map((w,N)=>({id:N+1,name:w.configurationName,createdby:w.createdBy,fileIdentifer:w.fileIdentifer,fileTransfered:w.fileTransfered,runningStatus:w.isRunning,lastRun:w.lastRun===null?"":$e(w.lastRun),protocol:w.protocol,server:w.server}));return e("div",{className:"px-7",children:e(Me,{heading:"Forwarded Data",rows:M,columns:[{field:"name",headerName:"Configuration Name",flex:1,minWidth:200,renderCell:w=>{const N=w.value,A=(N==null?void 0:N.length)>75?`${N.substring(0,75)}...`:N;return e(Re,{truncatedString:A,fullString:N})}},{field:"fileIdentifer",headerName:"File Identifier",flex:1,minWidth:150},{field:"createdby",headerName:"Updated By",flex:1,minWidth:150},{field:"protocol",headerName:"Protocol",flex:1,minWidth:150},{field:"server",headerName:"Server",flex:1,minWidth:150,renderCell:w=>{const N=w.value,A=(N==null?void 0:N.length)>75?`${N.substring(0,75)}...`:N;return e(Re,{truncatedString:A,fullString:N})}},{field:"fileTransfered",headerName:"Files Transferred",flex:1,minWidth:200},{field:"lastRun",headerName:"Last Run",flex:1,minWidth:150,renderCell:w=>{const R=w.row.runningStatus?"#36C5B4":"#E61D1D";return e("span",{style:{color:R},children:w.value})}}],buttonText:"",buttonLink:"",isButtonDisabled:!1,buttonShow:!1,pageSize:c,setSkip:n,totalCount:m,setSkipTrigger:h,setPageSize:a,nav:null,showSearch:!1,showDatePicker:!1,handleButtonClick:function(){throw new Error("Function not implemented.")},navReports:void 0,setStartDate:function(){throw new Error("Function not implemented.")},setEndDate:function(){throw new Error("Function not implemented.")},hideFooter:!1,isLoading:b})})},Zo="api/GetMethodForServices/GetDataPolling",Vo={getDetails:(t,s,n)=>se.get(Zo,{params:{skip:t,take:s,tenantName:n}})},ei=(t,s,n)=>ye({queryKey:["pollingData"],queryFn:()=>Vo.getDetails(t,s,n)}),ti=()=>{const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(0),[c,a]=r.useState(100),[f,h]=r.useState(new Date().getTime()),[m,F]=r.useState(0),[b,g]=r.useState(!1),{data:E,isFetching:v,error:i,refetch:k}=ei(s,c,t);if(r.useEffect(()=>{(async()=>{var N;try{const A=await k(),R=(N=A==null?void 0:A.data)==null?void 0:N.totalRecord;F(R)}catch(A){console.error("Error re-fetching data:",A)}})()},[s,f,k]),r.useEffect(()=>{g(!!v)},[v]),i)return e(Ue,{});const M=E==null?void 0:E.dataPollings.map((w,N)=>({id:N+1,name:w.configurationName,createdby:w.createdBy,fileTransfered:w.fileTransfered,runningStatus:w.isRunning,lastRun:w.lastRun===null?"":$e(w.lastRun),protocol:w.protocol,schedule:w.schedule,server:w.server}));return e("div",{className:"px-7",children:e(Me,{heading:"Data Polling",rows:M,columns:[{field:"name",headerName:"Configuration Name",flex:1,minWidth:200,renderCell:w=>{const N=w.value,A=(N==null?void 0:N.length)>75?`${N.substring(0,75)}...`:N;return e(Re,{truncatedString:A,fullString:N})}},{field:"createdby",headerName:"Updated By",flex:1,minWidth:200},{field:"protocol",headerName:"Protocol",flex:1,minWidth:200},{field:"server",headerName:"Server",flex:1,minWidth:200,renderCell:w=>{const N=w.value,A=(N==null?void 0:N.length)>75?`${N.substring(0,75)}...`:N;return e(Re,{truncatedString:A,fullString:N})}},{field:"fileTransfered",headerName:"Files Transferred",flex:1,minWidth:180},{field:"schedule",headerName:"Schedule",flex:1,minWidth:200},{field:"lastRun",headerName:"Last Run",flex:1,minWidth:200,renderCell:w=>{const R=w.row.runningStatus?"#36C5B4":"#E61D1D";return e("span",{style:{color:R},children:w.value})}}],buttonText:"",buttonLink:"",buttonShow:!1,isButtonDisabled:!1,pageSize:c,setSkip:n,totalCount:m,setSkipTrigger:h,setPageSize:a,nav:null,showSearch:!1,showDatePicker:!1,handleButtonClick:function(){throw new Error("Function not implemented.")},navReports:void 0,setStartDate:function(){throw new Error("Function not implemented.")},setEndDate:function(){throw new Error("Function not implemented.")},hideFooter:!1,isLoading:b})})},Ut=()=>{var F,b;const t=sessionStorage.getItem("tenantName"),s=sessionStorage.getItem("userRole"),n=Ke(),{data:c}=Ht(t),a=n.fullEmail,f=((F=c==null?void 0:c.find(g=>g.email===a))==null?void 0:F.services)||[],m=[{label:"Users List",path:"/datareports/userlist",imgActive:"/assets/imgs/active-users-list-icon.svg",imgInactive:"/assets/imgs/inactive-users-list-icon.svg",isDisabled:((b=c==null?void 0:c.find(g=>g.email===a))==null?void 0:b.role)===2&&s!=="3"},{label:"Activity Log",path:"/datareports/activitylog",imgActive:"/assets/imgs/active-activity-log-icon.svg",imgInactive:"/assets/imgs/inactive-activity-log-icon.svg",isDisabled:!1},{label:"Transformed Data",path:"/datareports/reportsdatatransformed",imgActive:"/assets/imgs/active-transformed-data-icon.svg",imgInactive:"/assets/imgs/inactive-transformed-data-icon.svg",isDisabled:!f.includes("Data Transformation")&&s!=="3"},{label:"Uploaded Data",path:"/datareports/reportsdatauploaded",imgActive:"/assets/imgs/active-uploaded-data-icon.svg",imgInactive:"/assets/imgs/inactive-uploaded-data-icon.svg",isDisabled:!1},{label:"Forwarded Data",path:"/datareports/reportsdataforwarded",imgActive:"/assets/imgs/active-data-forwarding-icon.svg",imgInactive:"/assets/imgs/inactive-data-forwarding-icon.svg",isDisabled:!f.includes("Data Forwarding")&&s!=="3"}];return e("div",{className:"relative mt-4",children:e("div",{className:"flex flex-wrap gap-x-4 gap-y-2 bg-transparent px-4 pt-8 md:px-8 lg:px-14",children:m.map((g,E)=>e($s,{button:g,index:E}))})})},si="api/Report/ExportActivityList",ri={getDetails:(t,s,n)=>se.get(si,{params:{FromDate:t,ToDate:s,tenantName:n}})},ni=(t,s,n)=>ye({queryKey:["reportExportActivityData"],queryFn:()=>ri.getDetails(t,s,n),enabled:!1}),ai="api/Report/GetActivityList",oi={getDetails:(t,s,n,c,a)=>se.get(ai,{params:{skip:t,take:s,FromDate:n,ToDate:c,tenantName:a}})},ii=(t,s,n,c,a)=>ye({queryKey:["reportActivityLog"],queryFn:()=>oi.getDetails(t,s,n,c,a)}),Js=()=>{var C;const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(0),[c,a]=r.useState(new Date().getTime()),[f,h]=r.useState(100),[m,F]=r.useState(""),[b,g]=r.useState(""),[E,v]=r.useState(0),[i,k]=r.useState(!1),{data:M,isFetching:U,error:w,refetch:N}=ii(s,f,m,b,t),{refetch:A}=ni(m,b,t);if(r.useEffect(()=>{(async()=>{var D;try{const $=await N(),K=(D=$==null?void 0:$.data)==null?void 0:D.totalRecords;v(K)}catch($){console.error("Error re-fetching data:",$)}})()},[s,c,m,b,N]),r.useEffect(()=>{k(!!U)},[U]),w)return e(Ue,{});const R=(C=M==null?void 0:M.activityReports)==null?void 0:C.map((S,D)=>({id:s+D+1,username:S.username,dateTime:$e(`${S.date} ${S.time}`),context:S.context,activity:S.activity,logLevel:S.logLevel})),W={"Update Forwarding Configuration":"/assets/imgs/update.svg","Update Polling Configuration":"/assets/imgs/update.svg","Update Template":"/assets/imgs/update.svg","Edit User Services by Admin":"/assets/imgs/edit.svg","Create Polling Configuration":"/assets/imgs/create.svg","Create Forwarding Configuration":"/assets/imgs/create.svg","Create User by Admin":"/assets/imgs/create.svg","Created Subscription Action":"/assets/imgs/create.svg","Update Subscription Action":"/assets/imgs/update.svg","Disabled Subscription":"/assets/imgs/disabled-white.svg","Enabled Subscription":"/assets/imgs/enable.svg","Transformation Complete":"/assets/imgs/enable.svg","File Downloaded":"/assets/imgs/enable.svg","Deleted Subscription":"/assets/imgs/delete.svg","Added New Blockly Configuration":"/assets/imgs/create.svg","Generated Script File":"/assets/imgs/create.svg","Create Template":"/assets/imgs/create.svg","File Uploaded":"/assets/imgs/horizontal-file.svg","File Polled":"/assets/imgs/horizontal-file.svg","File Forwarded":"/assets/imgs/horizontal-file.svg","Polling Started":"/assets/imgs/upload-polling.svg","Transformation Started":"/assets/imgs/upload-polling.svg","Forwarding Started":"/assets/imgs/upload1.svg","Delete Polling Configuration":"/assets/imgs/delete.svg","Delete Forwarding Configuration":"/assets/imgs/delete.svg","Remove User by Admin":"/assets/imgs/delete.svg","File Deleted":"/assets/imgs/delete.svg","File Deleted from S3":"/assets/imgs/delete.svg","File Deleted from HAPI":"/assets/imgs/delete.svg","Remove Blockly Configuration":"/assets/imgs/delete.svg","Delete Template":"/assets/imgs/delete.svg","Forwarding Failure":"/assets/imgs/failure.svg","Polling Failure":"/assets/imgs/failure.svg","Transformation Failure":"/assets/imgs/failure.svg","Transformation Error":"/assets/imgs/failure.svg","Transformation Failed":"/assets/imgs/failure.svg"},O={Error:{circleColor:"bg-[#E61D1D]",fontColor:"text-[#E61D1D]"},Info:{circleColor:"bg-[#1e40af]",fontColor:"text-[#1e40af]"},Warning:{circleColor:"bg-[#FC791A]",fontColor:"text-[#FC791A]"}};return e("div",{className:"px-7",children:e(Me,{heading:"Activity Log",rows:R,columns:[{field:"username",headerName:"User Name",flex:1,minWidth:200},{field:"dateTime",headerName:"Date Time",flex:1,minWidth:200},{field:"logLevel",headerName:"Type",flex:1,minWidth:200,renderCell:S=>{const $=S.row.logLevel,{circleColor:K,fontColor:Z}=O[$]||O.Warning;return o("div",{className:`flex items-center ${Z}`,children:[e("div",{className:`mr-2 h-1.5 w-1.5 rounded-full ${K}`}),S.value]})}},{field:"activity",headerName:"Activity",headerAlign:"left",flex:1,minWidth:350,renderCell:S=>{const $=S.row.activity,K=W[$]||"";return o("div",{className:"flex items-center",children:[K&&e("img",{className:"mr-[30px] h-[35px] w-[35px]",src:K,alt:""}),e("span",{children:$})]})}},{field:"context",headerName:"Context",flex:1,minWidth:350,renderCell:S=>{const D=S.value,$=(D==null?void 0:D.length)>75?`${D.substring(0,75)}...`:D;return e(Re,{truncatedString:$,fullString:D})}}],totalCount:E,showSearch:!0,showDatePicker:!0,isButtonDisabled:!1,buttonText:"Export",buttonLink:"",handleButtonClick:async()=>{try{const S=await A(),D=S==null?void 0:S.data;typeof D=="string"&&Lt(D,"activity-logs.csv")}catch(S){console.error("Error exporting data:",S)}},buttonShow:!0,setSkip:n,setSkipTrigger:a,pageSize:f,setPageSize:h,nav:null,navReports:e(Ut,{}),setStartDate:F,setEndDate:g,hideFooter:!1,isLoading:i})})},li="api/Report/ExportForwardedReport",ci={getDetails:(t,s,n)=>se.get(li,{params:{FromDate:t,ToDate:s,tenantName:n}})},di=(t,s,n)=>ye({queryKey:["reportExportForwardingData"],queryFn:()=>ci.getDetails(t,s,n),enabled:!1}),ui="api/Report/ForwardedReport",mi={getDetails:(t,s,n,c,a)=>se.get(ui,{params:{skip:t,take:s,FromDate:n,ToDate:c,tenantName:a}})},fi=(t,s,n,c,a)=>ye({queryKey:["reportForwardingData"],queryFn:()=>mi.getDetails(t,s,n,c,a)}),Xs=()=>{var P;const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(0),[c,a]=r.useState(100),[f,h]=r.useState(""),[m,F]=r.useState(""),[b,g]=r.useState(0),[E,v]=r.useState(new Date().getTime()),[i,k]=r.useState(!1),{data:M,isFetching:U,error:w,refetch:N}=fi(s,c,f,m,t),{refetch:A}=di(f,m,t);if(r.useEffect(()=>{(async()=>{var C;try{const S=await N(),D=(C=S==null?void 0:S.data)==null?void 0:C.totalRecord;g(D)}catch(S){console.error("Error re-fetching data:",S)}})()},[s,E,f,m,N]),r.useEffect(()=>{k(!!U)},[U]),w)return e(Ue,{});const R=(P=M==null?void 0:M.forwardedReports)==null?void 0:P.map((T,C)=>({id:s+C+1,username:T.username,filename:T.filename,forwardedDate:T.forwardedDate===null?"":$e(T.forwardedDate),method:T.method,forwardedlocation:T.forwardedlocation}));return e("div",{className:"px-7",children:e(Me,{heading:"Forwarded Data",rows:R,columns:[{field:"id",headerName:"Sl.No",flex:1,minWidth:200},{field:"username",headerName:"User Name",flex:1,minWidth:200},{field:"filename",headerName:"File Name",flex:1,minWidth:200,renderCell:T=>{const C=T.value,S=(C==null?void 0:C.length)>75?`${C.substring(0,75)}...`:C;return e(Re,{truncatedString:S,fullString:C})}},{field:"forwardedDate",headerName:"Forwarded Date",flex:1,minWidth:200},{field:"method",headerName:"Forwarded Method",flex:1,minWidth:200},{field:"forwardedlocation",headerName:"Forwarded Location",flex:1,minWidth:200}],totalCount:b,showSearch:!0,showDatePicker:!0,isButtonDisabled:!1,buttonText:"Export",buttonLink:"",handleButtonClick:async()=>{try{const T=await A(),C=T==null?void 0:T.data;typeof C=="string"&&Lt(C,"forwarded-data.csv")}catch(T){console.error("Error exporting data:",T)}},buttonShow:!0,setSkip:n,pageSize:c,setPageSize:a,nav:null,setSkipTrigger:v,navReports:e(Ut,{}),setStartDate:h,setEndDate:F,hideFooter:!1,isLoading:i})})},gi="api/Report/ExportTransformReport",pi={getDetails:(t,s,n)=>se.get(gi,{params:{FromDate:t,ToDate:s,tenantName:n}})},hi=(t,s,n)=>ye({queryKey:["reportTransformationDataExport"],queryFn:()=>pi.getDetails(t,s,n),enabled:!1}),bi="api/Report/TransformReport",xi={getDetails:(t,s,n,c,a)=>se.get(bi,{params:{skip:t,take:s,FromDate:n,ToDate:c,tenantName:a}})},yi=(t,s,n,c,a)=>ye({queryKey:["reportTransformedData"],queryFn:()=>xi.getDetails(t,s,n,c,a)}),Zs=()=>{var P;const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(0),[c,a]=r.useState(100),[f,h]=r.useState(new Date().getTime()),[m,F]=r.useState(""),[b,g]=r.useState(""),[E,v]=r.useState(0),[i,k]=r.useState(!1),{data:M,isFetching:U,error:w,refetch:N}=yi(s,c,m,b,t),{refetch:A}=hi(m,b,t);if(r.useEffect(()=>{(async()=>{var C;try{const S=await N(),D=(C=S==null?void 0:S.data)==null?void 0:C.totalRecord;v(D)}catch(S){console.error("Error re-fetching data:",S)}})()},[s,f,m,b,N]),r.useEffect(()=>{k(!!U)},[U]),w)return e(Ue,{});const R=(P=M==null?void 0:M.transformReports)==null?void 0:P.map((T,C)=>({id:C+1,username:T.username,filename:T.filename,transformedDate:T.transformedDate===null?"":$e(T.transformedDate),templateVersion:T.templateVersion}));return e("div",{className:"px-7",children:e(Me,{heading:"Transformed Data",rows:R,columns:[{field:"id",headerName:"Sl.No",flex:.3,minWidth:150},{field:"username",headerName:"User Name",flex:.5,minWidth:180},{field:"filename",headerName:"File Name",flex:1,minWidth:200,renderCell:T=>{const C=T.value,S=T.row.templateVersion,D=S==="Default_template"?"Default_template":S!==null||S!==""?ss(S):"",$=D?C+" ("+D+")":C,K=($==null?void 0:$.length)>75?`${$.substring(0,75)}...`:$;return e(Re,{truncatedString:K,fullString:$})}},{field:"transformedDate",headerName:"Transformed Date",flex:.5,minWidth:180}],totalCount:E,showSearch:!0,showDatePicker:!0,isButtonDisabled:!1,buttonText:"Export",buttonLink:"",handleButtonClick:async()=>{try{const T=await A(),C=T==null?void 0:T.data;typeof C=="string"&&Lt(C,"transformed-data.csv")}catch(T){console.error("Error exporting data:",T)}},buttonShow:!0,setSkip:n,setSkipTrigger:h,pageSize:c,setPageSize:a,nav:null,navReports:e(Ut,{}),setStartDate:F,setEndDate:g,hideFooter:!1,isLoading:i})})},vi="api/Report/ExportUploadsReport",wi={getDetails:(t,s,n)=>se.get(vi,{params:{FromDate:t,ToDate:s,tenantName:n}})},Ni=(t,s,n)=>ye({queryKey:["reportExportUploadedData"],queryFn:()=>wi.getDetails(t,s,n),enabled:!1}),Si="api/Report/UploadsReport",Ci={getDetails:(t,s,n,c,a)=>se.get(Si,{params:{skip:t,take:s,FromDate:n,ToDate:c,tenantName:a}})},ki=(t,s,n,c,a)=>ye({queryKey:["reportUploadedData"],queryFn:()=>Ci.getDetails(t,s,n,c,a)}),Vs=()=>{var P;const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(100),[c,a]=r.useState(new Date().getTime()),[f,h]=r.useState(""),[m,F]=r.useState(""),[b,g]=r.useState(0),[E,v]=r.useState(0),[i,k]=r.useState(!1),{data:M,isFetching:U,error:w,refetch:N}=ki(b,s,f,m,t),{refetch:A}=Ni(f,m,t);if(r.useEffect(()=>{(async()=>{var C;try{const S=await N(),D=(C=S==null?void 0:S.data)==null?void 0:C.totalCount;v(D)}catch(S){console.error("Error re-fetching data:",S)}})()},[b,c,f,m,N,A]),r.useEffect(()=>{k(!!U)},[U]),w)return e(Ue,{});const R=(P=M==null?void 0:M.uploadsReport)==null?void 0:P.map((T,C)=>({id:b+C+1,username:T.username,filename:T.filename,methodName:T.methodName,pollingLocation:T.pollingLocation,uploadeddate:T.uploadeddate===null?"":$e(T.uploadeddate)}));return e("div",{className:"px-7",children:e(Me,{heading:"Uploaded Data",rows:R,columns:[{field:"id",headerName:"Sl.No",flex:1,minWidth:200},{field:"username",headerName:"User Name",flex:1,minWidth:200},{field:"filename",headerName:"File Name",flex:1,minWidth:200,renderCell:T=>{const C=T.value,S=(C==null?void 0:C.length)>75?`${C.substring(0,75)}...`:C;return e(Re,{truncatedString:S,fullString:C})}},{field:"methodName",headerName:"Polling Method",flex:1,minWidth:200},{field:"pollingLocation",headerName:"Polling Location",flex:1,minWidth:200},{field:"uploadeddate",headerName:"Uploaded Date",flex:1,minWidth:200}],totalCount:E,showSearch:!0,showDatePicker:!0,isButtonDisabled:!1,buttonText:"Export",buttonLink:"",handleButtonClick:async()=>{try{const T=await A(),C=T==null?void 0:T.data;typeof C=="string"&&Lt(C,"uploaded-data.csv")}catch(T){console.error("Error exporting data:",T)}},buttonShow:!0,setSkip:g,setSkipTrigger:a,pageSize:s,setPageSize:n,nav:null,navReports:e(Ut,{}),setStartDate:h,setEndDate:F,hideFooter:!1,isLoading:i})})},Ei="api/Report/ExportUserList",Fi={getDetails:t=>se.get(Ei,{params:{tenantName:t}})},Di=t=>ye({queryKey:["reportExportUsersData"],queryFn:()=>Fi.getDetails(t),enabled:!1}),Ri="api/Report/UsersReport",Ti={getDetails:t=>se.get(Ri,{params:{tenantName:t}})},Ai=t=>ye({queryKey:["reportUsersData"],queryFn:()=>Ti.getDetails(t)}),Vt=()=>{const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(100),[c,a]=r.useState(!1),{data:f,isFetching:h,error:m}=Ai(t),{refetch:F}=Di(t);if(r.useEffect(()=>{a(!!h)},[h]),m)return e(Ue,{});const b=f==null?void 0:f.map((v,i)=>({id:i+1,username:v.username,email:v.email,privillage:v.privillage,status:v.status}));return e("div",{className:"px-7",children:e(Me,{heading:"User List",rows:b,columns:[{field:"id",headerName:"Sl.No",flex:1,minWidth:200},{field:"username",headerName:"Username",flex:1,minWidth:200},{field:"email",headerName:"Email Id",flex:1,minWidth:250},{field:"status",headerName:"Status",flex:1,minWidth:200,renderCell:v=>{const i=v.value;return o("div",{className:`flex items-center ${i?"text-[#E61D1D]":"text-[#36C5B4]"}`,children:[e("div",{className:`mr-2 h-1.5 w-1.5 rounded-full ${i?"bg-[#E61D1D]":"bg-[#36C5B4]"}`}),i?"Inactive":"Active"]})},filterOperators:as},{field:"privillage",headerName:"Privileges",flex:2,minWidth:400}],showSearch:!1,showDatePicker:!1,buttonText:"Export",buttonLink:"",isButtonDisabled:!1,handleButtonClick:async()=>{try{const v=await F(),i=v==null?void 0:v.data;typeof i=="string"&&Lt(i,"userlist.csv")}catch(v){console.error("Error exporting data:",v)}},buttonShow:!0,pageSize:s,setPageSize:n,nav:null,navReports:e(Ut,{}),setStartDate:function(){throw new Error("Function not implemented.")},setEndDate:function(){throw new Error("Function not implemented.")},totalCount:0,hideFooter:!0,setSkip:function(){throw new Error("Function not implemented.")},setSkipTrigger:function(){throw new Error("Function not implemented.")},isLoading:c})})},Pi=()=>{const s=Pt().pathname.split("/").pop()||"userlist";return e(Tt,{children:(()=>{switch(s){case"userlist":return e(Vt,{});case"activitylog":return e(Js,{});case"reportsdatatransformed":return e(Zs,{});case"reportsdatauploaded":return e(Vs,{});case"reportsdataforwarded":return e(Xs,{});default:return e(Vt,{})}})()})},Ii="api/GetMethodForServices/GetDataTransformation",Li={getDetails:(t,s,n)=>se.get(Ii,{params:{skip:t,take:s,tenantName:n}})},Ui=(t,s,n)=>ye({queryKey:["transformationData"],queryFn:()=>Li.getDetails(t,s,n)}),Bi="api/HAPI/GetHapiResponse",$i={getDetails:t=>se.get(Bi,{params:{fileId:t}})},Mi=t=>ye({queryKey:["viewtransformJSON"],queryFn:()=>$i.getDetails(t)}),Oi=({open:t,onClose:s,fileId:n})=>{const{data:c,isFetching:a,isError:f,refetch:h}=Mi(n);return r.useEffect(()=>{h()},[n,h]),o(Wt,{open:t,onClose:s,fullWidth:!0,maxWidth:"md",children:[o(qt,{children:[e("span",{className:"text-2xl font-bold",children:"Transformed Data Details"}),e(pt,{onClick:s,"aria-label":"close",sx:{position:"absolute",right:8,top:8,color:m=>m.palette.grey[500]},children:e(It,{})})]}),e("hr",{className:"mx-5 pb-2"}),e(zt,{className:"mx-5 mb-2 rounded-lg border-4 border-[#edf4fb] bg-gray-100 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-gray-400 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-400 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-neutral-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-300 [&::-webkit-scrollbar]:w-2",children:a||f||c?a?e("p",{className:"flex items-center justify-center",children:"Loading..."}):f?e("p",{className:"flex items-center justify-center",children:"Failed to load transformed data."}):e("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:JSON.stringify(c,null,2)}):null})]})},qi=()=>{const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(0),[c,a]=r.useState(100),[f,h]=r.useState(new Date().getTime()),[m,F]=r.useState(0),[b,g]=r.useState(!1),E={4:{color:"#36C5B4",text:"Transformation Successful"},5:{color:"#FC791A",text:"Transformation Queued"},6:{color:"#E61D1D",text:"Transformation Failed"}},{data:v,isFetching:i,error:k,refetch:M}=Ui(s,c,t),[U,w]=r.useState(),[N,A]=r.useState(!1),R=P=>{w(P),A(!0)};if(r.useEffect(()=>{(async()=>{var T;try{const C=await M(),S=(T=C==null?void 0:C.data)==null?void 0:T.totalRecords;F(S)}catch(C){console.error("Error re-fetching data:",C)}})()},[s,f,M]),r.useEffect(()=>{g(!!i)},[i]),k)return e(Ue,{});const W=v==null?void 0:v.dataTransforms.map(P=>{var T;return{id:P.fileId,name:P.fileName,fileSize:(P==null?void 0:P.fileSize)===null?"":((T=P==null?void 0:P.fileSize)==null?void 0:T.toFixed(1))+" Bytes",identifierCode:P.identifierCode,status:P.status,server:P.transformTool,uploadedBy:P.uploadedBy,uploadedDate:P.uploadedDate===null?"":$e(P.uploadedDate),templateVersion:P.templateVersion,templateName:P.templateName}});return o("div",{className:"px-7",children:[e(Me,{heading:"Transformed Data",rows:W,columns:[{field:"id",headerName:"File ID",flex:1},{field:"name",headerName:"File Name",flex:1,minWidth:280,renderCell:P=>{const T=P.value,C=P.row.templateVersion,S=P.row.templateName,D=C==="Default_template"?"Default_template":C!==null||C!==""?Jr(C):"",$=D?T+" ("+S+" - "+D+")":T,K=($==null?void 0:$.length)>75?`${$.substring(0,75)}...`:$;return e(Re,{truncatedString:K,fullString:$})}},{field:"identifierCode",headerName:"Identifier Code",flex:1},{field:"uploadedBy",headerName:"Uploader",flex:1},{field:"uploadedDate",headerName:"Transformed At",flex:1,minWidth:200},{field:"fileSize",headerName:"File Size",flex:1},{field:"server",headerName:"Transform Tool",flex:1},{field:"status",headerName:"Status",minWidth:230,renderCell:P=>{const T=P.value,{color:C="#4b5566",text:S="No Action Found"}=E[T]||{};return o("div",{style:{alignItems:"center",color:C},children:[e("span",{style:{height:"8px",width:"8px",backgroundColor:C,borderRadius:"50%",display:"inline-block",marginRight:"8px"}}),S]})}},{field:"action",headerName:"Actions",flex:1,minWidth:150,renderCell:P=>o("div",{className:"my-1 inline-flex h-9 items-center gap-2 rounded-md bg-indigo-100 px-3 text-blue-800",onClick:()=>R(P.row),role:"button",tabIndex:0,onKeyDown:T=>{(T.key==="Enter"||T.key===" ")&&R(P.row)},children:[e("i",{className:"fa-solid fa-eye"}),"View"]})}],buttonText:"",buttonLink:"",buttonShow:!1,pageSize:c,setSkip:n,totalCount:m,setSkipTrigger:h,setPageSize:a,nav:null,isButtonDisabled:!1,showSearch:!1,showDatePicker:!1,handleButtonClick:function(){throw new Error("Function not implemented.")},navReports:void 0,setStartDate:function(){throw new Error("Function not implemented.")},setEndDate:function(){throw new Error("Function not implemented.")},hideFooter:!1,isLoading:b}),U&&e(Oi,{open:N,onClose:()=>A(!1),fileId:U.id})]})},zi="api/GetMethodForServices/GetDataUpload",Wi={getDetails:(t,s,n)=>se.get(zi,{params:{skip:t,take:s,tenantName:n}})},_i=(t,s,n)=>ye({queryKey:["dataUploads"],queryFn:()=>Wi.getDetails(t,s,n)}),ji="/api/GetMethodForServices/DeleteUploadFile",Gi={deleteUpload:(t,s)=>se.delete(ji,{params:{fileId:t,tenantName:s}})},Ki=()=>Te({mutationFn:({fileId:t,tenantName:s})=>Gi.deleteUpload(t,s),onSuccess:()=>{oe.success("Deleted successfully")},onError:()=>{oe.error("Delete failed")}});const Hi=({data:t})=>{const s=t==null?void 0:t.map((c,a)=>({id:a+1,statusName:c==null?void 0:c.statusName,loglevel:c==null?void 0:c.loglevel,date:(c==null?void 0:c.date)===null?"":$e(c==null?void 0:c.date)}));return e(xr,{autoHeight:!0,rows:s,columns:[{field:"statusName",headerName:"Status",flex:1,headerClassName:"table-header-style"},{field:"loglevel",headerName:"Log Level",flex:.6,headerClassName:"table-header-style",renderCell:c=>{let a="";switch(c.value){case 1:a="Info";break;case 2:a="Warning";break;case 3:a="Error";break;default:a=""}return e("span",{children:a})}},{field:"date",headerName:"Date",flex:.8,headerClassName:"table-header-style"}],getRowClassName:c=>c.indexRelativeToCurrentPage%2===0?"Mui-odd-row":"Mui-even-row",localeText:{noRowsLabel:"No data"},disableVirtualization:!0,hideFooter:!0})},Qi="api/GetMethodForServices/GetFileInfo",Yi={getDetails:t=>se.get(Qi,{params:{fileId:t}})},Ji=t=>ye({queryKey:["viewfiledetails",t],queryFn:()=>Yi.getDetails(t),enabled:!!t}),Xi=({open:t,onClose:s,idForDetails:n})=>{const{data:c,isFetching:a,isLoading:f,error:h}=Ji(n);return o(Wt,{open:t,onClose:s,fullWidth:!0,maxWidth:"md",children:[o(qt,{children:[e("span",{className:"text-2xl font-bold",children:"Details"}),e(pt,{onClick:s,"aria-label":"close",sx:{position:"absolute",right:8,top:8,color:m=>m.palette.grey[600]},children:e(It,{})})]}),e("hr",{className:"mx-5 pb-2"}),o(zt,{className:"mx-5 mb-2 rounded-lg [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-gray-400 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-400 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-neutral-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-300 [&::-webkit-scrollbar]:w-2",children:[" ",(a||f)&&e("div",{className:"flex w-full justify-center py-[2px]",children:e(Ve,{size:24,sx:{color:"#304CB2"}})}),h&&e("p",{className:"flex items-center justify-center",children:"Failed to load data"}),!(a||f)&&!h&&c&&e(Hi,{data:c})]})]})},Zi=[{label:"Is",value:"is",getApplyFilterFn:t=>{if(!t.value)return null;const s=t.value;return n=>(n=n===null?7:n,n===s)},InputComponent:Xr}],os=Ot.create({baseURL:"https://s87naewp7e.execute-api.us-east-1.amazonaws.com/Prod/"});os.interceptors.request.use(async function(t){try{const n=(await As.currentSession()).getIdToken().getJwtToken();n&&(t.headers.Authorization="Bearer "+n,localStorage.setItem("jwtToken",n))}catch(s){console.error("Error retrieving ID token:",s)}return t},function(t){return Promise.reject(t)});os.interceptors.response.use(function(t){return t},function(t){var s;return((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),window.location.replace(rs)),Promise.reject(t)});const Vi="api/GetMethodForServices/DownloadFile",el={getDetails:t=>os.get(Vi,{params:{fileId:t},responseType:"blob"})},tl=(t,s)=>ye({queryKey:["viewUploadedData",t,s],queryFn:({queryKey:n})=>{const[,c]=n;if(!c)throw new Error("Missing fileId");return console.log("queryKey:",n),el.getDetails(c)},enabled:!!t}),sl=({open:t,onClose:s,popupLoading:n,popupTitle:c,popupContent:a})=>o(Wt,{open:t,onClose:s,fullWidth:!0,maxWidth:"md",children:[o(qt,{children:[e("span",{className:"text-2xl font-bold",children:c}),e(pt,{onClick:s,"aria-label":"close",sx:{position:"absolute",right:8,top:8,color:f=>f.palette.grey[500]},children:e(It,{})})]}),e("hr",{className:"mx-5 pb-2"}),e(zt,{className:"mx-5 mb-2 rounded-lg border-4 border-[#edf4fb] bg-gray-100 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-gray-400 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-400 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-neutral-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-300 [&::-webkit-scrollbar]:w-2",children:n?o("div",{className:"flex items-center gap-2",children:[e("div",{className:"h-5 w-5 animate-spin rounded-full border border-gray-300 border-t-indigo-500"}),e("p",{children:"Retrieving content..."})]}):e("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:a})})]}),rl=()=>{const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(0),[c,a]=r.useState(100),[f,h]=r.useState(new Date().getTime()),[m,F]=r.useState(0),{data:b,isFetching:g,isLoading:E,error:v,refetch:i}=_i(s,c,t),[k,M]=r.useState(!1),[U,w]=r.useState(null),{mutate:N}=Ki(),A={1:{color:"#36C5B4",text:"Forward Successful"},2:{color:"#FC791A",text:"Forward Queued"},3:{color:"#E61D1D",text:"Forward Failed"},4:{color:"#36C5B4",text:"Transformation Successful"},5:{color:"#FC791A",text:"Transformation Queued"},6:{color:"#E61D1D",text:"Transformation Failed"}},[R,W]=r.useState(null),[O,P]=r.useState(!1),[T,C]=r.useState(null),[S,D]=r.useState(0),{data:$,isFetching:K,isLoading:Z,isSuccess:L,isError:_,error:V}=tl(T,S),[j,I]=r.useState(!1),[ne,d]=r.useState(null),[X,Y]=r.useState(!1),[G,ie]=r.useState("Retrieving content...");if(r.useEffect(()=>{(async()=>{var ae;try{const ve=await i(),De=(ae=ve==null?void 0:ve.data)==null?void 0:ae.totalRecords;F(De)}catch(ve){console.error("Error re-fetching data:",ve)}})()},[s,f,i]),r.useEffect(()=>{if(Z||K){ie("Loading..."),Y(!0);return}if(_){console.error("Download failed",V),ie("Download failed"),Y(!1);return}(async()=>{var ae,ve;if(L&&$){const De=$;console.log("contentData/axiosResponse result:",$),console.log("axiosResponse.headers:",De==null?void 0:De.headers);const Ie=De.data,xe=((ae=De.headers)==null?void 0:ae["content-disposition"])||"";console.log("disposition:",xe);const Pe=xe.match(/filename\*?=(?:UTF-\d['']*)?["']?([^;"']+)/i),we=Pe!=null&&Pe[1]?decodeURIComponent(Pe[1]):"downloaded-file.bin",B=(ve=we.split(".").pop())==null?void 0:ve.toLowerCase();if(B&&["txt","csv","xml","json","log"].includes(B))try{const p=await Ie.text(),x=atob(p);d(x),ie(`Preview: ${we}`)}catch(p){console.error("Base64 decoding failed:",p),ie("Error decoding file")}else try{const p=await Ie.text(),x=atob(p),l=new Array(x.length);for(let fe=0;fe<x.length;fe++)l[fe]=x.charCodeAt(fe);const ee=new Uint8Array(l),u=new Blob([ee],{type:"application/octet-stream"});yr.saveAs(u,we),I(!1)}catch(p){console.error("Binary file decoding failed:",p),ie("Download failed"),Y(!1)}Y(!1)}})()},[L,Z,K,_,$]),v)return e(Ue,{});const me=b==null?void 0:b.dataUploads.map(Q=>{var ae;return{id:Q==null?void 0:Q.fileId,name:Q==null?void 0:Q.fileName,fileFormat:Q==null?void 0:Q.fileFormat,fileSize:(Q==null?void 0:Q.fileSize)===null?"":((ae=Q==null?void 0:Q.fileSize)==null?void 0:ae.toFixed(1))+" Bytes",uploadedBy:Q==null?void 0:Q.uploadedBy,status:Q==null?void 0:Q.status,uploadedDate:(Q==null?void 0:Q.uploadedDate)===null?"":$e(Q==null?void 0:Q.uploadedDate)}}),Ne=Q=>{w(Q),M(!0)},pe=Q=>{W(Q),P(!O)},Se=async Q=>{Q&&(C(Q),D(ae=>ae+1),I(!0),d(null),ie("Retrieving content..."))};return o("div",{className:"px-7",children:[e(Me,{heading:"Uploaded Data",rows:me,columns:[{field:"details",headerName:"",flex:1,minWidth:100,sortable:!1,disableColumnMenu:!0,renderCell:Q=>{const ae=Q.row;return e("button",{className:"my-1 inline-flex h-9 items-center gap-3 rounded-md border border-gray-200 bg-gray-200 px-3 text-gray-600",tabIndex:0,onClick:()=>{pe(ae.id)},children:e(Ls,{sx:{margin:"0"}})})}},{field:"id",headerName:"File ID",minWidth:150},{field:"name",headerName:"File Name",flex:1,minWidth:320,renderCell:Q=>{const ae=Q.value,ve=(ae==null?void 0:ae.length)>75?`${ae.substring(0,75)}...`:ae;return e(Re,{truncatedString:ve,fullString:ae})}},{field:"fileFormat",headerName:"File Format",flex:1,minWidth:150},{field:"uploadedBy",headerName:"Uploader",flex:1,minWidth:200},{field:"uploadedDate",headerName:"Uploaded At",flex:1,minWidth:200},{field:"fileSize",headerName:"File Size",flex:1,minWidth:200},{field:"status",headerName:"Status",minWidth:250,renderCell:Q=>{const ae=Q.value,{color:ve="#4b5566",text:De="No Action Found"}=A[ae]||{};return o("div",{style:{alignItems:"center",color:ve},children:[e("span",{style:{height:"8px",width:"8px",backgroundColor:ve,borderRadius:"50%",display:"inline-block",marginRight:"8px"}}),De]})},filterOperators:Zi},{field:"actions",headerName:"Actions",flex:1,minWidth:360,renderCell:Q=>{const ae=Q.row;return o("div",{className:"flex gap-2",children:[o("div",{className:`${(K||Z)&&ae.id===T?"cursor-not-allowed bg-gray-200 opacity-50":""} my-1 inline-flex h-9 w-max items-center gap-3 rounded-md bg-indigo-100 px-3 text-blue-800`,onClick:()=>Se(ae.id),role:"button",tabIndex:0,onKeyDown:ve=>{(ve.key==="Enter"||ve.key===" ")&&Se(ae.id)},children:[e("i",{className:"fa-solid fa-file-lines"}),(K||Z)&&ae.id===T?"Loading...":"Preview File"]}),o("button",{className:"my-1 inline-flex h-9 w-max items-center gap-3 rounded-md border border-red-100 bg-red-100 px-3 text-gray-700",tabIndex:0,onClick:()=>{Ne(ae.id)},children:[e("i",{className:"fa-solid fa-trash text-red-600"})," Remove"]})]})}}],buttonText:"Upload Data",buttonLink:"uploadfile",buttonShow:!0,showSearch:!0,showDatePicker:!1,setSkip:n,totalCount:m,setSkipTrigger:h,pageSize:c,isButtonDisabled:!0,setPageSize:a,nav:null,handleButtonClick:function(){throw new Error("Function not implemented.")},navReports:void 0,setStartDate:function(){throw new Error("Function not implemented.")},setEndDate:function(){throw new Error("Function not implemented.")},hideFooter:!1,isLoading:E||g}),k&&e(xt,{isOpen:k,onClose:()=>M(!1),onConfirm:()=>{U!==null&&N({fileId:U,tenantName:t},{onSuccess:()=>{M(!1),setTimeout(()=>{i().catch(Q=>{console.error("Failed to remove data:",Q)}),F(Q=>Q-1)},1500)},onError:Q=>{console.error("Error removing data:",Q)}})}}),R&&e(Xi,{open:O,onClose:()=>{P(!1),W(null)},idForDetails:R}),j&&e(sl,{open:j,onClose:()=>I(!1),popupLoading:X,popupTitle:G,popupContent:ne})]})},nl=()=>{const[t,s]=r.useState(""),[n,c]=r.useState(!1),[a,f]=r.useState(!1),[h,m]=r.useState(""),[F,b]=r.useState(""),[g,E]=r.useState(""),[v,i]=r.useState(""),[k,M]=r.useState(""),[U,w]=r.useState(!1),[N,A]=r.useState(!1),{toast:R}=_t(),W=ht(),O=Ke(),P=sessionStorage.getItem("fp-email"),T=r.useRef(null),C=async()=>{try{await O.forgotPassword(P),R.success("A confirmation code has been sent to your email address")}catch(j){R.error(String(j))}},S=j=>{const I=j.target.value;/^\d*$/.test(I)&&(s(I),c(I.length===6))},D=j=>/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*()\-_+={}[\]|\\:;"'<>,.?/]).{8,20}$/.test(j),$=j=>{const I=j.target.value;b(I)},K=j=>{const I=j.target.value;E(I)},Z=()=>{w(!U)},L=()=>{A(!N)},_=j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),Z())},V=async j=>{j.preventDefault(),f(!0),i(""),M(""),m("");try{if(await new Promise(I=>setTimeout(I,1e3)),!/^\d{6}$/.test(t)){m("The confirmation code must be a 6-digit number");return}if(F.length===0&&g.length===0){i("Password fields are required");return}if(!D(F)&&F!==g){i("Weak Password! Your password must be at least 8 characters long and include at least one lowercase letter, one uppercase letter, one digit, and one special character.");return}if(!D(F)){i("Weak Password! Your password must be at least 8 characters long and include at least one lowercase letter, one uppercase letter, one digit, and one special character.");return}if(F!==g){M("Passwords do not match");return}P&&await O.confirmForgotPassword(P,t,F)&&(sessionStorage.removeItem("fp-email"),R.success("Your password has been reset successfully. You can now log in with your new password."),W("/login"))}catch(I){console.error("Error resetting password: ",I),R.error("Verification failed")}finally{f(!1)}};return r.useEffect(()=>{T.current&&T.current.focus()},[]),o("div",{className:"grid h-screen lg:grid-cols-2",children:[e("div",{className:"hidden bg-blue-800 p-16 lg:block",children:e("img",{src:"assets/imgs/login-img.svg",alt:"login-img"})}),e("div",{className:"login-bg-img",children:e("div",{className:"flex h-full w-full items-center justify-center",children:e("div",{className:"w-9/12 sm:w-8/12 md:w-7/12 lg:w-5/12",children:o("form",{onSubmit:V,children:[e("h5",{className:"mt-6 text-center text-xl font-semibold text-gray-900",children:"A code has been mailed to you."}),o("div",{className:"mt-6",children:[e("label",{htmlFor:"code",className:"mb-3 block text-xs text-[#A4A4AA]",children:"Enter Code"}),e("input",{ref:T,type:"text",name:"code",placeholder:"******",value:t,className:"focus:shadow-outline-blue h-11 w-full rounded-lg border border-gray-300 bg-white px-4 py-2 pr-10 text-sm focus:border-opacity-0 focus:shadow-sm focus:outline-[2px] focus:outline-blue-300",autoComplete:"true",maxLength:6,onChange:S}),h&&e("p",{className:"text-xs text-red-500",children:h})]}),o("div",{className:"mb-4 mt-4",children:[e("label",{htmlFor:"new-password",className:"mb-3 block text-xs text-[#A4A4AA]",children:"New Password"}),o("div",{className:"relative",children:[e("input",{id:"new-password",type:U?"text":"password",className:"focus:shadow-outline-blue w-full rounded-lg border border-gray-300 p-2 focus:border-opacity-0 focus:shadow-sm focus:outline-[2px] focus:outline-blue-300",value:F,onChange:$}),e("span",{className:"absolute right-3 top-0 flex h-11 cursor-pointer items-center pl-2",onClick:Z,onKeyDown:_,role:"button","aria-label":"Toggle password visibility",tabIndex:-1,children:U?e(Yt,{className:"text-[#A4A4AA] opacity-80"}):e(Jt,{className:"text-[#A4A4AA] opacity-80"})})]}),v&&e("p",{className:"text-xs text-red-500",children:v})]}),o("div",{className:"mb-4",children:[e("label",{htmlFor:"confirm-password",className:"mb-3 block text-xs text-[#A4A4AA]",children:"Confirm New Password"}),o("div",{className:"relative",children:[e("input",{id:"confirm-password",type:N?"text":"password",className:"focus:shadow-outline-blue w-full rounded-lg border border-gray-300 p-2 focus:border-opacity-0 focus:shadow-sm focus:outline-[2px] focus:outline-blue-300",value:g,onChange:K}),e("span",{className:"absolute right-3 top-0 flex h-11 cursor-pointer items-center pl-2",onClick:L,onKeyDown:_,role:"button","aria-label":"Toggle password visibility",tabIndex:-1,children:N?e(Yt,{className:"text-[#A4A4AA] opacity-80"}):e(Jt,{className:"text-[#A4A4AA] opacity-80"})})]}),k&&e("p",{className:"text-xs text-red-500",children:k})]}),e("div",{className:"mt-6 flex items-center justify-center",children:e("button",{type:"submit",className:`w-full rounded-full border-[2px] bg-blue-800 px-10 focus:outline-[2px] focus:outline-offset-2 focus:outline-blue-300 ${a?"py-2.5":"py-4"} text-xs font-semibold text-white ${n?"":"cursor-not-allowed opacity-50"}`,disabled:!n||a,children:a?e("div",{children:e(Ve,{size:24,sx:{color:"white"}})}):"VERIFY OTP AND CHANGE PASSWORD"})}),o("div",{className:"mt-3 flex items-center justify-between",children:[e("button",{className:"flex text-[#304CB2] focus:outline-[2px] focus:outline-blue-300",onClick:()=>W(-1),children:e("span",{className:"text-[12px] font-normal text-gray-400 underline",children:"Cancel"})}),e("button",{type:"button",className:"text-xs font-normal text-gray-400 underline focus:outline-[2px] focus:outline-offset-2 focus:outline-blue-300",onClick:C,children:"Resend OTP?"})]})]})})})})]})},al=({loading:t})=>e("button",{type:"submit",className:"mt-6 w-full rounded-full border-0 bg-[#304CB2] px-2.5 py-2 text-xs font-semibold text-white",disabled:t,children:t?e("div",{className:"py-[2px]",children:e(Ve,{size:24,sx:{color:"white"}})}):e("div",{className:"py-2",children:"RESET PASSWORD"})}),ol=()=>{const t=Ke(),[s,n]=r.useState(""),[c,a]=r.useState(""),[f,h]=r.useState(!1),m=ht(),F=r.useRef(null),b=E=>{n(E.target.value)},g=async E=>{E.preventDefault();const v=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(s){if(!v.test(s)){a("Please enter a valid email address.");return}}else{a("Email is required.");return}try{if(h(!0),await t.forgotPassword(s))sessionStorage.setItem("fp-email",s),m("/verifyemailandresetpwd"),h(!1);else{a("Invalid email Id");return}}catch(i){a("User with the given email Id does not exist"),console.log(i);return}};return r.useEffect(()=>{F.current&&F.current.focus()},[]),o("div",{className:"grid h-screen lg:grid-cols-2",children:[e("div",{className:"hidden bg-blue-800 p-16 lg:block",children:e("img",{className:"",src:"assets/imgs/login-img.svg",alt:"login-img"})}),e("div",{className:"login-bg-img",children:e("div",{className:"flex h-full w-full items-center justify-center",children:o("form",{className:"mb-12 w-9/12 sm:w-7/12 lg:w-2/4",onSubmit:g,children:[e("h3",{className:"text-center text-4xl font-bold text-[#172B4D]",children:"Change Password"}),o("div",{className:"mb-5 mt-5",children:[e("label",{htmlFor:"email",className:"text-xs text-[#A4A4AA]",children:"Email"}),o("div",{className:"mt-2",children:[e("input",{ref:F,id:"email",name:"email",placeholder:"Email",className:"focus:shadow-outline-blue h-11 w-full rounded-xl border border-[#DCDCDC] px-4 py-2 text-sm focus:shadow-sm focus:outline-[2px] focus:outline-blue-300",autoComplete:"off",value:s,onChange:b}),c&&e("div",{className:"mt-1 text-xs text-red-500",children:c})]})]}),e(al,{loading:f}),e(Ms,{path:"/login"})]})})})]})},il=({loading:t})=>e("button",{type:"submit",className:"mt-6 w-full rounded-full border-0 bg-[#304CB2] px-2.5 py-2 text-xs font-semibold text-white focus:outline-[2px] focus:outline-offset-[4px] focus:outline-blue-400",disabled:t,children:t?e("div",{className:"py-[2px]",children:e(Ve,{size:24,sx:{color:"white"}})}):e("div",{className:"py-2",children:"LOG IN"})}),ll=()=>{const t=Ke(),[s,n]=r.useState(""),[c,a]=r.useState(""),[f,h]=r.useState(!1),[m,F]=r.useState(""),[b,g]=r.useState(""),[E,v]=r.useState(!1),[i,k]=r.useState(!1),[M,U]=r.useState(!1),w=ht(),N=r.useRef(null),A=()=>{h(!f)},R=S=>{n(S.target.value.trim())},W=S=>{a(S.target.value)},O=S=>{(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),A())},P=async S=>{S.preventDefault();let D=!0;if(F(""),g(""),s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(F("Please enter a valid email address."),D=!1):(F("Email Id is required."),D=!1),c||(g("Password is required."),D=!1),!!D)try{U(!0),await t.signIn(s,c)&&(ke.success("Login Successful"),w("/dashboard",{replace:!0}))}catch(K){K==="No current user"&&(ke.success("Change Password is Required"),k(!0),i&&(n(""),a("")),U(!1)),K instanceof Error&&(K.name==="UserNotConfirmedException"?(await t.resendConfirmationCode(s),v(!0),ke.error("Please verify your email address to activate your account.")):K instanceof Error&&ke.error(K.message),U(!1))}},T=async S=>{U(!0);try{await t.confirmSignUp(s,S)&&(n(""),a(""),v(!1),ke.success("Your email has been successfully verified"),w("/subscription"))}catch(D){D instanceof Error&&ke.error(`${D.message}`)}U(!1)},C=async()=>{try{await t.resendConfirmationCode(s),ke.success("A confirmation code has been sent to your email address")}catch(S){ke.error(`${S}`)}};return r.useEffect(()=>{t.isAuthenticated&&w("/dashboard")},[w,t]),r.useEffect(()=>{const S=document.createElement("style");return S.innerHTML=`
      input[type="password"]::-ms-reveal {
        display: none;
      }
    `,document.head.appendChild(S),()=>{document.head.removeChild(S)}},[]),r.useEffect(()=>{N.current&&N.current.focus()},[]),e(Tt,{children:o("div",{className:"grid h-screen lg:grid-cols-2",children:[e("div",{className:"hidden bg-blue-800 p-16 lg:block",children:e("img",{className:"",src:"assets/imgs/login-img.svg",alt:"login-img"})}),e("div",{className:"login-bg-img",children:e("div",{className:"flex h-full w-full items-center justify-center",children:o("div",{className:"mb-12 w-9/12 sm:w-7/12 lg:w-2/4",children:[e("h3",{className:"text-center text-4xl font-bold text-[#172B4D]",children:"Log in"}),!E&&o("form",{onSubmit:P,children:[o("div",{className:"mb-5 mt-5",children:[e("label",{htmlFor:"email",className:"text-xs text-[#A4A4AA]",children:"Email"}),o("div",{className:"mt-2",children:[e("input",{ref:N,id:"email",name:"email",placeholder:"",className:"h-11 w-full rounded-xl border border-[#DCDCDC] px-4 py-2 text-sm focus:border-none focus:outline-[2px] focus:outline-offset-[4px] focus:outline-blue-400",autoComplete:"off",value:s.trim(),onChange:R}),m&&e("div",{className:"mt-1 text-xs text-red-500",children:m})]})]}),o("div",{children:[e("label",{htmlFor:"password",className:"text-xs text-[#A4A4AA]",children:"Password"}),o("div",{className:"relative mt-2 text-gray-600",children:[e("input",{id:"password",type:f?"text":"password",name:"password",placeholder:"******",className:"h-11 w-full rounded-xl border border-[#DCDCDC] px-4 py-2 text-sm focus:border-none focus:outline-[2px] focus:outline-offset-[4px] focus:outline-blue-400",autoComplete:"off",value:c,onChange:W,tabIndex:0}),e("span",{className:"absolute right-3 top-0 flex h-11 cursor-pointer items-center pl-2 focus:outline-[2px] focus:outline-blue-400",onClick:A,onKeyDown:O,role:"button","aria-label":"Toggle password visibility",tabIndex:-1,children:f?e(Yt,{className:"text-[#A4A4AA] opacity-80"}):e(Jt,{className:"text-[#A4A4AA] opacity-80"})})]}),b&&e("div",{className:"mt-1 text-xs text-red-500",children:b})]}),e("div",{className:"mt-1 text-right",children:e("a",{className:"text-xs text-[#1B3360] focus:outline-[2px] focus:outline-blue-400",href:"/resetpassword",children:"Forgot Password?"})}),e(il,{loading:M}),o("div",{className:"mt-8 text-center text-[#304CB2]",children:["Don't have an account?"," ",e("a",{href:"/register",className:"font-bold underline focus:outline-[2px] focus:outline-blue-400",children:"Register now"})]})]}),E&&e(Os,{handleOTPVerification:T,handleResendEmail:C,setIsLoading:U,isLoading:M}),i&&e(qs,{email:s,password:c,setOpenModal:k,isLoggedIn:!1})]})})})]})})},cl="api/HAPI/GetPatientData",dl={getDetails:(t,s)=>se.get(cl,{params:{configurl:t,tenantName:s}})},ul=(t,s)=>ye({queryKey:["viewpatientdata",t],queryFn:()=>dl.getDetails(t,s),enabled:!!t}),ml=({open:t,onClose:s,patient:n})=>{const c=sessionStorage.getItem("tenantName"),{data:a,isFetching:f,error:h}=ul(`Patient?_id=${n.id}`,c);return o(Wt,{open:t,onClose:s,fullWidth:!0,maxWidth:"md",children:[o(qt,{children:[e("span",{className:"text-2xl font-bold",children:"Patient Details"}),e(pt,{onClick:s,"aria-label":"close",sx:{position:"absolute",right:8,top:8,color:m=>m.palette.grey[500]},children:e(It,{})})]}),e("hr",{className:"mx-5 pb-2"}),o(zt,{className:"mx-5 mb-2 rounded-lg border-4 border-[#edf4fb] bg-gray-100 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-gray-400 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-400 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-neutral-300 dark:[&::-webkit-scrollbar-track]:bg-neutral-300 [&::-webkit-scrollbar]:w-2",children:[" ",f&&e("p",{className:"flex items-center justify-center",children:"Loading..."}),h&&e("p",{className:"flex items-center justify-center",children:"Failed to load patient data."}),a&&e("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:JSON.stringify(a,null,2)})]})]})},fl="api/HAPI/GetPatientData",gl={getDetails:(t,s)=>se.get(fl,{params:{configurl:t,tenantName:s}})},pl=(t,s,n,c)=>ye({queryKey:["getpatientdata",t,s,n,c],queryFn:()=>gl.getDetails(t,s),enabled:!!t}),hl=()=>{const t=sessionStorage.getItem("tenantName"),[s,n]=r.useState(""),[c,a]=r.useState(0),[f,h]=r.useState(100),[m,F]=r.useState(new Date().getTime()),{isFetching:b,isLoading:g,error:E,refetch:v}=pl(s,t,c,m),[i,k]=r.useState([]),[M,U]=r.useState(0),[w,N]=r.useState(null),[A,R]=r.useState(!1),W=async C=>{var S,D;n(C);try{const $=await v(),Z=(((D=(S=$==null?void 0:$.data)==null?void 0:S.entry)==null?void 0:D.filter(L=>{var _;return((_=L.resource)==null?void 0:_.resourceType)==="Patient"}))||[]).map(L=>{var I,ne,d,X,Y,G,ie,me,Ne,pe,Se;const _=L.resource,V=((d=(ne=(I=_==null?void 0:_.name)==null?void 0:I[0])==null?void 0:ne.given)==null?void 0:d[1])||"",j=(V?V+" ":"")+(((Y=(X=_.name)==null?void 0:X[0])==null?void 0:Y.family)||"");return{id:parseInt(_.id)||0,firstname:((me=(ie=(G=_.name)==null?void 0:G[0])==null?void 0:ie.given)==null?void 0:me[0])||"",lastname:j,dob:_.birthDate?Zr(_.birthDate):"N/A",gender:_.gender||"",mrn:((pe=(Ne=_.identifier)==null?void 0:Ne[0])==null?void 0:pe.value)||"",uploadeddate:Vr(((Se=L.resource.meta)==null?void 0:Se.lastUpdated)||"")}});k(Z),U(Z.length),console.log("totalCount: ",M)}catch($){console.error("Error re-fetching data:",$)}},O=C=>{N(C),R(!0)};if(E)return e(Ue,{});const P=i.slice(c,c+f);return o("div",{className:"px-7",children:[e(Me,{heading:"Patient Data",rows:P,columns:[{field:"id",headerName:"ID",flex:1,minWidth:200},{field:"firstname",headerName:"First Name",flex:1,minWidth:200},{field:"lastname",headerName:"Last Name",flex:1,minWidth:200},{field:"gender",headerName:"Gender",flex:1,minWidth:200},{field:"dob",headerName:"Date Of Birth",flex:1,minWidth:200},{field:"mrn",headerName:"Medical Record No",flex:1,minWidth:200},{field:"uploadeddate",headerName:"Last Updated Date",flex:1,minWidth:200},{field:"actions",headerName:"Actions",flex:1,minWidth:250,headerAlign:"center",align:"center",renderCell:C=>o("div",{className:"my-1 inline-flex h-9 items-center gap-2 rounded-md bg-indigo-100 px-3 text-blue-800",onClick:()=>O(C.row),role:"button",tabIndex:0,onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&O(C.row)},children:[e("i",{className:"fa-solid fa-eye"}),"View"]})}],buttonText:"",buttonLink:"",buttonShow:!1,pageSize:f,setSkip:a,totalCount:M,setSkipTrigger:F,setPageSize:h,nav:null,isButtonDisabled:!1,showSearch:!1,showDatePicker:!1,handleButtonClick:function(){throw new Error("Function not implemented.")},navReports:void 0,setStartDate:function(){throw new Error("Function not implemented.")},setEndDate:function(){throw new Error("Function not implemented.")},hideFooter:!1,isLoading:b||g,showPatientSearch:!0,handlePatientSearch:W,setPatientRows:k}),w&&e(ml,{open:A,onClose:()=>R(!1),patient:w})]})},bl=({childRows:t})=>{const[s,n]=r.useState(null),[c,a]=r.useState(null),[f,h]=r.useState(null),m=g=>{s===g?a(E=>E===null?"asc":E==="asc"?"desc":"asc"):(n(g),a("asc"))},F=r.useMemo(()=>!s||!c?t:[...t].sort((g,E)=>{let v,i;switch(s){case"fileName":v=g.fileName,i=E.fileName;break;case"status":v=g.status,i=E.status;break;case"lastRun":v=new Date(g.lastRun||"").getTime(),i=new Date(E.lastRun||"").getTime();break;case"elapsedTime":v=hs(g.lastRun),i=hs(E.lastRun);break;default:return 0}return typeof v=="string"?c==="asc"?v.localeCompare(i):i.localeCompare(v):c==="asc"?v-i:i-v}),[t,s,c]),b=g=>s===g?c==="asc"?e(es,{fontSize:"small"}):e(At,{fontSize:"small"}):f===g?e(At,{fontSize:"small"}):null;return o("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[e("div",{style:{display:"flex",backgroundColor:"#8392AB",color:"#f5f6fa",fontWeight:"bold",borderRadius:"2px",marginBottom:"8px"},children:[{label:"File Name",key:"fileName"},{label:"Status",key:"status"},{label:"Last Run",key:"lastRun"},{label:"Elapsed Time",key:"elapsedTime"}].map(({label:g,key:E})=>o("div",{onMouseEnter:()=>h(E),onMouseLeave:()=>h(null),style:{flex:E==="fileName"?2:1,padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},onClick:()=>m(E),children:[g," ",b(E)]},E))}),F.map((g,E)=>{const v=g.lastRun===null?"":$e(g.lastRun),i=zs(g.lastRun);let k={},M={};const U=g.status.toLowerCase();return U.includes("failed")?k={color:"#e61d1d"}:U.includes("queued")?k={color:"#fc791a"}:U.includes("success")&&(k={color:"#36c5b4"}),U.includes("failed")?M={color:"#e61d1d"}:U.includes("queued")?M={color:"#fc791a"}:U.includes("success")&&(M={color:"#36c5b4"}),o("div",{style:{display:"flex",backgroundColor:E%2===0?"#f9f9f9":"#ffffff"},children:[e("div",{style:{flex:2,padding:"8px"},children:e(Re,{fullString:g.fileName,truncatedString:g.fileName.length>75?`${g.fileName.substring(0,75)}...`:g.fileName})}),e("div",{style:{flex:1,padding:"8px",...k},children:e(Re,{fullString:g.status,truncatedString:g.status.length>75?`${g.status.substring(0,75)}...`:g.status})}),e("div",{style:{flex:1,padding:"8px",...M},children:e(Re,{fullString:v,truncatedString:v.length>75?`${v.substring(0,75)}...`:v})}),e("div",{style:{flex:1,padding:"8px"},children:e(Re,{fullString:i,truncatedString:i.length>75?`${i.substring(0,75)}...`:i})})]},Us())})]})},xl=({anchorEl:t,selectedColumn:s,handleCloseMenu:n,columnId:c,handleMenuAction:a,handleFilterClick:f,handleManageColumnsClick:h})=>o(Sr,{anchorEl:t,open:s===c,onClose:n,sx:{"& .MuiPaper-root":{boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12)"}},children:[o(qe,{onClick:()=>{a("sortAsc"),n()},children:[e(At,{sx:{color:"#707070",height:"20px",mr:"16px"}}),e(ot,{sx:{width:"180px"},children:"Sort by ASC"})]}),o(qe,{onClick:()=>{a("sortDesc"),n()},children:[e(es,{sx:{color:"#707070",height:"20px",mr:"16px"}}),e(ot,{sx:{width:"180px"},children:"Sort by DESC"})]}),e(us,{component:"li"}),o(qe,{onClick:f,sx:{marginY:"8px"},children:[e(vr,{sx:{color:"#707070",height:"20px",mr:"16px"}}),e(ot,{sx:{width:"180px"},children:"Filter"})]}),e(us,{component:"li"}),o(qe,{onClick:()=>{a("hideColumn"),n()},children:[e(wr,{sx:{color:"#707070",height:"20px",mr:"16px"}}),e(ot,{sx:{width:"180px"},children:"Hide Column"})]}),o(qe,{onClick:h,children:[e(Nr,{sx:{color:"#707070",height:"20px",mr:"16px"}}),e(ot,{sx:{width:"180px"},children:"Manage Columns"})]})]}),yl=({checked:t,handleCheckboxChange:s})=>o(Ze,{display:"flex",gap:1,children:[e(ms,{control:e(Xt,{name:"pending",checked:t.pending,onChange:s}),label:"Pending"}),e(ms,{control:e(Xt,{name:"failed",checked:t.failed,onChange:s}),label:"Failed"})]}),vl=({columnId:t,columnLabel:s,orderBy:n,orderDirection:c,handleSortToggle:a,handleClickMenu:f})=>o(Ze,{sx:{display:"flex",alignItems:"center",justifyContent:"left",width:"100%",padding:"0","&:hover .more-vert-icon, &:hover .sort-icon":{visibility:"visible"}},children:[e(Ze,{sx:{display:"flex",alignItems:"center"},children:o(ot,{component:"span",sx:{color:"#8392AB",fontSize:"14px",cursor:"pointer",display:"flex",fontWeight:600,alignItems:"center"},className:"w-max",onClick:()=>a(t),children:[s,e(pt,{size:"small",sx:{marginLeft:1.5,padding:"5px",color:"#b9c3d4",visibility:n===t?"visible":"hidden"},"aria-label":`Sort by ${s}`,className:"sort-icon",children:n===t?c==="asc"?e(At,{fontSize:"small"}):e(es,{fontSize:"small"}):e(At,{fontSize:"small"})})]})}),e(pt,{size:"small",onClick:h=>f(h,t),className:"more-vert-icon",sx:{padding:"5px",marginLeft:"0",visibility:n===t?"visible":"hidden"},children:e(Ls,{fontSize:"small"})})]});let Rs="/api/PendingDashboard/GetPendingSubscriptions";const wl={getDetails:(t,s)=>(s==="3"&&(Rs="/api/PendingDashboard/GetPendingSubscriptionsGlobal"),se.get(Rs,{params:{tenantName:t}}))},Nl=(t,s)=>ye({queryKey:["getpendingdata"],queryFn:()=>wl.getDetails(t,s)}),Sl=[{id:"subscriptionId",label:"Subscription Id",numeric:!0,visible:!1},{id:"subscriptionName",label:"Subscription",numeric:!1,visible:!0},{id:"username",label:"Username",numeric:!1,visible:!0},{id:"tenantName",label:"Tenant Name",numeric:!1,visible:!0},{id:"status",label:"Status",numeric:!1,visible:!0},{id:"lastRun",label:"Start Time / Last Update Time",numeric:!1,visible:!0},{id:"elapsedTime",label:"Elapsed Time",numeric:!1,visible:!0}];function Cl(){const t=sessionStorage.getItem("tenantName"),s=sessionStorage.getItem("userRole"),[n,c]=r.useState(Sl),[a,f]=r.useState(!1),[h,m]=r.useState(!1),[F,b]=r.useState(null),[g,E]=r.useState(null),v=r.useRef(null),i=r.useRef(null),[k,M]=r.useState(null),[U,w]=r.useState(""),[N,A]=r.useState("asc"),[R,W]=r.useState(0),[O,P]=r.useState(100),[T,C]=r.useState(null),[S,D]=r.useState(null),[$,K]=r.useState(null),[Z,L]=r.useState({}),[_,V]=r.useState({pending:!0,failed:!0}),{data:j,isLoading:I,isFetching:ne,refetch:d,isError:X,error:Y}=Nl(t,s),[G,ie]=r.useState(j),me=B=>{U===B?A(N==="asc"?"desc":"asc"):(w(B),A("asc"))},Ne=G==null?void 0:G.sort((B,ue)=>{if(!U)return 0;const p=U==="elapsedTime"?"lastRun":U,x=B[p],l=ue[p];return x==null||l==null?0:N==="asc"?x>l?1:x<l?-1:0:x<l?1:x>l?-1:0}),pe=Ne==null?void 0:Ne.slice(R*O,R*O+O),Se=()=>{if(ae(),v.current){const{bottom:B,left:ue}=v.current.getBoundingClientRect(),p=document.createElement("div");p.style.position="absolute",p.style.top=`${B}px`,p.style.left=`${ue}px`,document.body.appendChild(p),b(p),f(!0)}},Ee=()=>{if(ae(),v.current){const{bottom:B,left:ue}=v.current.getBoundingClientRect(),p=document.createElement("div");p.style.position="absolute",p.style.top=`${B}px`,p.style.left=`${ue}px`,document.body.appendChild(p),E(p),m(!0)}},Ae=()=>{f(!1),m(!1),b(null),E(null),K(null)},Q=(B,ue)=>{C(B.currentTarget),D(ue),K(ue)},ae=()=>{C(null),D(null)},ve=B=>{B==="sortAsc"?(A("asc"),w(S),ae()):B==="sortDesc"?(A("desc"),w(S),ae()):B==="hideColumn"&&(c(ue=>ue.map(p=>p.id===S?{...p,visible:p.visible=!1}:p)),ae())},De=Zt.debounce((B,ue)=>{Ie(B,ue)},300),Ie=(B,ue)=>{if(!ue)return;L(l=>({...l,[ue]:B}));const p=ue,x=j==null?void 0:j.filter(l=>{const ee=l[p];return typeof ee=="string"||typeof ee=="number"?ee.toString().toLowerCase().includes(B.toLowerCase()):!1});ie(x)},xe=B=>{c(ue=>ue.map(p=>p.id===B?{...p,visible:!p.visible}:p))},Pe=B=>{M(k===B?null:B)},we=r.useCallback(B=>{V(ue=>({...ue,[B.target.name]:B.target.checked}))},[]);return r.useEffect(()=>{j?ie(j):d()},[R,j,d]),r.useEffect(()=>{const B=j==null?void 0:j.filter(ue=>{var x;const p=(x=ue.status)==null?void 0:x.toLowerCase();return _.pending&&(p==null?void 0:p.includes("queued"))||_.failed&&(p==null?void 0:p.includes("failed"))});ie(B)},[_,j]),r.useEffect(()=>{a&&i.current&&i.current.focus()},[a]),r.useEffect(()=>{const B=j==null?void 0:j.filter(ue=>{var x;const p=(x=ue.status)==null?void 0:x.toString().toLowerCase();return _.pending&&(p==null?void 0:p.includes("queued"))||_.failed&&(p==null?void 0:p.includes("failed"))});ie(B)},[_,j]),r.useEffect(()=>{a&&i.current&&i.current.focus()},[a]),Y?e(Ue,{}):o(Ze,{sx:{marginRight:"27px",marginLeft:"27px",marginTop:"24px",marginBottom:"80px",backgroundColor:"#ffffff",borderRadius:"7px"},children:[o(Ze,{sx:{display:"flex",justifyContent:"space-between",margin:"20px 40px 10px"},children:[e(en,{heading:"Pending / Failed"}),e(yl,{checked:_,handleCheckboxChange:we})]}),o(Cr,{sx:{paddingRight:"40px",paddingLeft:"35px",overflowY:"overlay","&::-webkit-scrollbar":{width:0}},children:[o(kr,{sx:{borderCollapse:"separate",borderSpacing:"0 10px","& .MuiTableCell-root":{border:"none",padding:"6px 16px"},"& thead .MuiTableCell-root":{padding:"12px 20px"},"& thead":{marginBottom:"5px",display:"table-header-group"}},children:[e(Er,{ref:v,children:o(Nt,{sx:{background:"#f5f6fa","& .MuiTableCell-root":{border:"none",position:"relative"},"& .icon-button":{opacity:0,transition:"opacity 0.3s"},"& .MuiTableCell-root:hover .icon-button":{opacity:1},"& .MuiTableCell-root:first-of-type":{borderTopLeftRadius:"7px",borderBottomLeftRadius:"7px"},"& .MuiTableCell-root:last-of-type":{borderTopRightRadius:"7px",borderBottomRightRadius:"7px"}},children:[e(at,{}),n.filter(B=>B.id==="tenantName"&&s!=="3"?!1:B.visible).map(B=>o(at,{children:[e(vl,{columnId:B.id,columnLabel:B.label,orderBy:U,orderDirection:N,handleSortToggle:me,handleClickMenu:Q}),e(xl,{anchorEl:T,selectedColumn:S,columnId:B.id,handleCloseMenu:ae,handleMenuAction:ve,handleFilterClick:Se,handleManageColumnsClick:Ee})]},B.id))]})}),e(Tr,{children:I||ne?e(Nt,{children:e(at,{colSpan:n.filter(B=>B.visible).length,align:"center",children:e(Ze,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:e(Ve,{})})})}):X?e(Nt,{children:e(at,{colSpan:n.filter(B=>B.visible).length,align:"center",children:Y})}):!j||(G==null?void 0:G.length)===0?e(Nt,{children:e(at,{colSpan:n.length,children:e("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",width:"100%",height:"72px"},children:"No data"})})}):pe==null?void 0:pe.map((B,ue)=>o(Mt.Fragment,{children:[o(Nt,{sx:{backgroundColor:ue%2===0?"#f3f3f3":"#ffffff ",outline:ue%2===0?"1px solid #f3f3f3":"1px solid #d3d3d3",outlineOffset:"-2px",borderRadius:"7px","&:last-child td, &:last-child th":{border:0},"& > *:first-of-type":{borderTopLeftRadius:"7px",borderBottomLeftRadius:"7px"},"& > *:last-child":{borderTopRightRadius:"7px",borderBottomRightRadius:"7px"},"& .MuiTableCell-root":{border:"none"},"& .MuiTableRoot-root":{minHeight:"50px"}},children:[e(at,{children:B.pendingProcessInfos.length>0?e(pt,{size:"small",sx:{padding:"5px"},onClick:()=>Pe(B.subscriptionId),children:k===B.subscriptionId?e(Fr,{}):e(Dr,{})}):e("div",{className:"h-[34px] w-0"})}),n.filter(p=>p.id==="tenantName"&&s!=="3"?!1:p.visible).map(p=>{const x=B[p.id];return e(at,{children:(()=>{var ee,u,fe,he;switch(p.id){case"lastRun":{const de=(x==null?void 0:x.toString())||"00:00",ge=de!=="00:00"?$e(de):de,Le=(u=(ee=B.status)==null?void 0:ee.toString())==null?void 0:u.toLowerCase(),He=Le!=null&&Le.includes("failed")?{color:"#e61d1d"}:Le!=null&&Le.includes("queued")?{color:"#fc791a"}:Le!=null&&Le.includes("success")?{color:"#36c5b4"}:{color:"black"};return e("span",{style:He,children:e(Re,{fullString:ge,truncatedString:ge.length>75?`${ge.substring(0,75)}...`:ge})})}case"status":{const de=x==null?void 0:x.toString();if(!de)return e("span",{children:de});const ge=(fe=de.split(" ").pop())==null?void 0:fe.toLowerCase();return e("span",{style:ge==="failed"?{color:"#e61d1d"}:ge==="queued"?{color:"#fc791a"}:ge==="success"?{color:"#36c5b4"}:{color:"black"},children:e(Re,{fullString:de,truncatedString:de.length>75?`${de.substring(0,75)}...`:de})})}case"elapsedTime":{const de=(he=B.lastRun)==null?void 0:he.toString(),ge=de?zs(de):"0h 0m";return e(Re,{fullString:ge,truncatedString:ge.length>75?`${ge.substring(0,75)}...`:ge})}default:{if(Array.isArray(x))return e("ul",{children:x.map(ge=>e("li",{children:JSON.stringify(ge)},Us()))});const de=(x==null?void 0:x.toString())||"";return e(Re,{fullString:de,truncatedString:de.length>75?`${de.substring(0,75)}...`:de})}}})()},p.id)})]}),k===B.subscriptionId&&e(Nt,{children:e(at,{colSpan:n.length+1,children:e(Rr,{in:k===B.subscriptionId,children:e(Ze,{sx:{padding:2},children:e(bl,{childRows:B.pendingProcessInfos})})})})})]},B.subscriptionId))})]}),e(gs,{open:a,anchorEl:F,onClose:Ae,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:o(fs,{sx:{display:"flex",p:"8px","& .MuiInputBase-input, .MuiOutlinedInput-input":{padding:"12px"}},children:[n.map(B=>B.id===$?e("label",{style:{fontWeight:"normal",display:"block",color:"#4b5566",padding:"12px"},children:B.label},B.id):null),e(Ar,{label:"Filter Value",value:Z[$]||"",onChange:B=>{const p=B.target.value.trim();De(p,$)},fullWidth:!0,inputRef:i})]})}),e(gs,{open:h,anchorEl:g,onClose:Ae,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:o(fs,{sx:{padding:"20px",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:"400",fontSize:"1rem",lineHeight:"1.5",letterSpacing:"0.00938em"},children:[e("h3",{style:{padding:"5px",color:"#4b5566"},children:"Manage Columns"}),n.map(B=>e(Ze,{sx:{display:"flex",alignItems:"center"},children:o("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[e(Xt,{checked:B.visible,sx:{p:"5px"},onChange:()=>xe(B.id)}),e("span",{children:B.label})]})},B.id)),e(Pr,{onClick:()=>m(!1),sx:{mt:1},children:"Close"})]})})]}),e(Ir,{component:"div",count:G?G.length:0,page:R,onPageChange:(B,ue)=>W(ue),rowsPerPage:O,onRowsPerPageChange:B=>P(parseInt(B.target.value,10)),rowsPerPageOptions:[5,10,20,30,50,100],sx:{backgroundColor:"#f5f6fa",borderRadius:"7px",marginRight:"40px",marginLeft:"35px",marginBottom:"38px",color:"#8392AB"}})]})}const kl="api/Registration/OrganisationNameValidation",El={getDetails:t=>se.get(kl,{params:{tenantName:t}})},Fl=()=>Te({mutationFn:El.getDetails,onSuccess:()=>"Success",onError:t=>{console.log("Create failed",t)}}),Dl="api/Registration/AddCognitoUser",Rl={addCognitoUser:t=>se.post(Dl,t)},Tl=()=>Te({mutationFn:Rl.addCognitoUser,onSuccess:()=>{console.log("Created successfully")},onError:()=>{console.log("Create failed")}}),Al=({handleSubmit:t,label:s,className:n,isLoading:c})=>e("button",{className:`mt-2.5 w-full rounded-full border-0 bg-[#304CB2] px-2.5 py-2 text-xs font-semibold text-white focus:outline-[2px] focus:outline-blue-300 ${n}`,onClick:t,children:c?e("div",{className:"py-[2px]",children:e(Ve,{size:24,sx:{color:"white"}})}):e("div",{className:"py-2",children:s})}),Pl=({handleSubmit:t,isLoading:s})=>{const[n,c]=r.useState({fullname:"",organizationName:"",email:"",createPassword:"",confirmPassword:"",services:["Data Polling"]}),[a,f]=r.useState({fullname:"",organizationName:"",email:"",createPassword:"",confirmPassword:"",services:""}),h=r.useRef(null),m=i=>{const{name:k,value:M}=i.target;c({...n,[k]:M}),a[k]&&f({...a,[k]:""})},F=i=>{const{value:k}=i.target;c(M=>({...M,services:M.services.includes(k)?M.services.filter(U=>U!==k):[...M.services,k]}))},b=i=>/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*()\-_+={}[\]|\\:;"'<>,.?/]).{8,20}$/.test(i),g=i=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i),E=()=>{const i={fullname:"",organizationName:"",email:"",createPassword:"",confirmPassword:"",services:""};return n.email?g(n.email)||(i.email="Invalid email address"):i.email="Email Id is required",n.fullname||(i.fullname="Full Name is required"),n.organizationName||(i.organizationName="Organization Name is required"),n.createPassword.length===0&&n.confirmPassword.length===0?i.createPassword="Password fields are required":!b(n.createPassword)&&n.createPassword!==n.confirmPassword?i.createPassword="Weak Password! Your password must be at least 8 characters long and include at least one lowercase letter, one uppercase letter, one digit, and one special character":b(n.createPassword)?n.createPassword!==n.confirmPassword&&(i.confirmPassword="Passwords do not match"):i.createPassword="Weak Password! Your password must be at least 8 characters long and include at least one lowercase letter, one uppercase letter, one digit, and one special character.",n.services.length<2&&(i.services="You must select at least 2 services"),f(i),!Object.values(i).some(k=>k)},v=()=>{E()&&(t(n),console.log("Registration - formValues:",n))};return r.useEffect(()=>{h.current&&h.current.focus()},[]),o("div",{children:[o("h5",{className:"mt-4 text-center text-sm font-semibold text-gray-900",style:{fontFamily:"'poppins',sans-serif",fontWeight:"500"},children:["Create Your Password & Choose ",e("br",{})," Your Services"]}),e(Rt,{inputRef:h,type:"text",inputName:"fullname",placeholder:"Full Name",label:"Full Name",inputValue:n.fullname,handleOnChange:m,errorMsg:a.fullname}),e(Rt,{type:"text",inputName:"organizationName",placeholder:"Organization Name",label:"Organization Name",inputValue:n.organizationName,handleOnChange:m,errorMsg:a.organizationName}),e(Rt,{type:"email",inputName:"email",placeholder:"Email",label:"Email",inputValue:n.email,handleOnChange:m,errorMsg:a.email}),o("div",{className:"grid grid-cols-2 gap-4",children:[e(Rt,{type:"password",inputName:"createPassword",placeholder:"********",label:"Create Password",inputValue:n.createPassword,handleOnChange:m}),e(Rt,{type:"password",inputName:"confirmPassword",placeholder:"********",label:"Confirm Password",inputValue:n.confirmPassword,handleOnChange:m,errorMsg:a.confirmPassword})]}),e("p",{className:"mt-1 text-xs text-red-500",children:a.createPassword}),o("div",{className:"mb-5 mt-8",children:[e("div",{className:"text-xs text-gray-400",children:"Select Services"}),e(tt,{id:"polling-is-required",style:{maxWidth:"200px",height:"auto",borderRadius:"8px",backgroundColor:"#4f4f4f",color:"#fff",fontSize:"12px"}}),e("div",{className:"my-3 flex",children:o("div",{className:"flex items-center","data-tooltip-id":"polling-is-required","data-tooltip-content":"Polling is currently a required service and cannot be deselected",children:[e("input",{id:"service-option-3",type:"checkbox",value:"Data Polling",checked:!0,onChange:F,className:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:outline-[2px] focus:outline-blue-300",tabIndex:-1,disabled:!0}),e("label",{htmlFor:"service-option-3",className:"ms-2 block text-xs font-medium text-gray-900",children:"Data Polling"})]})}),o("div",{className:"my-3 flex items-center",children:[e("input",{id:"service-option-1",type:"checkbox",value:"Data Transformation",checked:n.services.includes("Data Transformation"),onChange:F,className:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:outline-[2px] focus:outline-blue-300",tabIndex:-1}),e("label",{htmlFor:"service-option-1",className:"ms-2 block text-xs font-medium text-gray-900",children:"Data Transformation"})]}),o("div",{className:"my-3 flex items-center",children:[e("input",{id:"service-option-2",type:"checkbox",value:"Data Forwarding",checked:n.services.includes("Data Forwarding"),onChange:F,className:"h-4 w-4 rounded border-gray-300 bg-gray-100 text-blue-600 focus:outline-[2px] focus:outline-blue-300",tabIndex:-1}),e("label",{htmlFor:"service-option-2",className:"ms-2 block text-xs font-medium text-gray-900",children:"Data Forwarding"})]}),a.services&&e("p",{className:"mt-1 text-xs text-red-500",children:a.services})," "]}),e(Al,{handleSubmit:v,label:"REGISTER",className:"mt-2.5 w-full",isLoading:s}),e(Ms,{path:"/login"})]})},Il=()=>{const t=Ke(),[s,n]=r.useState(1),[c,a]=r.useState(""),[f,h]=r.useState(""),[m,F]=r.useState(""),[b,g]=r.useState(""),[E,v]=r.useState([]),[i,k]=r.useState(!1),[M,U]=r.useState(""),{toast:w}=_t(),N=ht(),{mutate:A}=Tl(),{mutate:R}=Fl(),W=()=>{n(s+1)},O=async D=>{const $=I=>I==="Data Transformation"?1:I==="Data Forwarding"?2:I==="Data Polling"?3:void 0,Z=D.services.map(I=>$(I)).filter(I=>I!==void 0),L=D.email,_=D.confirmPassword,V=D.fullname,j=D.organizationName;a(L),g(j),v(Z),F(V),h(_),k(!0);try{if(await S(j)==="success")try{const ne=await t.signUp(L,_,V);ne&&(U(ne.userSub),w.success("Registration completed! Please verify your email address"),W())}catch(ne){console.log("Something went wrong:",ne)}}catch(I){w.error("Organization exists! Registration failed"),console.log(I)}k(!1)},P=async D=>{k(!0);try{if(await t.confirmSignUp(c,D)){const Z=await C({cognitoId:M,email:c,tenantName:b,serviceId:E,username:m});if(w.success("Your email has been successfully verified!"),Z.status===200)try{await t.signIn(c,f)&&N("/subscription",{replace:!0})}catch(L){console.log("sign in error::",L)}}}catch($){w.error("OTP verification failed. Please try again."),console.log($)}k(!1)},T=async()=>{try{await t.resendConfirmationCode(c),w.success("A confirmation code has been sent to your email address")}catch(D){w.error(`${D}`)}},C=async D=>new Promise(($,K)=>{A(D,{onSuccess:()=>{$({status:200})},onError:Z=>{K(Z)}})}),S=D=>new Promise(($,K)=>{R(D,{onSuccess:()=>{console.log("Organization validation success"),$("success")},onError:Z=>{console.log(Z),K(Z)}})});return o("div",{className:"grid h-screen lg:grid-cols-2",children:[e("div",{className:"hidden bg-blue-800 p-16 lg:block",children:e("img",{src:"assets/imgs/login-img.svg",alt:"Login screen"})}),e("div",{className:"login-bg-img",children:e("div",{className:`flex ${s===2?"h-screen":""} w-full items-center justify-center`,children:o("div",{className:"mb-12 w-2/4 pt-10",children:[e("h3",{className:"text-center text-4xl font-bold text-gray-900",children:"Registration"}),s===1&&e(Pl,{handleSubmit:O,isLoading:i}),s===2&&e(Os,{handleOTPVerification:P,handleResendEmail:T,setIsLoading:k,isLoading:i})]})})})]})},Qt=({title:t,price:s,features:n,buttonText:c,link:a})=>o("div",{className:"shadow-lg p-8 text-left flex flex-col justify-between",children:[o("div",{children:[e("h5",{className:"font-semibold text-lg mb-1",children:t}),e("p",{className:"text-sm text-gray-400 mb-3",children:"Membership"}),o("div",{className:"flex items-baseline mb-5",children:[o("h3",{className:"text-3xl font-semibold mr-2",children:["$",s]}),e("p",{className:"text-sm text-gray-400",children:"/month"})]}),e("hr",{}),e("div",{className:"my-6",children:e("ul",{className:"space-y-3 text-left text-sm text-gray-600 list-disc list-inside",children:n.map((f,h)=>e("li",{children:f},f[h]))})})]}),e("div",{children:e(Ct,{to:a,children:e("button",{className:"bg-blue-800 rounded-full py-2 text-sm text-white w-full",children:c})})})]}),er=()=>{const t=new Date().getFullYear();return e("div",{className:"fixed bottom-0 left-0 w-full px-7",children:o("h6",{className:"rounded-lg bg-white py-4 text-center text-sm text-gray-400",children:["© ",t,". All Rights Reserved"]})})},Ll=()=>o("div",{className:"bg-gray-100",children:[o("div",{className:"bg-white pb-32",children:[e("h4",{className:"pt-12 text-2xl font-semibold text-gray-900 text-center",children:"Get More with Our Subscription Plans"}),e("div",{className:"flex items-center justify-center",children:o("div",{className:"border border-gray-200 rounded-lg grid grid-cols-1 md:grid-cols-3 w-3/5 mt-12",children:[e(Qt,{title:"STANDARD PLAN",price:"11",features:["All 18 Lesson","Source Files","Lifetime Access"],buttonText:"Choose Plan",link:"/dashboard"}),e(Qt,{title:"PREMIUM PLAN",price:"351",features:["All 18 Lesson","Source Files","Split Payment","Lifetime Access","Commercial License"],buttonText:"Choose Plan",link:"/dashboard"}),e(Qt,{title:"ENTERPRISE",price:"351",features:["All 18 Lesson","Source Files","Split Payment","Lifetime Access","Commercial License"],buttonText:"Choose Plan",link:"/dashboard"})]})})]}),e(er,{})]}),Ts="api/UploadData/CompleteMultipartUpload",Ul={completeMultipart:(t,s)=>{const n=s?Ts+`?tenantName=${s}`:Ts;return se.post(n,t)}},Bl=()=>Te({mutationFn:({body:t,tenantName:s})=>Ul.completeMultipart(t,s),onSuccess:t=>t,onError:t=>{oe.error("File upload failed")}}),$l="api/UploadData/GeneratePreSignedUrls",Ml={generatePreSignedUrls:t=>se.post($l,t)},Ol=()=>Te({mutationFn:Ml.generatePreSignedUrls,onSuccess:()=>"Success",onError:t=>{console.log("error",t)}}),ql=()=>{const t=ht(),s=sessionStorage.getItem("tenantName"),n=r.useRef(null),[c,a]=r.useState([]),[f,h]=r.useState(0),[m,F]=r.useState(!1),{mutate:b}=Ol(),{mutate:g}=Bl(),E=C=>{if(m)ke.error("Uploading in progress, drag-and-drop is disabled");else{C.preventDefault();const S=C.dataTransfer.files;if(S.length){const D=Array.from(S);a($=>[...$,...D])}}},v=C=>{C.preventDefault()},i=C=>{if(C.target.files){const S=Array.from(C.target.files);k(S),C.target.value=""}},k=C=>{a(S=>{const D=S.map(K=>K.name),$=C.filter(K=>!D.includes(K.name));return[...S,...$]})},M=C=>{a(S=>S.filter(D=>D.name!==C))},U=()=>{a([]),n.current&&(n.current.value=""),t("/dataupload")},w=C=>{(C.key==="Enter"||C.key===" ")&&N()},N=()=>{n.current&&n.current.click()},A=async C=>{try{const S=C.size>524288e3?52428800:10485760,D=Math.ceil(C.size/S),$={fileName:C.name,totalParts:D},K=await R($),Z=[];for(let I=0;I<D;I++){const ne=I*S,d=Math.min(ne+S,C.size),X=C.slice(ne,d,C.type),Y=Math.ceil((I+1)/D*100);h(Y);const G=await W(K.presignedUrls[I],X);G&&Z.push({eTag:G,partNumber:I+1})}const L=K.key,_=K.uploadId;await O({key:L,uploadId:_,parts:Z})&&(ke.success("File uploaded successfully!"),F(!1))}catch{ke.error("Error initiating multipart upload")}},R=async C=>new Promise((S,D)=>{b(C,{onSuccess:$=>S($),onError:$=>D($)})}),W=async(C,S)=>{try{return(await Ot.put(C,S,{headers:{"Content-Type":S.type||"application/octet-stream"}})).headers.etag??null}catch(D){return console.error("Error uploading part:",D),null}},O=async C=>{try{if(!C){console.error("No valid file found");return}return await P(C,s)}catch(S){console.error("Error:",S)}},P=async(C,S)=>new Promise((D,$)=>{g({body:C,tenantName:S},{onSuccess:K=>{D(K)},onError:K=>$(K)})}),T=async()=>{if(c.length===0){ke.error("Please select a file to upload");return}for(const C of c)h(0),F(!0),await A(C);a([]),setTimeout(()=>{t("/dataupload")},3e3)};return o("div",{className:"mx-7 my-7 h-[100vh-100px] rounded-lg bg-white px-7",children:[e("div",{className:"flex w-full justify-center pt-4",children:o("div",{className:"inline-flex items-center gap-4 border-b-2 border-blue-800 px-4 pb-3",children:[e("img",{className:"w-8",src:"assets/imgs/upload-icon.svg",alt:"Upload Icon"}),e("h5",{className:"text-md font-semibold text-blue-800",children:"Upload File"})]})}),e("hr",{}),o("div",{className:"mx-auto max-w-lg py-16",children:[e("h6",{className:"py-3 text-sm font-semibold",children:"Upload Data"}),e("hr",{}),e("div",{className:"mt-5 flex w-full items-center justify-center",onDrop:E,onDragOver:v,children:o("div",{className:"flex w-full flex-col items-center justify-center rounded-lg border-2 border-dashed border-blue-800 px-2 py-10",children:[e("img",{src:"assets/imgs/upload.svg",alt:"Upload"}),c.length>0?e("ul",{className:"my-3 max-h-[20vh] w-full max-w-[380px] overflow-y-scroll text-sm text-gray-900",children:c.map(C=>o("li",{className:"col-2 my-1 flex items-center justify-between rounded-sm border p-1 text-gray-700",children:[e("span",{children:tn(C.name,25)}),e("button",{className:"ml-2 text-red-500 hover:text-red-700",onClick:()=>M(C.name),disabled:m,children:e(Lr,{size:12,color:"#4a5968"})})]},C.name))}):e("p",{className:`my-3 text-sm text-gray-900 ${m?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:"Drag your file(s) to start uploading"}),o("div",{className:"flex items-center gap-2",children:[e("div",{className:"h-0.5 w-24 bg-gray-100"}),e("p",{className:"text-sm text-gray-500",children:"OR"}),e("div",{className:"h-0.5 w-24 bg-gray-100"})]}),e("div",{role:"button",tabIndex:0,className:`mt-4 rounded-lg border border-blue-800 bg-blue-800 px-4 py-2 text-xs font-semibold text-white transition-colors duration-200 ${m?"pointer-events-none cursor-not-allowed bg-blue-700 opacity-50":"cursor-pointer hover:bg-blue-600"}`,onClick:m?void 0:N,onKeyPress:m?void 0:w,children:"Browse files"})]})}),e("div",{className:"my-3 pt-2",children:m&&e(Bs,{value:f})}),o("div",{className:"flex items-center justify-end gap-3",children:[e("button",{className:`mt-4 rounded-lg border border-gray-400 px-5 py-2 text-xs font-semibold text-gray-500 ${m?"cursor-not-allowed bg-gray-200 opacity-50":""}`,onClick:U,disabled:m,children:"Cancel"}),e("button",{className:`mt-4 rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-xs font-semibold text-white ${m?"cursor-not-allowed bg-blue-700 opacity-50":""}`,onClick:T,disabled:m,children:"Submit"})]})]}),e("input",{ref:n,id:"dropzone-file",type:"file",className:"hidden","aria-labelledby":"dropzone-label",onChange:i,multiple:!0})]})},zl=({expiryPeriod:t,handleExpiryDayChange:s,isExpiryPeriodFetching:n})=>o(Ps,{sx:{m:1,minWidth:250},size:"small",children:[e(Ur,{id:"retention-duration-label",children:"Retention Duration (Days)"}),o(Is,{labelId:"retention-duration-label",id:"select-retention-duration",value:t!==null?String(t):"",label:"Retention Duration (Days)",onChange:s,disabled:n,children:[e(qe,{value:30,children:"30 days"}),e(qe,{value:60,children:"60 days"}),e(qe,{value:90,children:"90 days"}),e(qe,{value:120,children:"120 days"}),e(qe,{value:180,children:"180 days"}),e(qe,{value:365,children:"365 days"}),e(qe,{value:0,children:"Forever"})]})]}),Wl="api/Settings/DisplayExpiryDay",_l={getExpiryPeriod:()=>se.get(Wl)},jl=()=>ye({queryKey:["getexpiryday"],queryFn:()=>_l.getExpiryPeriod()}),Gl="api/Settings/AddExpiryDay",Kl={addExpiryPeriod:t=>{const s=Gl+`?expiryDay=${t}`;return se.put(s)}},Hl=()=>Te({mutationFn:async({expiryDay:t})=>Kl.addExpiryPeriod(t),onSuccess:t=>!0,onError:t=>{var s;((s=t==null?void 0:t.response)==null?void 0:s.status)===400?oe.error("Please select a retention duration"):oe.error("Error saving the settings")}}),Ql=()=>{const{data:t,isFetching:s,error:n,refetch:c}=jl(),{mutateAsync:a}=Hl(),[f,h]=r.useState(null),m=b=>{h(parseInt(b.target.value))},F=async()=>{const b=await a({expiryDay:f});ke.success("Successfully saved the settings"),console.log("addExpiryPeriodResponse:",b)};return console.log("data:",t),r.useEffect(()=>{(async()=>{try{const g=await c(),E=g==null?void 0:g.data;h(E),console.log("expiryPeriod:",f)}catch(g){console.error("Error re-fetching data:",g)}})()},[c]),n?e(Ue,{}):e("div",{className:"px-7 pt-4",children:o("div",{style:{borderRadius:"7px",backgroundColor:"#ffffff",marginBottom:"70px",minHeight:"500px"},children:[e(bt,{}),o(Ze,{sx:{marginTop:"20px",padding:"8px 32px 38px"},children:[o(Ze,{className:"space-y-6",children:[e(sn,{heading:"Data Retention"}),e(zl,{expiryPeriod:f,handleExpiryDayChange:m,isExpiryPeriodFetching:s})]}),e("div",{className:"mt-auto flex h-full justify-end",children:e("button",{onClick:F,type:"submit",className:"rounded-lg border border-blue-800 bg-blue-800 px-5 py-2 text-sm font-semibold text-white focus:border-transparent focus:outline-[2px] focus:outline-offset-[3px] focus:outline-blue-400",children:"Save Settings"})})]})]})})},tr=[{key:rs,label:"login",element:e(ll,{}),permission:"public"},{key:gn,label:"register",element:e(Il,{}),permission:"public"},{key:pn,label:"subscription",element:e(Ll,{}),permission:"private"},{key:js,label:"dashboard",element:e(Xn,{}),permission:"private"},{key:hn,label:"dashboard",element:e(ol,{}),permission:"public"},{key:bn,label:"dashboard",element:e(nl,{}),permission:"public"},{key:xn,label:"dataupload",element:e(rl,{}),permission:"private",children:[{key:Cn,label:"uploadfile",element:e(ql,{}),permission:"private"}]},{key:yn,label:"datatransformation",element:e(qi,{}),permission:"private"},{key:Fn,label:"pendingdata",element:e(Cl,{}),permission:"private"},{key:kn,label:"patientdata",element:e(hl,{}),permission:"private"},{key:wn,label:"datapolling",element:e(ti,{}),permission:"private"},{key:vn,label:"dataforwarding",element:e(Xo,{}),permission:"private"},{key:Nn,label:"dataconfigurations",element:e(Ds,{}),permission:"private",children:[{key:Dn,label:"usermanagement",element:e(Ds,{}),permission:"private"},{key:Rn,label:"blocklydefinition",element:e(wa,{}),permission:"private"},{key:Tn,label:"configdataforwarding",element:e(Ia,{}),permission:"private",children:[{key:Pn,label:"adduserdataforwarding",element:e(Vn,{}),permission:"private"}]},{key:An,label:"configdatapolling",element:e(Ga,{}),permission:"private",children:[{key:In,label:"getuserdatapolling",element:e(ta,{}),permission:"private"}]},{key:Ln,label:"subscriptionconfiguration",element:e(Mo,{}),permission:"private"},{key:En,label:"globalblocklytemplates",element:e(so,{}),permission:"private"},{key:Un,label:"configsettings",element:e(Ql,{}),permission:"private"}]},{key:Sn,label:"datareports",element:e(Pi,{}),permission:"private",children:[{key:Bn,label:"userlist",element:e(Vt,{}),permission:"private"},{key:$n,label:"activitylog",element:e(Js,{}),permission:"private"},{key:Mn,label:"reportsdatatransformed",element:e(Zs,{}),permission:"private"},{key:On,label:"reportsdatauploaded",element:e(Vs,{}),permission:"private"},{key:qn,label:"reportsdataforwarded",element:e(Xs,{}),permission:"private"}]}],Yl=({component:t})=>{const{isAuthenticated:s,loading:n}=Ke(),c=Pt();return n?"loading... ":s?e(t,{}):e(ts,{to:"/login",state:{from:c}})},Jl=({component:t})=>Ke().isAuthenticated?e(ts,{to:js}):e(t,{}),sr=(t,s,n="")=>{if(s.children)for(const c of s.children)sr(t,c,n+s.key);if(s.element)return t.push({path:n+s.key,element:s.permission==="private"?e(Yl,{component:()=>s.element}):e(Jl,{component:()=>s.element})}),t},Xl=(t,s)=>t.children?bs(t.label):e(Ct,{to:s,children:bs(t.label)}),rr=(t,s="")=>{if(t.label){if(t.children){const n=[];for(const c of t.children){const a=rr(c,s+t.key);a&&n.push(a)}t.children=n.length>0?n:void 0}return{key:s+t.key,label:Xl(t,s+t.key),children:t.children,element:t.element}}},nr=[];tr.map(t=>({key:t.key,label:t.label}));for(const t of tr){const s=Zt.cloneDeep(t);rr(s);const n=Zt.cloneDeep(t);sr(nr,n)}const Zl=({resetErrorBoundary:t})=>o("div",{role:"alert",children:[e(Ue,{}),e("button",{className:"mb-10 w-full underline",onClick:t})]}),Vl=()=>{const[t,s]=r.useState(!1),n=Ke(),c=Pt(),[a,f]=r.useState(null),h=r.useRef(null),[m,F]=r.useState(!1),[b,g]=r.useState(""),{selectedTenantName:E,clearSelectedTenantName:v}=_s(),{toast:i}=_t(),k=async()=>{sessionStorage.clear(),localStorage.clear(),v(),n.setFullEmail(""),s(!1);try{n.setIsAuthenticated(!1),await n.signOut(),console.log("User signed out successfully")}catch(w){console.error("Error during logout:",w)}},M=async()=>{const w=n.fullEmail;g(w);try{await n.forgotPassword(w),i.success("A confirmation code has been sent to your email address")}catch(N){i.error(String(N))}F(!0)},U=w=>{h.current&&!h.current.contains(w.target)&&s(!1)};return r.useEffect(()=>((async()=>{try{const N=await n.getIdToken();if(N){const A=Or(N);if(!A.sub||!A.email)throw new Error("Invalid token: missing required claims");f(A),sessionStorage.setItem("fullName",A.given_name),sessionStorage.setItem("fullEmail",A.email),n.setFullEmail(A.email)}}catch(N){console.error("Failed to decode token:",N)}})().catch(N=>{console.error("Error in fetchAndDecodeToken:",N)}),document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}),[n]),r.useEffect(()=>{!n.isAuthenticated&&!c.pathname.includes("/login")&&(console.log("Redirecting to /login"),window.location.href="/login")},[n.isAuthenticated]),o("div",{className:"sticky top-0 z-10 w-full bg-white",id:"navbar-wrapper",children:[e("nav",{className:"navbar mb-0 px-7 py-3 text-2xl",children:o("div",{className:"flex items-center justify-between",children:[e("a",{href:"/dashboard",children:e("img",{className:"w-20",src:"/assets/imgs/FHIR-temp-logo.svg",alt:"logo"})}),e("div",{className:"user-wrapper relative mr-3 flex",children:e("div",{className:"relative inline-block text-left",ref:h,children:o("div",{children:[o("div",{className:"flex items-center gap-3",children:[e("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gray-200 text-sm",children:e(Br,{className:"text-blue-800"})}),o("button",{className:"relative flex items-center gap-3",onClick:()=>{s(w=>!w)},children:[e("span",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gray-200 text-sm font-bold tracking-wider text-blue-800",children:rn(a==null?void 0:a.given_name)}),o("div",{className:"text-left",children:[e("span",{className:"block text-sm font-semibold text-gray-900",children:a==null?void 0:a.given_name}),E&&o("span",{className:"block text-xs font-semibold text-gray-500",children:["Organization Name: ",E]})]})]})]}),t&&e("div",{className:"absolute right-2.5 z-10 mt-2 w-48 rounded-lg bg-white shadow-lg",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",tabIndex:-1,children:o("div",{className:"p-4",role:"none",children:[o(Ct,{to:"#",className:"mb-2 block py-2 text-sm text-gray-900",role:"menuitem",tabIndex:-1,id:"menu-item-0",onClick:M,children:[e($r,{className:"mr-3 text-gray-400"}),"Change Password"]}),o(Ct,{to:"#",className:"block rounded-md bg-blue-800 px-3 py-2 text-center text-sm text-white",role:"menuitem",tabIndex:-1,id:"menu-item-1",onClick:k,children:[e(Mr,{className:"white mr-3"}),"Log Out"]})]})})]})})})]})}),m&&e(qs,{email:b,password:"",setOpenModal:F,isLoggedIn:!0})]})},et=({imgSrc:t,imgInactiveSrc:s,label:n,alt:c,link:a,isActive:f,onClick:h,isDisabled:m})=>{const[F,b]=r.useState(!1);return e("div",{children:o(Ct,{to:m?"#":a,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0.75rem 1rem",fontSize:"0.875rem",color:"#455571",textDecoration:"none",borderRadius:"7px",cursor:m?"not-allowed":"pointer",transition:"color 0.2s ease",boxSizing:"border-box",minHeight:"3rem",...f&&!m?{color:"#304CB2",backgroundColor:"#dbeafe"}:{},...F&&!m?{color:"#304CB2"}:{}},onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onClick:h,children:[e("img",{style:{width:"20px",height:"20px",marginRight:"0.5rem"},src:(f||F)&&!m?t:s,alt:c}),n]})})},ec=()=>{const t=sessionStorage.getItem("tenantName"),s=sessionStorage.getItem("userRole"),n=Pt(),[c,a]=r.useState(n.pathname),f=sessionStorage.getItem("fullName"),[h,m]=r.useState(!1),[F,b]=r.useState(null),[g,E]=r.useState(null),{data:v}=Ht(t),{data:i}=ns(""),k=r.useMemo(()=>{var R;const A=sessionStorage.getItem("fullEmail");return((R=v==null?void 0:v.find(W=>W.email===A))==null?void 0:R.services)||[]},[v]);r.useEffect(()=>{a(n.pathname)},[n.pathname]);const M=r.useMemo(()=>{if(console.log("userDataList: ",v),console.log("services: ",k),(i==null?void 0:i.role)===1||(i==null?void 0:i.role)===3&&t)return console.log("selected: /dataconfigurations/usermanagement 1"),"/dataconfigurations/usermanagement";if((i==null?void 0:i.role)===3&&!t)return console.log("selected: /dataconfigurations/globalblocklytemplates"),"/dataconfigurations/globalblocklytemplates";if((i==null?void 0:i.role)===2){if(console.log("services in userRole 2 or 3: ",k),k.includes("Data Transformation"))return console.log("selected: /dataconfigurations/blocklydefinition"),"/dataconfigurations/blocklydefinition";if(k.includes("Data Forwarding"))return console.log("selected: /dataconfigurations/configdataforwarding"),"/dataconfigurations/configdataforwarding";if(k.includes("Data Polling"))return console.log("selected: /dataconfigurations/configdatapolling"),"/dataconfigurations/configdatapolling"}return console.log("selected: /dataconfigurations/usermanagement 2"),"/dataconfigurations/usermanagement"},[i==null?void 0:i.role,k,t]),U=r.useMemo(()=>(i==null?void 0:i.role)===1||(i==null?void 0:i.role)===3?"datareports/userlist":(i==null?void 0:i.role)===2||(i==null?void 0:i.role)===3?"datareports/activitylog":"datareports/userlist",[i==null?void 0:i.role]),w=A=>{m(!1),a(A),console.log("LINK PASSED IS:",A)};console.log("userRole:",s),console.log("dashboardData?.role:",i==null?void 0:i.role),console.log("tenantName:",t);const N=[{label:"Dashboard",imgSrc:"/assets/imgs/gauge-solid.svg",imgInactiveSrc:"/assets/imgs/Inactive-gauge-solid.svg",link:"/dashboard",isActive:c==="/dashboard",isDisabled:!1},{label:"Data Upload",imgSrc:"/assets/imgs/upload-icon.svg",imgInactiveSrc:"/assets/imgs/Inactive-upload-icon.svg",link:"/dataupload",isActive:c==="/dataupload",isDisabled:(i==null?void 0:i.role)===3&&!t},{label:"Data Transformation",imgSrc:"/assets/imgs/data-transformation.svg",imgInactiveSrc:"/assets/imgs/Inactive-data-transformation.svg",link:"/datatransformation",isActive:c==="/datatransformation",isDisabled:(i==null?void 0:i.role)===3?!t:!k.includes("Data Transformation")&&(i==null?void 0:i.role)!==3},{label:"Pending/Failed",imgSrc:"/assets/imgs/gui-order-pending-svgrepo-com (1).svg",imgInactiveSrc:"/assets/imgs/inactive-gui-order-pending-svgrepo-com.svg",link:"/pendingdata",isActive:c==="/pendingdata",isDisabled:!1},{label:"Patient Data",imgSrc:"/assets/imgs/active-patient-profile-people-svgrepo-com.svg",imgInactiveSrc:"/assets/imgs/inactive-patient-profile-people-svgrepo-com.svg",link:"/patientdata",isActive:c==="/patientdata",isDisabled:(i==null?void 0:i.role)===3&&!t},{label:"Data Forwarding",imgSrc:"/assets/imgs/data-forwarding.svg",imgInactiveSrc:"/assets/imgs/inactive-data-forwarding.svg",link:"/dataforwarding",isActive:c==="/dataforwarding",isDisabled:(i==null?void 0:i.role)===3?!t:!k.includes("Data Forwarding")&&(i==null?void 0:i.role)!==3},{label:"Data Polling",imgSrc:"/assets/imgs/data-polling.svg",imgInactiveSrc:"/assets/imgs/inactive-data-polling.svg",link:"/datapolling",isActive:c==="/datapolling",isDisabled:(i==null?void 0:i.role)===3?!t:!k.includes("Data Polling")&&(i==null?void 0:i.role)!==3},{label:"Configurations",imgSrc:"/assets/imgs/configuration.svg",imgInactiveSrc:"/assets/imgs/inactive-configuration.svg",link:M,isActive:n.pathname.includes("/dataconfigurations"),isDisabled:!1},{label:"Reports",imgSrc:"/assets/imgs/reports-icon.svg",imgInactiveSrc:"/assets/imgs/inactive-reports-icon.svg",link:U,isActive:n.pathname.includes("/datareports"),isDisabled:(i==null?void 0:i.role)===3&&!t}];return o("div",{className:"mx-7 mt-8 rounded-[7px] bg-white px-[15px] py-2",children:[o("div",{className:"hidden flex-wrap items-center justify-start font-medium md:flex",children:[e(et,{imgSrc:"/assets/imgs/gauge-solid.svg",imgInactiveSrc:"/assets/imgs/Inactive-gauge-solid.svg",label:"Dashboard",alt:"Dashboard",link:"/dashboard",isActive:c==="/dashboard",onClick:()=>w("/dashboard"),isDisabled:!1}),e(et,{imgSrc:"/assets/imgs/upload-icon.svg",imgInactiveSrc:"/assets/imgs/Inactive-upload-icon.svg",label:"Data Upload",alt:"Data Upload Icon",link:"/dataupload",isActive:c==="/dataupload",onClick:()=>w("/dataupload"),isDisabled:(i==null?void 0:i.role)===3&&!t}),e(et,{imgSrc:"/assets/imgs/data-transformation.svg",imgInactiveSrc:"/assets/imgs/Inactive-data-transformation.svg",label:"Data Transformation",alt:"Data Transformation Icon",link:"/datatransformation",isActive:c==="/datatransformation",onClick:()=>w("/datatransformation"),isDisabled:(i==null?void 0:i.role)===3?!t:!k.includes("Data Transformation")&&(i==null?void 0:i.role)!==3}),e(et,{imgSrc:"/assets/imgs/gui-order-pending-svgrepo-com (1).svg",imgInactiveSrc:"/assets/imgs/inactive-gui-order-pending-svgrepo-com.svg",label:"Pending/Failed",alt:"Patient Data Icon",link:"/pendingdata",isActive:c==="/pendingdata",onClick:()=>w("/pendingdata"),isDisabled:!1}),e(et,{imgSrc:"/assets/imgs/active-patient-profile-people-svgrepo-com.svg",imgInactiveSrc:"/assets/imgs/inactive-patient-profile-people-svgrepo-com.svg",label:"Patient Data",alt:"Patient Data Icon",link:"/patientdata",isActive:c==="/patientdata",onClick:()=>w("/patientdata"),isDisabled:(i==null?void 0:i.role)===3&&!t}),e(et,{imgSrc:"/assets/imgs/data-forwarding.svg",imgInactiveSrc:"/assets/imgs/inactive-data-forwarding.svg",label:"Data Forwarding",alt:"Data Forwarding Icon",link:"/dataforwarding",isActive:c==="/dataforwarding",onClick:()=>w("/dataforwarding"),isDisabled:(i==null?void 0:i.role)===3?!t:!k.includes("Data Forwarding")&&(i==null?void 0:i.role)!==3}),e(et,{imgSrc:"/assets/imgs/data-polling.svg",imgInactiveSrc:"/assets/imgs/inactive-data-polling.svg",label:"Data Polling",alt:"Data Polling Icon",link:"/datapolling",isActive:c==="/datapolling",onClick:()=>w("/datapolling"),isDisabled:(i==null?void 0:i.role)===3?!t:!k.includes("Data Polling")&&(i==null?void 0:i.role)!==3}),e(et,{imgSrc:"/assets/imgs/configuration.svg",imgInactiveSrc:"/assets/imgs/inactive-configuration.svg",label:"Configurations",alt:"Configuration Icon",link:M,isActive:n.pathname.includes("/dataconfigurations"),onClick:()=>w(M),isDisabled:!1}),e(et,{imgSrc:"/assets/imgs/reports-icon.svg",imgInactiveSrc:"/assets/imgs/inactive-reports-icon.svg",label:"Reports",alt:"Reports Icon",link:U,isActive:n.pathname.includes("/datareports"),onClick:()=>w(U),isDisabled:(i==null?void 0:i.role)===3&&!t})]}),e("div",{className:"p-4 md:hidden",children:o("button",{className:"flex items-center justify-center rounded-md bg-gray-100 p-2 text-[#455571]",onClick:()=>m(!0),children:[e(qr,{}),e(ot,{marginLeft:1,children:"Menu"})]})}),o("div",{className:`fixed inset-0 z-40 transform ${h?"translate-x-0":"-translate-x-full"} h-full w-4/5 bg-white shadow-lg transition-transform duration-300 sm:w-[365px]`,children:[o("div",{className:"flex items-center justify-start border-b py-4 pl-[36px] pr-[20px] font-bold text-[#2a2f52]",children:[e(zr,{sx:{fontSize:"30px"}}),o("h2",{className:"ml-[16px] text-[19px] font-semibold",children:["Hello",`, ${f}`]}),h&&e("button",{className:"absolute right-[-50px] top-1 p-2 text-white",onClick:()=>m(!1),children:e(It,{fontSize:"large"})})]}),e("ul",{className:"mt-[10px]",children:N.map(A=>e("li",{className:"group",onMouseEnter:()=>!A.isDisabled&&E(A.label),onMouseLeave:()=>E(null),children:e(Ct,{to:A.isDisabled?"#":A.link,className:`flex w-full items-center justify-between py-[13px] pl-[36px] pr-[20px] ${A.isDisabled?"cursor-not-allowed text-gray-400":"cursor-pointer hover:text-[#304CB2]"}`,onClick:R=>{A.isDisabled?R.preventDefault():w(A.link)},children:o("div",{className:"flex items-center gap-4",children:[e("img",{src:A.isActive||g===A.label?A.imgSrc:A.imgInactiveSrc,alt:`${A.label} Icon`,className:"h-5 w-5"}),e(ot,{variant:"body1",className:`${A.isDisabled?"text-gray-400":A.isActive||g===A.label?"text-[#304CB2]":"text-[#455571]"}`,children:A.label})]})})},A.label))}),F&&o("div",{className:"absolute inset-0 z-50 translate-x-full transform bg-white transition-transform duration-300",children:[o("button",{className:"p-4",onClick:()=>b(null),children:[e(Wr,{})," Back"]}),e("h2",{className:"p-4 text-lg font-semibold",children:F}),e("ul",{})]})]}),h&&e("button",{className:"fixed inset-0 z-30 cursor-default bg-black bg-opacity-50",onClick:()=>m(!1),"aria-label":"Close sidebar"})]})},tc=()=>{const t=Ke(),n=Pt().pathname.split("/").filter(Boolean),c=n[n.length-1],f=!(c==="uploadfile"),m=!(c==="subscription"||c==="getuserdatapolling"||c==="adduserdataforwarding");return o("div",{className:"h-full w-full",children:[t.isAuthenticated&&f&&o(Tt,{children:[e(Vl,{}),m&&e(ec,{})]}),e("div",{className:"flex flex-col",children:e(_r,{fallbackRender:Zl,children:e(r.Suspense,{fallback:e("div",{className:"flex h-full w-full items-center justify-center",children:e("span",{children:"Loading..."})}),children:e(jr,{})})})}),t.isAuthenticated&&f&&e(er,{})]})},sc=r.lazy(()=>fn(()=>import("./not-found-ac9fc911.js"),["assets/not-found-ac9fc911.js","assets/vendor-ac6fcfdf.js","assets/vendor-55523fc1.css","assets/components-fee8c5d0.js","assets/components-4536c838.css"])),rc=[{path:"/",element:e(tc,{}),children:[{path:"",element:e(ts,{to:"login"})},...nr,{path:"*",element:e(sc,{})}]}],nc=()=>Gr(rc),ac=()=>e(r.Suspense,{fallback:"loading...",children:e(Kr,{children:e(nc,{})})});Hr.configure(on);Qr.createRoot(document.getElementById("root")).render(e(Mt.StrictMode,{children:e(dn,{children:e(cn,{children:e(ln,{children:o(an,{children:[e(nn,{}),e(ac,{})]})})})})}));
































